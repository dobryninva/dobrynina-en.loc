var tmFilters={config:{filters_cont:"#filters",slider_steps:[10,.1],sortby:"pagetitle",sortdir:"asc",numeric:["price","weight"],multitags:["tag"],limit:10,price_field:"price",multi_currency:!0,filter_mode:"get"},flt_timer:null,init:function(c){$.extend(this.config,c);tmFilters.slidersInit();tmFilters.sortingInit();tmFilters.filterSelected()},sortingInit:function(){$("select.f_sortby,select.f_sortdir,*.f_limit").on("change",tmFilters.sortingAction)},sortingAction:function(c){clearTimeout(tmFilters.flt_timer);
tmFilters.flt_timer=setTimeout(function(){var a=c.currentTarget;if($(a).is(".f_limit")&&!isNaN(a.value)){var b=$('[name="limit"]',tmFilters.config.filters_cont);0<b.length&&(b.val(a.value),$("form",tmFilters.config.filters_cont).submit())}else 0<$("select.f_sortby").length&&(a=$("select.f_sortby").val(),b=$('[name="sortby"]',tmFilters.config.filters_cont),0<b.length&&b.val(a)),0<$("select.f_sortdir").length&&(a=$("select.f_sortdir").val(),b=$('[name="sortdir"]',tmFilters.config.filters_cont),0<b.length&&
b.val(a)),$("form",tmFilters.config.filters_cont).submit()},1E3)},slidersInit:function(){0<$(".range-slider").length&&$(".range-slider").each(function(c){var a=$(this),b=a.parent();c=tmFilters.getFilterName($("input:text:eq(0)",b).attr("name"));var e=parseFloat($("input:text:eq(0)",b).val().replace(",",".")),d=parseFloat($("input:text:eq(1)",b).val().replace(",","."));tmFilters.config.multi_currency&&c==tmFilters.config.price_field&&(e=tmFilters.currRate(c,e),d=tmFilters.currRate(c,d),$("input:text:eq(0)",
b).val(e.toString()),$("input:text:eq(1)",b).val(d.toString()));a.slider({min:e,max:d,step:100>d-e?.1:10,values:[e,d],range:!0,stop:function(c,d){$("input:text:eq(0)",b).val(a.slider("values",0));$("input:text:eq(1)",b).val(a.slider("values",1))},slide:function(c,d){$("input:text:eq(0)",b).val(a.slider("values",0));$("input:text:eq(1)",b).val(a.slider("values",1))}})})},isEmpty:function(c){for(var a in c)if(c.hasOwnProperty(a))return!1;return!0},getFilterName:function(c){if(!c)return"";c=c.substr(2);
-1<c.indexOf("[")&&(c=c.substr(0,c.indexOf("[")));return c},currRate:function(c,a){if(c==this.config.price_field&&tmFiltersOptions&&tmFiltersOptions.currency_rate){var b=tmFiltersOptions.currency_default?parseInt(tmFiltersOptions.currency_default):1,e=tmFiltersOptions.currency_rate.split("||"),d=-1<document.cookie.indexOf("shk_currency=")?document.cookie.indexOf("shk_currency=")+(new String("shk_currency=")).length:-1;d=-1<d?parseInt(document.cookie.substring(d,d+1)):1;if(d!=b){var f=e[d-1].split("==");
d=f[1]&&!isNaN(f[1])?parseFloat(f[1].replace(",",".")):1;f=e[b-1].split("==");b=f[1]&&!isNaN(f[1])?parseFloat(f[1].replace(",",".")):1;a=parseFloat((b/d*a).toFixed(2))}}return a},getUrlVars:function(){var c={};var a=3<=document.location.search.length?document.location.search.substr(1):window.location.hash.substr(1);a=decodeURIComponent(a.replace(/\+/g," "));-1<a.indexOf("?")&&(a=a.substr(a.indexOf("?")+1));if(0==a.length)return c;for(var b=a.split("&"),e=0;e<b.length;e++)if(a=b[e].split("="),-1<a[0].indexOf("[from]")||
-1<a[0].indexOf("[to]")){var d=a[0].replace(/\[.*\]/,"");"undefined"==typeof c[d]&&(c[d]={});-1<a[0].indexOf("[from]")?c[d].from=parseFloat(a[1]):c[d].to=parseFloat(a[1])}else-1<a[0].indexOf("[")?(d=a[0].substr(0,a[0].indexOf("[")),"undefined"==typeof c[d]&&(c[d]=[]),c[d].push(a[1])):c[a[0]]=a[1];return c},filterSelected:function(){var c=this.getUrlVars();if(!this.isEmpty(c)){$("input:checkbox",tmFilters.config.filters_cont).removeAttr("checked");for(var a in c)if(0!=c[a].length){var b="f_"==a.substr(0,
2)?a.substr(2):a;if(!(-1<$.inArray(b,["page"])))if(-1<$.inArray(b,["sortby","sortdir"])){var e=$("select.f_sortby"),d=$("select.f_sortdir");"sortby"==b&&0<e.length?(e.val(c[a]),e.data("selectBoxSelectBoxIt")&&e.data("selectBoxSelectBoxIt").refresh()):"sortdir"==b&&0<d.length&&(d.val(c[a]),e.data("selectBoxSelectBoxIt")&&d.data("selectBoxSelectBoxIt").refresh())}else"limit"!=b||isNaN(c[a])?-1<$.inArray(b,tmFilters.config.numeric)?c[a].from&&c[a].to&&($("#"+b+"Min").val(c[a].from),$("#range_"+b).slider("values",
0,c[a].from),$("#"+b+"Max").val(c[a].to),$("#range_"+b).slider("values",1,c[a].to)):0<$("input:checkbox",tmFilters.config.filters_cont).length?(b=-1<$.inArray(b,tmFilters.config.multitags)?"f_"+b+"[like][]":"f_"+b+"[]",b=$('input[name="'+b+'"]:checkbox',tmFilters.config.filters_cont),0<b.length&&b.each(function(){-1<$.inArray($(this).val(),c[a])&&($(this).prop("checked","checked"),$(this).parent().addClass("active"))})):(b=$('select[name="f_'+b+'"]',tmFilters.config.filters_cont),b.val(c[a]),b.data("selectBoxSelectBoxIt")&&
b.data("selectBoxSelectBoxIt").refresh()):(b=$("select.f_limit"),0<b.length&&(b.val(c[a]),b.data("selectBoxSelectBoxIt")&&b.data("selectBoxSelectBoxIt").refresh()))}}}};