var AjaxForm={initialize:function(d){jQuery().ajaxForm||document.write('<script src="'+d.assetsUrl+'js/lib/jquery.form.min.js">\x3c/script>');$(document).on("submit",d.formSelector,function(f){$(this).ajaxSubmit({dataType:"json",data:{pageId:d.pageId},url:d.actionUrl,beforeSerialize:function(a,b){a.find(":submit").each(function(){a.find('input[type="hidden"][name="'+$(this).attr("name")+'"]').length||$(a).append($('<input type="hidden">').attr({name:$(this).attr("name"),value:$(this).attr("value")}))})},
beforeSubmit:function(a,b){if("undefined"!=typeof afValidated&&0==afValidated)return!1;b.find("div.error, span.error").html("");b.find(".error").removeClass("error");b.find(".has-error").removeClass("has-error");b.find("input,textarea,select,button").attr("disabled",!0);return!0},success:function(a,b,d,c){c.find("input,textarea,select,button").attr("disabled",!1);a.form=c;$(document).trigger("af_complete",a);if(a.success)c.find(".error").removeClass("error"),c[0].reset(),a=jQuery(c[0]).next(".custom_success_message"),
jQuery(c[0]).remove(),a.fadeIn(300),SHK.refreshCart();else if(a.data)for(var e in a.data)a.data.hasOwnProperty(e)&&(b=a.data[e],c.find(".error_"+e).html(b).addClass("error"),c.find('[name="'+e+'"],[name="'+e+'[]"]').addClass("error").parents(".form-group").addClass("has-error"))}});f.preventDefault();return!1});$(document).on("reset",d.formSelector,function(d){$(this).find(".error").html("")})}};