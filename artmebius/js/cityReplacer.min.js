var cities={ip:"",city_chosen:"",city_default:"Нижний Новгород",city_domains:{"Нижний Новгород":"domen.ru"},ymaps:void 0,get_ip:function(){var i=this;return $.ajax({url:"/artmebius/snippets/ajax.php",type:"POST",async:!1,dataType:"json",data:{action:"get_ip"}}).done(function(t){i.ip=t.ip}).fail(function(){i.ip=""}),i.ip},check_city_by_ip:function(){let i="";return $.ajax({url:"/artmebius/snippets/ajax.php",type:"POST",async:!1,dataType:"json",data:{action:"check_city_by_ip",ip:this.ip}}).done(function(t){i=t.city}).fail(function(){}),i},get_city_by_domain:function(){let t="";for(key in this.city_domains)window.location.host==this.city_domains[key]&&(t=key);return t},get_domain_by_city:function(t){return this.city_domains[t],this.city_domains[t]},proccess_city:function(t){let i=!0;return $.ajax({url:"/artmebius/snippets/ajax.php",type:"POST",async:!1,dataType:"json",data:{action:"proccess_city",ip:this.ip,city:t}}).done(function(t){i=!0}).fail(function(t){i=!1}),i},set_cookie:function(t,i){return i=void 0===i?2592e3:i,setCookie("city_select",t,i),!0},get_cookie:function(){var t=getCookie("city_select");return t||!1},del_cookie:function(){return delCookie("city_select"),!0},render_template:function(t){t=void 0===t?this.city_default:t,$(".artmebius-city").html('<a id="choose-city" class="city_choose" href="javascript:void(0)" data-target="#cities_choose" data-toggle="modal"><i class="fa fa-map-marker-alt"></i> <span class="choosen-city">'+t+"</span></a>")},init:function(){let i=this,t="",e=i.get_cookie(),o=i.get_city_by_domain();i.get_ip(),e?e!=o?(i.set_cookie(o),i.render_template(o)):i.render_template(e):(t=i.check_city_by_ip(),t?(i.set_cookie(t),i.render_template(t),i.get_domain_by_city(t)!=window.location.host&&(window.location.host=i.city_domains[t])):$.ajax({async:!1,url:"https://api-maps.yandex.ru/2.0-stable/?load=package.standard&lang=ru-RU",dataType:"script"}).done(function(t){ymaps.ready(function(){i.ymaps=ymaps,o,ymaps.geolocation.city,i.proccess_city(o),i.set_cookie(o),i.render_template(o)})}))},choose_city:function(t){var i=this;t=void 0!==i.city_domains[t]?t:i.city_default,i.set_cookie(t),i.proccess_city(t)&&(window.location.host!=i.city_domains[t]&&(window.location.host=i.city_domains[t]),i.render_template(t),$("#cities_choose").modal("hide"))}};cities.init(),$('.artmebius-city-list span:not(".cities_letter")').on("click",function(){let t=$(this).text();cities.choose_city(t.trim())});