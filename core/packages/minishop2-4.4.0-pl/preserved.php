<?php return array (
  'e3167834a96a94fb3b935568191bc8ac' => 
  array (
    'criteria' => 
    array (
      'name' => 'minishop2',
    ),
    'object' => 
    array (
      'name' => 'minishop2',
      'path' => '{core_path}components/minishop2/',
      'assets_path' => '',
    ),
  ),
  'b4a326f517679a151a249ea9fadf4f4e' => 
  array (
    'criteria' => 
    array (
      'key' => 'mgr_tree_icon_mscategory',
    ),
    'object' => 
    array (
      'key' => 'mgr_tree_icon_mscategory',
      'value' => 'icon icon-barcode',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '72081b0485702fe6e7715f598bc96141' => 
  array (
    'criteria' => 
    array (
      'key' => 'mgr_tree_icon_msproduct',
    ),
    'object' => 
    array (
      'key' => 'mgr_tree_icon_msproduct',
      'value' => 'icon icon-tag',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'cd2fa940cb8e6e21ed6cff5af0b35c0d' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_services',
    ),
    'object' => 
    array (
      'key' => 'ms2_services',
      'value' => '{"cart":[],"order":[],"payment":[],"delivery":[]}',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_main',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '6ce769ac384c40c89bf60470ffa192b6' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_plugins',
    ),
    'object' => 
    array (
      'key' => 'ms2_plugins',
      'value' => '[]',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_main',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'a9600fc12da3581e32b822b2ad686f5d' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_chunks_categories',
    ),
    'object' => 
    array (
      'key' => 'ms2_chunks_categories',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_main',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'ca3e0ab6a1205f5db79e81fe26032058' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_tmp_storage',
    ),
    'object' => 
    array (
      'key' => 'ms2_tmp_storage',
      'value' => 'session',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_main',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'c72442449a51589c8ee0f6c120aa5b7f' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_use_scheduler',
    ),
    'object' => 
    array (
      'key' => 'ms2_use_scheduler',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_main',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'e6ad12770f09dc1755d7c04be5b7a4f4' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_grid_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_grid_fields',
      'value' => 'id,menuindex,pagetitle,article,price,thumb',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '2021-02-24 09:25:21',
    ),
  ),
  '05d8b8e3b9f280a4687c4538eb33ea54' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_show_nested_products',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_show_nested_products',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'ea7714f7af1628f5c2d3a64aedf6b839' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_show_comments',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_show_comments',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'fd6fd651e689f3ac809226f0ee50a823' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_show_options',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_show_options',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'b5cd3894843fae1281fb4937bd723b77' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_remember_tabs',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_remember_tabs',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '458e9db3edf08ca582933d595e45cc78' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_id_as_alias',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_id_as_alias',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '6f0ab8862d87f724c7c817406315ab0a' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_content_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_content_default',
      'value' => '',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '7f6d34aff7d855f9e24dc90efcdd1958' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_template_category_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_template_category_default',
      'value' => '9',
      'xtype' => 'modx-combo-template',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '2020-10-30 09:13:37',
    ),
  ),
  '051b543d09da63340544f4210a0519a5' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_extra_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_extra_fields',
      'value' => 'price,old_price,article,weight,color,size,vendor,made_in,tags',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '2021-02-24 09:27:43',
    ),
  ),
  '01a7862db0757e2baa913c02abd34a5c' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_show_comments',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_show_comments',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '6592a927100e9fe45ed755d9693130e8' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_template_product_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_template_product_default',
      'value' => '10',
      'xtype' => 'modx-combo-template',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '2020-10-30 09:14:50',
    ),
  ),
  'e6e7df56ee3dfcd523399393b80c408d' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_show_in_tree_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_show_in_tree_default',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'a634ea6c46da73f44c2ee6bc1b4ac6d4' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_source_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_source_default',
      'value' => '8',
      'xtype' => 'modx-combo-source',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '2020-10-29 16:33:52',
    ),
  ),
  '266823cb20fd07a37fcecfc311fe311a' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_thumbnail_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_thumbnail_default',
      'value' => '{assets_url}components/minishop2/img/mgr/ms2_thumb.png',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'cd320927e788a0d6c460c2eed4222dcd' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_thumbnail_size',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_thumbnail_size',
      'value' => 'small',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'dcddeef1c63955715af104d3bfb17a9f' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_remember_tabs',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_remember_tabs',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'bf98ccd53db51d4f76d46e6c07985502' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_id_as_alias',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_id_as_alias',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'abb7b0e5f29a706c901df857ef1e8025' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_price_format',
    ),
    'object' => 
    array (
      'key' => 'ms2_price_format',
      'value' => '[2, ".", " "]',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '29c7c6b0f3db40c2872179d6ab4ae13c' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_weight_format',
    ),
    'object' => 
    array (
      'key' => 'ms2_weight_format',
      'value' => '[3, ".", " "]',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '7bee596b55dfbf8af6ed57b44f97b54c' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_price_format_no_zeros',
    ),
    'object' => 
    array (
      'key' => 'ms2_price_format_no_zeros',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'd372785e3a46ae235d0e97be96c75b46' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_weight_format_no_zeros',
    ),
    'object' => 
    array (
      'key' => 'ms2_weight_format_no_zeros',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '874fba157a6a8187ee785d49aeb9d5b7' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_tab_extra',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_tab_extra',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '1d15f4e4cc42d2de7d7c3b55eca70b6c' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_tab_gallery',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_tab_gallery',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '4ac90a8ad74d7061a823949b213f4caa' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_tab_links',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_tab_links',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '0bab992f010c0997e176d645f28e60ef' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_tab_options',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_tab_options',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'c96827172f890f97030187ce605d3553' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_tab_categories',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_tab_categories',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '38ff61442bf5f9371c053bc4431cc47d' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_cart_handler_class',
    ),
    'object' => 
    array (
      'key' => 'ms2_cart_handler_class',
      'value' => 'msCartHandler',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_cart',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '24cc296707421648219b909183827830' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_cart_context',
    ),
    'object' => 
    array (
      'key' => 'ms2_cart_context',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_cart',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'dde879a1245fdf0821fdcf9707c6028b' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_cart_max_count',
    ),
    'object' => 
    array (
      'key' => 'ms2_cart_max_count',
      'value' => '1000',
      'xtype' => 'numberfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_cart',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'c70947f94f5be450bf92245e52206e41' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_cart_product_key_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_cart_product_key_fields',
      'value' => 'id,options',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_cart',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '61b980e1536008b0db9253682c86fed1' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_format_phone',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_format_phone',
      'value' => '/[^-+()0-9]/u',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '02e71929af252735bf371e251e0321bf' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_format_num',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_format_num',
      'value' => '%y%m',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '0269499b68203e69e172b46a65db3752' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_format_num_separator',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_format_num_separator',
      'value' => '/',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '867cf711b3ae366696a1616fd48f261d' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_grid_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_grid_fields',
      'value' => 'id,num,customer,status,cost,weight,delivery,payment,createdon,updatedon,comment',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'ca9eaa6d48c23c000aac8df5d97dbcfb' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_address_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_address_fields',
      'value' => 'receiver,phone,index,country,region,city,metro,street,building,room,comment,entrance,floor,text_address',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '2021-10-13 09:52:27',
    ),
  ),
  'b9d82dff8e44083cbe9e9f783c3ef589' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_product_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_product_fields',
      'value' => 'name,product_article,weight,price,count,cost',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '2020-10-29 16:33:52',
    ),
  ),
  '8a0460b64388a253569cdbee85ea0172' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_product_options',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_product_options',
      'value' => 'size,color',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'e337f17970c5d7d0e3e97101c66e3ab8' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_tv_list',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_tv_list',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'a9395aa68e1f6bca27db28b01d2b65f8' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_handler_class',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_handler_class',
      'value' => 'msOrderHandler',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'e290eb571f8691562473c5e6de781a3c' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_user_groups',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_user_groups',
      'value' => 'Пользователи',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '2021-07-30 15:01:07',
    ),
  ),
  '88addc9ac0ec7ac819a82417fa24db96' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_date_format',
    ),
    'object' => 
    array (
      'key' => 'ms2_date_format',
      'value' => '%d.%m.%y <span class="gray">%H:%M</span>',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '412957dbfbae773697a2248d4c24ef28' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_email_manager',
    ),
    'object' => 
    array (
      'key' => 'ms2_email_manager',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '9e23c7725cbb0ccbd536b83fc3f58e89' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_frontend_css',
    ),
    'object' => 
    array (
      'key' => 'ms2_frontend_css',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '2020-10-30 08:51:07',
    ),
  ),
  '1ed9e46cd6bf05990ba9fa8e3a3caaeb' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_frontend_message_css',
    ),
    'object' => 
    array (
      'key' => 'ms2_frontend_message_css',
      'value' => '[[+cssUrl]]web/lib/jquery.jgrowl.min.css',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'f1a7f9c08fd5dfb4e032e71cd1c1498f' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_frontend_js',
    ),
    'object' => 
    array (
      'key' => 'ms2_frontend_js',
      'value' => '/artmebius/js/shop/minishop.js',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '2020-10-30 08:57:49',
    ),
  ),
  '92b9369f073dfa1110de7b8e7f35503a' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_frontend_message_js',
    ),
    'object' => 
    array (
      'key' => 'ms2_frontend_message_js',
      'value' => '[[+jsUrl]]web/lib/jquery.jgrowl.min.js',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '9f87fbcc00e7c5037927f776a6dad846' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_frontend_message_js_settings',
    ),
    'object' => 
    array (
      'key' => 'ms2_frontend_message_js_settings',
      'value' => '[[+jsUrl]]web/message_settings.js',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'c519433397c85f9c9006ed17bdb2814c' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_register_frontend',
    ),
    'object' => 
    array (
      'key' => 'ms2_register_frontend',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '62bfb47c56c6076875e8709d6f677a56' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_toggle_js_type',
    ),
    'object' => 
    array (
      'key' => 'ms2_toggle_js_type',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '32002e14fb96e07446019782995c2d83' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_vanila_js',
    ),
    'object' => 
    array (
      'key' => 'ms2_vanila_js',
      'value' => '[[+jsUrl]]web/vanilajs/default.js',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'b6a27a282acfd1988a358cc3c87dcbb8' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_frontend_notify_js_settings',
    ),
    'object' => 
    array (
      'key' => 'ms2_frontend_notify_js_settings',
      'value' => '[[+jsUrl]]web/vanilajs/message_settings.json',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '19a5b230f36fa40788c7bc0008ef70fd' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_cart_js_class_path',
    ),
    'object' => 
    array (
      'key' => 'ms2_cart_js_class_path',
      'value' => '[[+jsUrl]]web/vanilajs/modules/mscart.class.js',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'acb83ff81c91b33618d6382805207de3' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_cart_js_class_name',
    ),
    'object' => 
    array (
      'key' => 'ms2_cart_js_class_name',
      'value' => 'MsCart',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'a068ee5a2e9b0453b8fa9d6336123a9a' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_js_class_path',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_js_class_path',
      'value' => '[[+jsUrl]]web/vanilajs/modules/msorder.class.js',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '56dcd5d3660aeb7d96a3d7876e312a20' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_js_class_name',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_js_class_name',
      'value' => 'MsOrder',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'f755dd86e5a69a6b4e4d93b5e590903e' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_notify_js_class_path',
    ),
    'object' => 
    array (
      'key' => 'ms2_notify_js_class_path',
      'value' => '[[+jsUrl]]web/vanilajs/modules/msizitoast.class.js',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '76b93db7b8d9f6f9574f988abb222c8b' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_notify_js_class_name',
    ),
    'object' => 
    array (
      'key' => 'ms2_notify_js_class_name',
      'value' => 'MsIziToast',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'de226c6209602e39a7f218aa941929fc' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_status_draft',
    ),
    'object' => 
    array (
      'key' => 'ms2_status_draft',
      'value' => '999',
      'xtype' => 'numberfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_statuses',
      'editedon' => '2023-10-10 09:39:41',
    ),
  ),
  '3af32a4f0c387d478bd581f7b892632f' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_status_new',
    ),
    'object' => 
    array (
      'key' => 'ms2_status_new',
      'value' => '1',
      'xtype' => 'numberfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_statuses',
      'editedon' => '2023-10-10 09:39:41',
    ),
  ),
  'aaf260daa627f4785b08015f658783f4' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_status_paid',
    ),
    'object' => 
    array (
      'key' => 'ms2_status_paid',
      'value' => '2',
      'xtype' => 'numberfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_statuses',
      'editedon' => '2023-10-10 09:39:41',
    ),
  ),
  'f0ea7849207cf076458f8109faea2c1b' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_status_canceled',
    ),
    'object' => 
    array (
      'key' => 'ms2_status_canceled',
      'value' => '0',
      'xtype' => 'numberfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_statuses',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '1410d7a38515e7982a5d8cb7c57d9c2f' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_status_for_stat',
    ),
    'object' => 
    array (
      'key' => 'ms2_status_for_stat',
      'value' => '2,3',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_statuses',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  'c7741891f5af357ef0ed0125c381ef02' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_utility_import_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_utility_import_fields',
      'value' => 'pagetitle,parent,price,article',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_import',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '10e235ac88d3edd73a5d32bd8ee4b930' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_utility_import_fields_delimiter',
    ),
    'object' => 
    array (
      'key' => 'ms2_utility_import_fields_delimiter',
      'value' => ';',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_import',
      'editedon' => '0000-00-00 00:00:00',
    ),
  ),
  '16045c6617e14e4d9fc9304c14344c71' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeAddToCart',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeAddToCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '4f4dae01b78a0b9a2abcdb08b4d0c484' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnAddToCart',
    ),
    'object' => 
    array (
      'name' => 'msOnAddToCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'b2f4a5aba5a59152f61251e4ec3e6e74' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeChangeInCart',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeChangeInCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '04d63319aac69b264be808b19cd5e3b3' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnChangeInCart',
    ),
    'object' => 
    array (
      'name' => 'msOnChangeInCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '7a16085111880c40db43f1f0754856da' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeRemoveFromCart',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeRemoveFromCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'd8ad151467242c1f26103af400fbdf82' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnRemoveFromCart',
    ),
    'object' => 
    array (
      'name' => 'msOnRemoveFromCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '7d25c219b791e1656c0189ad3fb9f0c5' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeEmptyCart',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeEmptyCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'daa35915d2adedfe2e9d33bbb0885de9' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnEmptyCart',
    ),
    'object' => 
    array (
      'name' => 'msOnEmptyCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '9a78a9ff76f492058cc661b958d5c270' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetStatusCart',
    ),
    'object' => 
    array (
      'name' => 'msOnGetStatusCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'ea16fe8e2964541028806b555cd77f6b' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeAddToOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeAddToOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'f9a3feade2074273d9a7dec9de21c83f' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnAddToOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnAddToOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'd2f5dd97ba79022073d814e740138485' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeValidateOrderValue',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeValidateOrderValue',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '80a3b31cccb23156aec01f0fe2f0330e' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnValidateOrderValue',
    ),
    'object' => 
    array (
      'name' => 'msOnValidateOrderValue',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '7f43724970083f3054332919aa5613ee' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeRemoveFromOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeRemoveFromOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'f7cfd7392aec7f818ad5c807a1e33f14' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnRemoveFromOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnRemoveFromOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '41c37042ec3b97a2524a481a791d7ffd' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeEmptyOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeEmptyOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '0ecc4ddbade7543d5cc8de34786ee4a8' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnEmptyOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnEmptyOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '3685d4159d657958e335b39b86d0953a' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeGetOrderCost',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeGetOrderCost',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '58ea239044edc1fe4ef5a087053cda38' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetOrderCost',
    ),
    'object' => 
    array (
      'name' => 'msOnGetOrderCost',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '783de1fe8be59958b1d5f852c5331ebc' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnSubmitOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnSubmitOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '18894263c03ab1d3280f082a643a7dd1' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeChangeOrderStatus',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeChangeOrderStatus',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'dae05de4486ba1b0707f6c5528d749b6' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnChangeOrderStatus',
    ),
    'object' => 
    array (
      'name' => 'msOnChangeOrderStatus',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '409e0b1fe4bc1e2474eefefd5dd5272b' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeGetOrderCustomer',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeGetOrderCustomer',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '76f0e8620f8bd683a17a0a1e9cc74b4a' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetOrderCustomer',
    ),
    'object' => 
    array (
      'name' => 'msOnGetOrderCustomer',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '4a93c5b349149b086d0455a5daa6a0b6' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeCreateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeCreateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'b9cab061a112d6cba858fef86731723f' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeMgrCreateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeMgrCreateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '73c30a36369be0b61ba0bef645080c01' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnCreateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnCreateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '55bd7d032eb10a3c6317b4e3abb36a39' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnMgrCreateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnMgrCreateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'f9723cc725f18432813b5f9592d800f5' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeUpdateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeUpdateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'f35c6d6cbd3381a7b8f93222b52e1e3f' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnUpdateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnUpdateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'd79de9f23b5e05fd8dca572858bccf09' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeSaveOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeSaveOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '36946f71e9d40beef1559a535bad6cec' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnSaveOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnSaveOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '8437f8b4b771316a99471898c34a7e0a' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeRemoveOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeRemoveOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'bdc4bdb927916c4c33616bbbf5cd3c41' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnRemoveOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnRemoveOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '7a97b2c7da7c8488f288b24b6263f594' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeCreateOrderProduct',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeCreateOrderProduct',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '9318fa116c5f2b310ac52676011640e8' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnCreateOrderProduct',
    ),
    'object' => 
    array (
      'name' => 'msOnCreateOrderProduct',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'e33c53f77b5c93cbb8b1bc9a9f782933' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeUpdateOrderProduct',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeUpdateOrderProduct',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '0435ceb53a394c2e2ee5771a43c832e5' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnUpdateOrderProduct',
    ),
    'object' => 
    array (
      'name' => 'msOnUpdateOrderProduct',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '31db091695d66ef95b20e0d697d3fa6b' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeRemoveOrderProduct',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeRemoveOrderProduct',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '0ae6d53dd0803d113774fe917cf73598' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnRemoveOrderProduct',
    ),
    'object' => 
    array (
      'name' => 'msOnRemoveOrderProduct',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'b5b0bf0df80e2d9798a9874176c2fc3a' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetProductPrice',
    ),
    'object' => 
    array (
      'name' => 'msOnGetProductPrice',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '1fcb7da15774501bd546883381eca3ba' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetProductWeight',
    ),
    'object' => 
    array (
      'name' => 'msOnGetProductWeight',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '909d48b6e094b9e316ea12479aaf65b6' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetProductFields',
    ),
    'object' => 
    array (
      'name' => 'msOnGetProductFields',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '76efb25d9ae8b406538d28cf2d610663' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnManagerCustomCssJs',
    ),
    'object' => 
    array (
      'name' => 'msOnManagerCustomCssJs',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '0ccb3891a38b034e8fefe7fbc1e433a2' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeVendorCreate',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeVendorCreate',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '63aca8c5a7df3172e26fc13c51de9f12' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnAfterVendorCreate',
    ),
    'object' => 
    array (
      'name' => 'msOnAfterVendorCreate',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '79a9f48283c1ae223a34a29ffed3b4dc' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeVendorUpdate',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeVendorUpdate',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '3456c6e31516fdd5235557fe0ba2f33c' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnAfterVendorUpdate',
    ),
    'object' => 
    array (
      'name' => 'msOnAfterVendorUpdate',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '61be8865e6859094ce03c62ed19d22fd' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeVendorDelete',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeVendorDelete',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '87552143bd281e6d72860f8c26c93e7b' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnAfterVendorDelete',
    ),
    'object' => 
    array (
      'name' => 'msOnAfterVendorDelete',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'bf01ad9d2b0edf41f7e4d94dd90c3e81' => 
  array (
    'criteria' => 
    array (
      'name' => 'miniShopManagerPolicy',
    ),
    'object' => 
    array (
      'id' => 17,
      'name' => 'miniShopManagerPolicy',
      'description' => 'A policy for create and update miniShop categories and products.',
      'parent' => 0,
      'template' => 10,
      'class' => '',
      'data' => '{"mscategory_save":true,"msproduct_save":true,"msproduct_publish":true,"msproduct_delete":true,"msorder_save":true,"msorder_view":true,"msorder_list":true,"msorder_remove":true,"mssetting_save":true,"mssetting_view":true,"mssetting_list":true,"msproductfile_save":true,"msproductfile_generate":true,"msproductfile_list":true}',
      'lexicon' => 'minishop2:permissions',
    ),
  ),
  'ff894ab86b37a0488a34cd7222bfb30d' => 
  array (
    'criteria' => 
    array (
      'name' => 'miniShopManagerPolicyTemplate',
    ),
    'object' => 
    array (
      'id' => 10,
      'template_group' => 1,
      'name' => 'miniShopManagerPolicyTemplate',
      'description' => 'A policy for miniShop2 managers.',
      'lexicon' => 'minishop2:permissions',
    ),
  ),
  '429facec10ef006025ecf86e9389f012' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'mscategory_save',
    ),
    'object' => 
    array (
      'id' => 244,
      'template' => 10,
      'name' => 'mscategory_save',
      'description' => 'mscategory_save',
      'value' => 1,
    ),
  ),
  '9565fb1a83a999b793992dd4e4a79c63' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msproduct_save',
    ),
    'object' => 
    array (
      'id' => 245,
      'template' => 10,
      'name' => 'msproduct_save',
      'description' => 'msproduct_save',
      'value' => 1,
    ),
  ),
  'b36b4aa27eed53c410d88d8c83eb5787' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msproduct_publish',
    ),
    'object' => 
    array (
      'id' => 246,
      'template' => 10,
      'name' => 'msproduct_publish',
      'description' => 'msproduct_publish',
      'value' => 1,
    ),
  ),
  'd03077637a9763d6e78432749029ec6b' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msproduct_delete',
    ),
    'object' => 
    array (
      'id' => 247,
      'template' => 10,
      'name' => 'msproduct_delete',
      'description' => 'msproduct_delete',
      'value' => 1,
    ),
  ),
  '603d6e97f3ae86ab2d50b2f60d32d194' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msorder_save',
    ),
    'object' => 
    array (
      'id' => 248,
      'template' => 10,
      'name' => 'msorder_save',
      'description' => 'msorder_save',
      'value' => 1,
    ),
  ),
  '15bc5e5a71d0c1c2fac01ba1db91bddd' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msorder_view',
    ),
    'object' => 
    array (
      'id' => 249,
      'template' => 10,
      'name' => 'msorder_view',
      'description' => 'msorder_view',
      'value' => 1,
    ),
  ),
  '399c25cbdbfef55763447f54ea7aad42' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msorder_list',
    ),
    'object' => 
    array (
      'id' => 250,
      'template' => 10,
      'name' => 'msorder_list',
      'description' => 'msorder_list',
      'value' => 1,
    ),
  ),
  '4da8ffe6da07e2d70adde422915c809d' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msorder_remove',
    ),
    'object' => 
    array (
      'id' => 257,
      'template' => 10,
      'name' => 'msorder_remove',
      'description' => 'msorder_remove',
      'value' => 1,
    ),
  ),
  '5ea5e6127149014515bacb7ddb26fe6f' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'mssetting_save',
    ),
    'object' => 
    array (
      'id' => 251,
      'template' => 10,
      'name' => 'mssetting_save',
      'description' => 'mssetting_save',
      'value' => 1,
    ),
  ),
  '1312044e2824db28583bb12886616fd8' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'mssetting_view',
    ),
    'object' => 
    array (
      'id' => 252,
      'template' => 10,
      'name' => 'mssetting_view',
      'description' => 'mssetting_view',
      'value' => 1,
    ),
  ),
  'ff4c5530ff7a96c4b7675bf73a6d17b2' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'mssetting_list',
    ),
    'object' => 
    array (
      'id' => 253,
      'template' => 10,
      'name' => 'mssetting_list',
      'description' => 'mssetting_list',
      'value' => 1,
    ),
  ),
  'bf9464b2389a670836e80a5ffa6e79ab' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msproductfile_save',
    ),
    'object' => 
    array (
      'id' => 254,
      'template' => 10,
      'name' => 'msproductfile_save',
      'description' => 'msproductfile_save',
      'value' => 1,
    ),
  ),
  'c3bada91749fc7bd2fccc980cd10d539' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msproductfile_generate',
    ),
    'object' => 
    array (
      'id' => 255,
      'template' => 10,
      'name' => 'msproductfile_generate',
      'description' => 'msproductfile_generate',
      'value' => 1,
    ),
  ),
  '581323a061fab1942cb7f2570e98c9fc' => 
  array (
    'criteria' => 
    array (
      'template' => 10,
      'name' => 'msproductfile_list',
    ),
    'object' => 
    array (
      'id' => 256,
      'template' => 10,
      'name' => 'msproductfile_list',
      'description' => 'msproductfile_list',
      'value' => 1,
    ),
  ),
  '6441876e34a76f30f6ae58000427ba03' => 
  array (
    'criteria' => 
    array (
      'text' => 'minishop2',
    ),
    'object' => 
    array (
      'text' => 'minishop2',
      'parent' => 'components',
      'action' => 'mgr/orders',
      'description' => 'ms2_menu_desc',
      'icon' => '<i class="icon-shopping-cart icon icon-large"></i>',
      'menuindex' => 0,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'minishop2',
    ),
  ),
  '0a06f8ce1caf4113384063b4217dd151' => 
  array (
    'criteria' => 
    array (
      'text' => 'ms2_orders',
    ),
    'object' => 
    array (
      'text' => 'ms2_orders',
      'parent' => 'minishop2',
      'action' => 'mgr/orders',
      'description' => 'ms2_orders_desc',
      'icon' => '',
      'menuindex' => 0,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'minishop2',
    ),
  ),
  '37d71e2f3c84a87ce3f7d9f3b217241c' => 
  array (
    'criteria' => 
    array (
      'text' => 'ms2_settings',
    ),
    'object' => 
    array (
      'text' => 'ms2_settings',
      'parent' => 'minishop2',
      'action' => 'mgr/settings',
      'description' => 'ms2_settings_desc',
      'icon' => '',
      'menuindex' => 1,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'minishop2',
    ),
  ),
  '1db764627ca65a6102669a462810c9ea' => 
  array (
    'criteria' => 
    array (
      'text' => 'ms2_system_settings',
    ),
    'object' => 
    array (
      'text' => 'ms2_system_settings',
      'parent' => 'minishop2',
      'action' => 'system/settings',
      'description' => 'ms2_system_settings_desc',
      'icon' => '',
      'menuindex' => 2,
      'params' => '&ns=minishop2',
      'handler' => '',
      'permissions' => 'settings',
      'namespace' => 'core',
    ),
  ),
  '9eec1ae095e2c023113f42b0f45ec60d' => 
  array (
    'criteria' => 
    array (
      'text' => 'ms2_help',
    ),
    'object' => 
    array (
      'text' => 'ms2_help',
      'parent' => 'minishop2',
      'action' => 'mgr/help',
      'description' => 'ms2_help_desc',
      'icon' => '',
      'menuindex' => 3,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'minishop2',
    ),
  ),
  '3acc3daf6f9951d9e377dda125b429f7' => 
  array (
    'criteria' => 
    array (
      'text' => 'ms2_utilities',
    ),
    'object' => 
    array (
      'text' => 'ms2_utilities',
      'parent' => 'minishop2',
      'action' => 'mgr/utilities',
      'description' => 'ms2_utilities_desc',
      'icon' => '',
      'menuindex' => 4,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'minishop2',
    ),
  ),
  'c1c7c32bde61d7910a392b55ab698ffa' => 
  array (
    'criteria' => 
    array (
      'category' => 'miniShop2',
    ),
    'object' => 
    array (
      'id' => 93,
      'parent' => 0,
      'category' => 'miniShop2',
      'rank' => 0,
    ),
  ),
  'f70210f690b81a7089e9729d910b6743' => 
  array (
    'criteria' => 
    array (
      'name' => 'msProduct.content',
    ),
    'object' => 
    array (
      'id' => 284,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msProduct.content',
      'description' => 'Чанк вывода карточки товара.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<h1 class="text-center text-md-left">[[*pagetitle]]</h1>
<div class="text-center text-md-left mb-2 mb-md-0">
    [[+new:isnot=``:then=`<span class="badge badge-secondary badge-pill col-auto">[[%ms2_frontend_new]]</span>`]]
    [[+popular:isnot=``:then=`<span class="badge badge-secondary badge-pill col-auto">[[%ms2_frontend_popular]]</span>`]]
    [[+favorite:isnot=``:then=`<span class="badge badge-secondary badge-pill col-auto">[[%ms2_frontend_favorite]]</span>`]]
</div>
<div id="msProduct" class="row align-items-center" itemtype="http://schema.org/Product" itemscope>
    <meta itemprop="name" content="[[*pagetitle]]">
    <meta itemprop="description" content="[[*description:default=`[[*pagetitle]]`]]">
    <div class="col-12 col-md-6">
        [[!msGallery]]
    </div>
    <div class="col-12 col-md-6" itemtype="http://schema.org/AggregateOffer" itemprop="offers" itemscope>
        <meta itemprop="category" content="[[#[[*parent]].pagetitle]]">
        <meta itemprop="offerCount" content="1">
        <meta itemprop="price" content="[[+price:replace=` ==`]]">
        <meta itemprop="lowPrice" content="[[+price:replace=` ==`]]">
        <meta itemprop="priceCurrency" content="RUR">

        <form class="form-horizontal ms2_form" method="post">
            <input type="hidden" name="id" value="[[*id]]"/>

            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">[[%ms2_product_article]]:</label>
                <div class="col-6 col-md-9">
                    [[+article:default=`-`]]
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">[[%ms2_product_price]]:</label>
                <div class="col-6 col-md-9">
                    [[+price]] [[%ms2_frontend_currency]]
                    [[+old_price:gt=`0`:then=`
                    <span class="old_price ml-2">[[+old_price]] [[%ms2_frontend_currency]]</span>
                    `:else=``]]
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label" for="product_price">[[%ms2_cart_count]]:</label>
                <div class="col-6 col-md-9">
                    <div class="input-group">
                        <input type="number" name="count" id="product_price" class="form-control col-md-6" value="1"/>
                        <div class="input-group-append">
                            <span class="input-group-text">[[%ms2_frontend_count_unit]]</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">[[%ms2_product_weight]]:</label>
                <div class="col-6 col-md-9">
                    [[+weight]] [[%ms2_frontend_weight_unit]]
                </div>
            </div>

            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">[[%ms2_product_made_in]]:</label>
                <div class="col-6 col-md-9">
                    [[+made_in:default=`-`]]
                </div>
            </div>

            [[msOptions?options=`color,size`]]

            [[msProductOptions]]

            <div class="form-group row align-items-center">
                <div class="col-12 offset-md-3 col-md-9 text-center text-md-left">
                    <button type="submit" class="btn btn-primary" name="ms2_action" value="cart/add">
                        [[%ms2_frontend_add_to_cart]]
                    </button>
                </div>
            </div>
        </form>

    </div>
</div>
<div class="mt-3">
    [[*content]]
</div>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_product_content.tpl',
      'content' => '<h1 class="text-center text-md-left">[[*pagetitle]]</h1>
<div class="text-center text-md-left mb-2 mb-md-0">
    [[+new:isnot=``:then=`<span class="badge badge-secondary badge-pill col-auto">[[%ms2_frontend_new]]</span>`]]
    [[+popular:isnot=``:then=`<span class="badge badge-secondary badge-pill col-auto">[[%ms2_frontend_popular]]</span>`]]
    [[+favorite:isnot=``:then=`<span class="badge badge-secondary badge-pill col-auto">[[%ms2_frontend_favorite]]</span>`]]
</div>
<div id="msProduct" class="row align-items-center" itemtype="http://schema.org/Product" itemscope>
    <meta itemprop="name" content="[[*pagetitle]]">
    <meta itemprop="description" content="[[*description:default=`[[*pagetitle]]`]]">
    <div class="col-12 col-md-6">
        [[!msGallery]]
    </div>
    <div class="col-12 col-md-6" itemtype="http://schema.org/AggregateOffer" itemprop="offers" itemscope>
        <meta itemprop="category" content="[[#[[*parent]].pagetitle]]">
        <meta itemprop="offerCount" content="1">
        <meta itemprop="price" content="[[+price:replace=` ==`]]">
        <meta itemprop="lowPrice" content="[[+price:replace=` ==`]]">
        <meta itemprop="priceCurrency" content="RUR">

        <form class="form-horizontal ms2_form" method="post">
            <input type="hidden" name="id" value="[[*id]]"/>

            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">[[%ms2_product_article]]:</label>
                <div class="col-6 col-md-9">
                    [[+article:default=`-`]]
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">[[%ms2_product_price]]:</label>
                <div class="col-6 col-md-9">
                    [[+price]] [[%ms2_frontend_currency]]
                    [[+old_price:gt=`0`:then=`
                    <span class="old_price ml-2">[[+old_price]] [[%ms2_frontend_currency]]</span>
                    `:else=``]]
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label" for="product_price">[[%ms2_cart_count]]:</label>
                <div class="col-6 col-md-9">
                    <div class="input-group">
                        <input type="number" name="count" id="product_price" class="form-control col-md-6" value="1"/>
                        <div class="input-group-append">
                            <span class="input-group-text">[[%ms2_frontend_count_unit]]</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">[[%ms2_product_weight]]:</label>
                <div class="col-6 col-md-9">
                    [[+weight]] [[%ms2_frontend_weight_unit]]
                </div>
            </div>

            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">[[%ms2_product_made_in]]:</label>
                <div class="col-6 col-md-9">
                    [[+made_in:default=`-`]]
                </div>
            </div>

            [[msOptions?options=`color,size`]]

            [[msProductOptions]]

            <div class="form-group row align-items-center">
                <div class="col-12 offset-md-3 col-md-9 text-center text-md-left">
                    <button type="submit" class="btn btn-primary" name="ms2_action" value="cart/add">
                        [[%ms2_frontend_add_to_cart]]
                    </button>
                </div>
            </div>
        </form>

    </div>
</div>
<div class="mt-3">
    [[*content]]
</div>
',
    ),
  ),
  '48f9c140a17d3744261c22a41fc8cb12' => 
  array (
    'criteria' => 
    array (
      'name' => 'msProduct.content.fenom',
    ),
    'object' => 
    array (
      'id' => 323,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msProduct.content.fenom',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<h1 class="text-center text-md-left">{$_modx->resource.pagetitle}</h1>
<div class="text-center text-md-left mb-2 mb-md-0">
    {if $_modx->resource.new?}
        <span class="badge badge-secondary badge-pill col-auto">{\'ms2_frontend_new\' | lexicon}</span>
    {/if}
    {if $_modx->resource.popular?}
        <span class="badge badge-secondary badge-pill col-auto">{\'ms2_frontend_popular\' | lexicon}</span>
    {/if}
    {if $_modx->resource.favorite?}
        <span class="badge badge-secondary badge-pill col-auto">{\'ms2_frontend_favorite\' | lexicon}</span>
    {/if}
</div>
<div id="msProduct" class="row align-items-center" itemtype="http://schema.org/Product" itemscope>
    <meta itemprop="name" content="{$_modx->resource.pagetitle}">
    <meta itemprop="description" content="{$_modx->resource.description ?: $_modx->resource.pagetitle}">
    <div class="col-12 col-md-6">
        {\'!msGallery\' | snippet : []}
    </div>
    <div class="col-12 col-md-6" itemtype="http://schema.org/AggregateOffer" itemprop="offers" itemscope>
        <meta itemprop="category" content="{$_modx->resource.parent | resource: "pagetitle"}">
        <meta itemprop="offerCount" content="1">
        <meta itemprop="price" content="{$price | replace:" ":""}">
        <meta itemprop="lowPrice" content="{$price | replace:" ":""}">
        <meta itemprop="priceCurrency" content="RUR">

        <form class="form-horizontal ms2_form" method="post">
            <input type="hidden" name="id" value="{$_modx->resource.id}"/>

            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">{\'ms2_product_article\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    {$article ?: \'-\'}
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">{\'ms2_product_price\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    {$price} {\'ms2_frontend_currency\' | lexicon}
                    {if $old_price != 0}
                    <span class="old_price ml-2">{$old_price} {\'ms2_frontend_currency\' | lexicon}</span>
                    {/if}
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label" for="product_price">{\'ms2_cart_count\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    <div class="input-group">
                        <input type="number" name="count" id="product_price" class="form-control col-md-6" value="1"/>
                        <div class="input-group-append">
                            <span class="input-group-text">{\'ms2_frontend_count_unit\' | lexicon}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">{\'ms2_product_weight\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    {$weight} {\'ms2_frontend_weight_unit\' | lexicon}
                </div>
            </div>

            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">{\'ms2_product_made_in\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    {$made_in ?: \'-\'}
                </div>
            </div>

            {\'msOptions\' | snippet : [
                \'options\' => \'color,size\'
            ]}

            {\'msProductOptions\' | snippet : []}

            <div class="form-group row align-items-center">
                <div class="col-12 offset-md-3 col-md-9 text-center text-md-left">
                    <button type="submit" class="btn btn-primary" name="ms2_action" value="cart/add">
                        {\'ms2_frontend_add_to_cart\' | lexicon}
                    </button>
                </div>
            </div>
        </form>

    </div>
</div>
<div class="mt-3">
    {$_modx->resource.content}
</div>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_product_content_fenom.tpl',
      'content' => '<h1 class="text-center text-md-left">{$_modx->resource.pagetitle}</h1>
<div class="text-center text-md-left mb-2 mb-md-0">
    {if $_modx->resource.new?}
        <span class="badge badge-secondary badge-pill col-auto">{\'ms2_frontend_new\' | lexicon}</span>
    {/if}
    {if $_modx->resource.popular?}
        <span class="badge badge-secondary badge-pill col-auto">{\'ms2_frontend_popular\' | lexicon}</span>
    {/if}
    {if $_modx->resource.favorite?}
        <span class="badge badge-secondary badge-pill col-auto">{\'ms2_frontend_favorite\' | lexicon}</span>
    {/if}
</div>
<div id="msProduct" class="row align-items-center" itemtype="http://schema.org/Product" itemscope>
    <meta itemprop="name" content="{$_modx->resource.pagetitle}">
    <meta itemprop="description" content="{$_modx->resource.description ?: $_modx->resource.pagetitle}">
    <div class="col-12 col-md-6">
        {\'!msGallery\' | snippet : []}
    </div>
    <div class="col-12 col-md-6" itemtype="http://schema.org/AggregateOffer" itemprop="offers" itemscope>
        <meta itemprop="category" content="{$_modx->resource.parent | resource: "pagetitle"}">
        <meta itemprop="offerCount" content="1">
        <meta itemprop="price" content="{$price | replace:" ":""}">
        <meta itemprop="lowPrice" content="{$price | replace:" ":""}">
        <meta itemprop="priceCurrency" content="RUR">

        <form class="form-horizontal ms2_form" method="post">
            <input type="hidden" name="id" value="{$_modx->resource.id}"/>

            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">{\'ms2_product_article\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    {$article ?: \'-\'}
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">{\'ms2_product_price\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    {$price} {\'ms2_frontend_currency\' | lexicon}
                    {if $old_price != 0}
                    <span class="old_price ml-2">{$old_price} {\'ms2_frontend_currency\' | lexicon}</span>
                    {/if}
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label" for="product_price">{\'ms2_cart_count\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    <div class="input-group">
                        <input type="number" name="count" id="product_price" class="form-control col-md-6" value="1"/>
                        <div class="input-group-append">
                            <span class="input-group-text">{\'ms2_frontend_count_unit\' | lexicon}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">{\'ms2_product_weight\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    {$weight} {\'ms2_frontend_weight_unit\' | lexicon}
                </div>
            </div>

            <div class="form-group row align-items-center">
                <label class="col-6 col-md-3 text-right text-md-left col-form-label">{\'ms2_product_made_in\' | lexicon}:</label>
                <div class="col-6 col-md-9">
                    {$made_in ?: \'-\'}
                </div>
            </div>

            {\'msOptions\' | snippet : [
                \'options\' => \'color,size\'
            ]}

            {\'msProductOptions\' | snippet : []}

            <div class="form-group row align-items-center">
                <div class="col-12 offset-md-3 col-md-9 text-center text-md-left">
                    <button type="submit" class="btn btn-primary" name="ms2_action" value="cart/add">
                        {\'ms2_frontend_add_to_cart\' | lexicon}
                    </button>
                </div>
            </div>
        </form>

    </div>
</div>
<div class="mt-3">
    {$_modx->resource.content}
</div>
',
    ),
  ),
  'e68a466d212865ffabe2b81f78a4502b' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msProducts.row',
    ),
    'object' => 
    array (
      'id' => 285,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msProducts.row',
      'description' => 'Чанк товара miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<div class="ms2_product mb-5 mb-md-3" itemtype="http://schema.org/Product" itemscope>
    <meta itemprop="description" content="{$description = $description ?: $pagetitle}">
    <meta itemprop="name" content="{$pagetitle}">

    <form method="post" class="ms2_form d-flex flex-column flex-md-row align-items-center no-gutters">
        <input type="hidden" name="id" value="{$id}">
        <input type="hidden" name="count" value="1">
        <input type="hidden" name="options" value="[]">
        <div class="col-md-2 text-center text-md-left">
            <a href="{$id | url}">
                {if $thumb?}
                    <img src="{$thumb}" class="mw-100" alt="{$pagetitle}" title="{$pagetitle}" itemprop="image"/>
                {else}
                    <img src="{\'assets_url\' | option}components/minishop2/img/web/ms2_small.png"
                        srcset="{\'assets_url\' | option}components/minishop2/img/web/ms2_small@2x.png 2x"
                        class="mw-100" alt="{$pagetitle}" title="{$pagetitle}"/>
                {/if}
            </a>
        </div>
        <div class="col-md-10 d-flex flex-column flex-md-row align-items-center no-gutters" itemtype="http://schema.org/AggregateOffer" itemprop="offers" itemscope>
            <meta itemprop="category" content="{$parent | resource: "pagetitle"}">
            <meta itemprop="name" content="{$pagetitle}">
            <meta itemprop="offerCount" content="1">
            <meta itemprop="price" content="{$price | replace:" ":""}">
            <meta itemprop="lowPrice" content="{$price | replace:" ":""}">
            <meta itemprop="priceCurrency" content="RUR">

            <div class="col-12 col-md-8 mt-2 mt-md-0 flex-grow-1">
                <div class="d-flex justify-content-around justify-content-md-start">
                    <a href="{$id | url}" class="font-weight-bold">{$pagetitle}</a>
                    <span class="price ml-md-3">{$price} {\'ms2_frontend_currency\' | lexicon}</span>
                    {if $old_price?}
                        <span class="old_price ml-md-3">{$old_price} {\'ms2_frontend_currency\' | lexicon}</span>
                    {/if}
                </div>
                <div class="flags mt-2 d-flex justify-content-around justify-content-md-start">
                    {if $new?}
                        <span class="badge badge-secondary badge-pill mr-md-1">{\'ms2_frontend_new\' | lexicon}</span>
                    {/if}
                    {if $popular?}
                        <span class="badge badge-secondary badge-pill mr-md-1">{\'ms2_frontend_popular\' | lexicon}</span>
                    {/if}
                    {if $favorite?}
                        <span class="badge badge-secondary badge-pill mr-md-1">{\'ms2_frontend_favorite\' | lexicon}</span>
                    {/if}
                </div>
                {if $introtext}
                    <div class="mt-2 text-center text-md-left">
                        <small>{$introtext | truncate : 200}</small>
                    </div>
                {/if}
            </div>
            <div class="col-12 col-md-4 mt-2 mt-md-0 text-center text-md-right">
                <button class="btn btn-primary" type="submit" name="ms2_action" value="cart/add">
                    {\'ms2_frontend_add_to_cart\' | lexicon}
                </button>
            </div>
        </div>
    </form>
</div>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_products_row.tpl',
      'content' => '<div class="ms2_product mb-5 mb-md-3" itemtype="http://schema.org/Product" itemscope>
    <meta itemprop="description" content="{$description = $description ?: $pagetitle}">
    <meta itemprop="name" content="{$pagetitle}">

    <form method="post" class="ms2_form d-flex flex-column flex-md-row align-items-center no-gutters">
        <input type="hidden" name="id" value="{$id}">
        <input type="hidden" name="count" value="1">
        <input type="hidden" name="options" value="[]">
        <div class="col-md-2 text-center text-md-left">
            <a href="{$id | url}">
                {if $thumb?}
                    <img src="{$thumb}" class="mw-100" alt="{$pagetitle}" title="{$pagetitle}" itemprop="image"/>
                {else}
                    <img src="{\'assets_url\' | option}components/minishop2/img/web/ms2_small.png"
                        srcset="{\'assets_url\' | option}components/minishop2/img/web/ms2_small@2x.png 2x"
                        class="mw-100" alt="{$pagetitle}" title="{$pagetitle}"/>
                {/if}
            </a>
        </div>
        <div class="col-md-10 d-flex flex-column flex-md-row align-items-center no-gutters" itemtype="http://schema.org/AggregateOffer" itemprop="offers" itemscope>
            <meta itemprop="category" content="{$parent | resource: "pagetitle"}">
            <meta itemprop="name" content="{$pagetitle}">
            <meta itemprop="offerCount" content="1">
            <meta itemprop="price" content="{$price | replace:" ":""}">
            <meta itemprop="lowPrice" content="{$price | replace:" ":""}">
            <meta itemprop="priceCurrency" content="RUR">

            <div class="col-12 col-md-8 mt-2 mt-md-0 flex-grow-1">
                <div class="d-flex justify-content-around justify-content-md-start">
                    <a href="{$id | url}" class="font-weight-bold">{$pagetitle}</a>
                    <span class="price ml-md-3">{$price} {\'ms2_frontend_currency\' | lexicon}</span>
                    {if $old_price?}
                        <span class="old_price ml-md-3">{$old_price} {\'ms2_frontend_currency\' | lexicon}</span>
                    {/if}
                </div>
                <div class="flags mt-2 d-flex justify-content-around justify-content-md-start">
                    {if $new?}
                        <span class="badge badge-secondary badge-pill mr-md-1">{\'ms2_frontend_new\' | lexicon}</span>
                    {/if}
                    {if $popular?}
                        <span class="badge badge-secondary badge-pill mr-md-1">{\'ms2_frontend_popular\' | lexicon}</span>
                    {/if}
                    {if $favorite?}
                        <span class="badge badge-secondary badge-pill mr-md-1">{\'ms2_frontend_favorite\' | lexicon}</span>
                    {/if}
                </div>
                {if $introtext}
                    <div class="mt-2 text-center text-md-left">
                        <small>{$introtext | truncate : 200}</small>
                    </div>
                {/if}
            </div>
            <div class="col-12 col-md-4 mt-2 mt-md-0 text-center text-md-right">
                <button class="btn btn-primary" type="submit" name="ms2_action" value="cart/add">
                    {\'ms2_frontend_add_to_cart\' | lexicon}
                </button>
            </div>
        </div>
    </form>
</div>
',
    ),
  ),
  'a61fd816bc2b85da89863fe9f496dee7' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msCart',
    ),
    'object' => 
    array (
      'id' => 286,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msCart',
      'description' => 'Чанк вывода корзины miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<div id="msCart">
    {if $products | length == 0}
        <div class="alert alert-warning">
            {\'ms2_cart_is_empty\' | lexicon}
        </div>
    {else}
        <div class="table-responsive">
            <table class="table table-striped">
                <tr class="ms-header">
                    <th class="ms-title">{\'ms2_cart_title\' | lexicon}</th>
                    <th class="ms-count">{\'ms2_cart_count\' | lexicon}</th>
                    <th class="ms-weight">{\'ms2_cart_weight\' | lexicon}</th>
                    <th class="ms-price">{\'ms2_cart_price\' | lexicon}</th>
                    <th class="ms-cost">{\'ms2_cart_cost\' | lexicon}</th>
                    <th class="ms-remove"></th>
                </tr>

                {foreach $products as $product}
                    {var $image}
                        {if $product.thumb?}
                            <img src="{$product.thumb}" alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                        {else}
                            <img src="{\'assets_url\' | option}components/minishop2/img/web/ms2_small.png"
                                srcset="{\'assets_url\' | option}components/minishop2/img/web/ms2_small@2x.png 2x"
                                alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                        {/if}
                    {/var}
                    <tr id="{$product.key}">
                        <td class="ms-title">
                            <div class="d-flex">
                                <div class="ms-image mw-100 pr-3">
                                    {if $product.id?}
                                        <a href="{$product.id | url}">{$image}</a>
                                    {else}
                                        {$image}
                                    {/if}
                                </div>
                                <div class="title">
                                    {if $product.id?}
                                        <a href="{$product.id | url}">{$product.pagetitle}</a>
                                    {else}
                                        {$product.name}
                                    {/if}
                                    {if $product.options?}
                                        <div class="small">
                                            {$product.options | join : \'; \'}
                                        </div>
                                    {/if}
                                </div>
                            </div>
                        </td>
                        <td class="ms-count">
                            <form method="post" class="ms2_form">
                                <input type="hidden" name="key" value="{$product.key}"/>
                                <div class="form-group">
                                    <div class="input-group input-group-sm">
                                        <input type="number" name="count" value="{$product.count}" class="form-control"/>
                                        <div class="input-group-append">
                                            <span class="input-group-text">{\'ms2_frontend_count_unit\' | lexicon}</span>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm" type="submit" name="ms2_action" value="cart/change">&#8635;</button>
                                </div>
                            </form>
                        </td>
                        <td class="ms-weight">
                            <span class="text-nowrap">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}</span>
                        </td>
                        <td class="ms-price">
                            <span class="mr-2 text-nowrap">{$product.price} {\'ms2_frontend_currency\' | lexicon}</span>
                            {if $product.old_price?}
                                <span class="old_price text-nowrap">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}</span>
                            {/if}
                        </td>
                        <td class="ms-cost">
                            <span class="mr-2 text-nowrap"><span class="ms2_cost">{$product.cost}</span> {\'ms2_frontend_currency\' | lexicon}</span>
                        </td>
                        <td class="ms-remove">
                            <form method="post" class="ms2_form text-md-right">
                                <input type="hidden" name="key" value="{$product.key}">
                                <button class="btn btn-sm btn-danger" type="submit" name="ms2_action" value="cart/remove">&times;</button>
                            </form>
                        </td>
                    </tr>
                {/foreach}

                <tr class="ms-footer">
                    <th class="total">{\'ms2_cart_total\' | lexicon}:</th>
                    <th class="total_count">
                        <span class="ms2_total_count">{$total.count}</span>
                        {\'ms2_frontend_count_unit\' | lexicon}
                    </th>
                    <th class="total_weight text-nowrap" colspan="2">
                        <span class="ms2_total_weight">{$total.weight}</span>
                        {\'ms2_frontend_weight_unit\' | lexicon}
                    </th>
                    <th class="total_cost text-nowrap" colspan="2">
                        <span class="ms2_total_cost">{$total.cost}</span>
                        {\'ms2_frontend_currency\' | lexicon}
                    </th>
                </tr>
            </table>
        </div>

        <form method="post" class="ms2_form">
            <button type="submit" name="ms2_action" value="cart/clean" class="btn btn-danger">
                {\'ms2_cart_clean\' | lexicon}
            </button>
        </form>
    {/if}
</div>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_cart.tpl',
      'content' => '<div id="msCart">
    {if $products | length == 0}
        <div class="alert alert-warning">
            {\'ms2_cart_is_empty\' | lexicon}
        </div>
    {else}
        <div class="table-responsive">
            <table class="table table-striped">
                <tr class="ms-header">
                    <th class="ms-title">{\'ms2_cart_title\' | lexicon}</th>
                    <th class="ms-count">{\'ms2_cart_count\' | lexicon}</th>
                    <th class="ms-weight">{\'ms2_cart_weight\' | lexicon}</th>
                    <th class="ms-price">{\'ms2_cart_price\' | lexicon}</th>
                    <th class="ms-cost">{\'ms2_cart_cost\' | lexicon}</th>
                    <th class="ms-remove"></th>
                </tr>

                {foreach $products as $product}
                    {var $image}
                        {if $product.thumb?}
                            <img src="{$product.thumb}" alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                        {else}
                            <img src="{\'assets_url\' | option}components/minishop2/img/web/ms2_small.png"
                                srcset="{\'assets_url\' | option}components/minishop2/img/web/ms2_small@2x.png 2x"
                                alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                        {/if}
                    {/var}
                    <tr id="{$product.key}">
                        <td class="ms-title">
                            <div class="d-flex">
                                <div class="ms-image mw-100 pr-3">
                                    {if $product.id?}
                                        <a href="{$product.id | url}">{$image}</a>
                                    {else}
                                        {$image}
                                    {/if}
                                </div>
                                <div class="title">
                                    {if $product.id?}
                                        <a href="{$product.id | url}">{$product.pagetitle}</a>
                                    {else}
                                        {$product.name}
                                    {/if}
                                    {if $product.options?}
                                        <div class="small">
                                            {$product.options | join : \'; \'}
                                        </div>
                                    {/if}
                                </div>
                            </div>
                        </td>
                        <td class="ms-count">
                            <form method="post" class="ms2_form">
                                <input type="hidden" name="key" value="{$product.key}"/>
                                <div class="form-group">
                                    <div class="input-group input-group-sm">
                                        <input type="number" name="count" value="{$product.count}" class="form-control"/>
                                        <div class="input-group-append">
                                            <span class="input-group-text">{\'ms2_frontend_count_unit\' | lexicon}</span>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm" type="submit" name="ms2_action" value="cart/change">&#8635;</button>
                                </div>
                            </form>
                        </td>
                        <td class="ms-weight">
                            <span class="text-nowrap">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}</span>
                        </td>
                        <td class="ms-price">
                            <span class="mr-2 text-nowrap">{$product.price} {\'ms2_frontend_currency\' | lexicon}</span>
                            {if $product.old_price?}
                                <span class="old_price text-nowrap">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}</span>
                            {/if}
                        </td>
                        <td class="ms-cost">
                            <span class="mr-2 text-nowrap"><span class="ms2_cost">{$product.cost}</span> {\'ms2_frontend_currency\' | lexicon}</span>
                        </td>
                        <td class="ms-remove">
                            <form method="post" class="ms2_form text-md-right">
                                <input type="hidden" name="key" value="{$product.key}">
                                <button class="btn btn-sm btn-danger" type="submit" name="ms2_action" value="cart/remove">&times;</button>
                            </form>
                        </td>
                    </tr>
                {/foreach}

                <tr class="ms-footer">
                    <th class="total">{\'ms2_cart_total\' | lexicon}:</th>
                    <th class="total_count">
                        <span class="ms2_total_count">{$total.count}</span>
                        {\'ms2_frontend_count_unit\' | lexicon}
                    </th>
                    <th class="total_weight text-nowrap" colspan="2">
                        <span class="ms2_total_weight">{$total.weight}</span>
                        {\'ms2_frontend_weight_unit\' | lexicon}
                    </th>
                    <th class="total_cost text-nowrap" colspan="2">
                        <span class="ms2_total_cost">{$total.cost}</span>
                        {\'ms2_frontend_currency\' | lexicon}
                    </th>
                </tr>
            </table>
        </div>

        <form method="post" class="ms2_form">
            <button type="submit" name="ms2_action" value="cart/clean" class="btn btn-danger">
                {\'ms2_cart_clean\' | lexicon}
            </button>
        </form>
    {/if}
</div>
',
    ),
  ),
  '106407055ba5f083df62f9e8ff00a4ae' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msCartNew',
    ),
    'object' => 
    array (
      'id' => 384,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msCartNew',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<div id="msCart">
    {if $products | length == 0}
        <div class="alert alert-warning">
            {\'ms2_cart_is_empty\' | lexicon}
        </div>
    {else}
        <div class="table-responsive">
            <table class="table table-striped">
                <tr class="ms-header">
                    <th class="ms-title">{\'ms2_cart_title\' | lexicon}</th>
                    <th class="ms-count">{\'ms2_cart_count\' | lexicon}</th>
                    <th class="ms-weight">{\'ms2_cart_weight\' | lexicon}</th>
                    <th class="ms-price">{\'ms2_cart_price\' | lexicon}</th>
                    <th class="ms-cost">{\'ms2_cart_cost\' | lexicon}</th>
                    <th class="ms-remove"></th>
                </tr>

                {foreach $products as $product}
                    {var $image}
                    {if $product.thumb?}
                        <img src="{$product.thumb}" alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                    {else}
                        <img src="{\'assets_url\' | option}components/minishop2/img/web/ms2_small.png"
                             srcset="{\'assets_url\' | option}components/minishop2/img/web/ms2_small@2x.png 2x"
                             alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                    {/if}
                    {/var}
                    <tr id="{$product.key}">
                        <td class="ms-title">
                            <div class="d-flex">
                                <div class="ms-image mw-100 pr-3">
                                    {if $product.id?}
                                        <a href="{$product.id | url}">{$image}</a>
                                    {else}
                                        {$image}
                                    {/if}
                                </div>
                                <div class="title">
                                    {if $product.id?}
                                        <a href="{$product.id | url}">{$product.pagetitle}</a>
                                    {else}
                                        {$product.name}
                                    {/if}
                                    {if $product.options?}
                                        <div class="small">
                                            {$product.options | join : \'; \'}
                                        </div>
                                    {/if}
                                </div>
                            </div>
                        </td>
                        <td class="ms-count">
                            <form method="post" class="ms2_form">
                                <input type="hidden" name="key" value="{$product.key}"/>
                                <button type="submit" class="ms-hidden" name="ms2_action" value="cart/change"/>
                                </button>
                                <div class="ms-input-number-wrap">
                                    <button class="ms-input-number-btn ms-input-number-minus btn btn-sm btn-secondary" type="button">&#8722;</button>
                                    <input class="ms-input-number-emulator" value="{$product.count}" name="count" type="text">
                                    <button class="ms-input-number-btn ms-input-number-plus btn btn-sm btn-secondary" type="button">&#43;</button>
                                </div>
                            </form>
                        </td>
                        <td class="ms-weight">
                            <span class="text-nowrap">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}</span>
                        </td>
                        <td class="ms-price">
                            <span class="mr-2 text-nowrap">{$product.price} {\'ms2_frontend_currency\' | lexicon}</span>
                            {if $product.old_price?}
                                <span class="old_price text-nowrap">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}</span>
                            {/if}
                        </td>
                        <td class="ms-cost">
                            <span class="mr-2 text-nowrap"><span class="ms2_cost">{$product.cost}</span> {\'ms2_frontend_currency\' | lexicon}</span>
                        </td>
                        <td class="ms-remove">
                            <form method="post" class="ms2_form text-md-right">
                                <input type="hidden" name="key" value="{$product.key}">
                                <button class="btn btn-sm btn-danger" type="submit" name="ms2_action" value="cart/remove">&times;</button>
                            </form>
                        </td>
                    </tr>
                {/foreach}

                <tr class="ms-footer">
                    <th class="total">{\'ms2_cart_total\' | lexicon}:</th>
                    <th class="total_count">
                        <span class="ms2_total_count">{$total.count}</span>
                        {\'ms2_frontend_count_unit\' | lexicon}
                    </th>
                    <th class="total_weight text-nowrap" colspan="2">
                        <span class="ms2_total_weight">{$total.weight}</span>
                        {\'ms2_frontend_weight_unit\' | lexicon}
                    </th>
                    <th class="total_cost text-nowrap" colspan="2">
                        <span class="ms2_total_cost">{$total.cost}</span>
                        {\'ms2_frontend_currency\' | lexicon}
                    </th>
                </tr>
            </table>
        </div>
        <form method="post" class="ms2_form">
            <button type="submit" name="ms2_action" value="cart/clean" class="btn btn-danger">
                {\'ms2_cart_clean\' | lexicon}
            </button>
        </form>
    {/if}
</div>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_cart_new.tpl',
      'content' => '<div id="msCart">
    {if $products | length == 0}
        <div class="alert alert-warning">
            {\'ms2_cart_is_empty\' | lexicon}
        </div>
    {else}
        <div class="table-responsive">
            <table class="table table-striped">
                <tr class="ms-header">
                    <th class="ms-title">{\'ms2_cart_title\' | lexicon}</th>
                    <th class="ms-count">{\'ms2_cart_count\' | lexicon}</th>
                    <th class="ms-weight">{\'ms2_cart_weight\' | lexicon}</th>
                    <th class="ms-price">{\'ms2_cart_price\' | lexicon}</th>
                    <th class="ms-cost">{\'ms2_cart_cost\' | lexicon}</th>
                    <th class="ms-remove"></th>
                </tr>

                {foreach $products as $product}
                    {var $image}
                    {if $product.thumb?}
                        <img src="{$product.thumb}" alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                    {else}
                        <img src="{\'assets_url\' | option}components/minishop2/img/web/ms2_small.png"
                             srcset="{\'assets_url\' | option}components/minishop2/img/web/ms2_small@2x.png 2x"
                             alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                    {/if}
                    {/var}
                    <tr id="{$product.key}">
                        <td class="ms-title">
                            <div class="d-flex">
                                <div class="ms-image mw-100 pr-3">
                                    {if $product.id?}
                                        <a href="{$product.id | url}">{$image}</a>
                                    {else}
                                        {$image}
                                    {/if}
                                </div>
                                <div class="title">
                                    {if $product.id?}
                                        <a href="{$product.id | url}">{$product.pagetitle}</a>
                                    {else}
                                        {$product.name}
                                    {/if}
                                    {if $product.options?}
                                        <div class="small">
                                            {$product.options | join : \'; \'}
                                        </div>
                                    {/if}
                                </div>
                            </div>
                        </td>
                        <td class="ms-count">
                            <form method="post" class="ms2_form">
                                <input type="hidden" name="key" value="{$product.key}"/>
                                <button type="submit" class="ms-hidden" name="ms2_action" value="cart/change"/>
                                </button>
                                <div class="ms-input-number-wrap">
                                    <button class="ms-input-number-btn ms-input-number-minus btn btn-sm btn-secondary" type="button">&#8722;</button>
                                    <input class="ms-input-number-emulator" value="{$product.count}" name="count" type="text">
                                    <button class="ms-input-number-btn ms-input-number-plus btn btn-sm btn-secondary" type="button">&#43;</button>
                                </div>
                            </form>
                        </td>
                        <td class="ms-weight">
                            <span class="text-nowrap">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}</span>
                        </td>
                        <td class="ms-price">
                            <span class="mr-2 text-nowrap">{$product.price} {\'ms2_frontend_currency\' | lexicon}</span>
                            {if $product.old_price?}
                                <span class="old_price text-nowrap">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}</span>
                            {/if}
                        </td>
                        <td class="ms-cost">
                            <span class="mr-2 text-nowrap"><span class="ms2_cost">{$product.cost}</span> {\'ms2_frontend_currency\' | lexicon}</span>
                        </td>
                        <td class="ms-remove">
                            <form method="post" class="ms2_form text-md-right">
                                <input type="hidden" name="key" value="{$product.key}">
                                <button class="btn btn-sm btn-danger" type="submit" name="ms2_action" value="cart/remove">&times;</button>
                            </form>
                        </td>
                    </tr>
                {/foreach}

                <tr class="ms-footer">
                    <th class="total">{\'ms2_cart_total\' | lexicon}:</th>
                    <th class="total_count">
                        <span class="ms2_total_count">{$total.count}</span>
                        {\'ms2_frontend_count_unit\' | lexicon}
                    </th>
                    <th class="total_weight text-nowrap" colspan="2">
                        <span class="ms2_total_weight">{$total.weight}</span>
                        {\'ms2_frontend_weight_unit\' | lexicon}
                    </th>
                    <th class="total_cost text-nowrap" colspan="2">
                        <span class="ms2_total_cost">{$total.cost}</span>
                        {\'ms2_frontend_currency\' | lexicon}
                    </th>
                </tr>
            </table>
        </div>
        <form method="post" class="ms2_form">
            <button type="submit" name="ms2_action" value="cart/clean" class="btn btn-danger">
                {\'ms2_cart_clean\' | lexicon}
            </button>
        </form>
    {/if}
</div>
',
    ),
  ),
  'd9fab6bfe8ca4032d0744241eb17e819' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msMiniCart',
    ),
    'object' => 
    array (
      'id' => 287,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msMiniCart',
      'description' => 'Чанк вывода мини корзины miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<div class="msMiniCart{$total_count > 0 ? \' full\' : \'\'}">
    <div class="empty">
        <h5>{\'ms2_minicart\' | lexicon}</h5>
        {\'ms2_minicart_is_empty\' | lexicon}
    </div>
    <div class="not_empty">
        <h5>{\'ms2_minicart\' | lexicon}</h5>
        {\'ms2_minicart_goods\' | lexicon} <strong class="ms2_total_count">{$total_count}</strong> {\'ms2_frontend_count_unit\' | lexicon},
        {\'ms2_minicart_cost\' | lexicon} <strong class="ms2_total_cost">{$total_cost}</strong> {\'ms2_frontend_currency\' | lexicon}
    </div>
</div>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_minicart.tpl',
      'content' => '<div class="msMiniCart{$total_count > 0 ? \' full\' : \'\'}">
    <div class="empty">
        <h5>{\'ms2_minicart\' | lexicon}</h5>
        {\'ms2_minicart_is_empty\' | lexicon}
    </div>
    <div class="not_empty">
        <h5>{\'ms2_minicart\' | lexicon}</h5>
        {\'ms2_minicart_goods\' | lexicon} <strong class="ms2_total_count">{$total_count}</strong> {\'ms2_frontend_count_unit\' | lexicon},
        {\'ms2_minicart_cost\' | lexicon} <strong class="ms2_total_cost">{$total_cost}</strong> {\'ms2_frontend_currency\' | lexicon}
    </div>
</div>
',
    ),
  ),
  '31dd6877e9ebeeb12cda77c186348135' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msOrder',
    ),
    'object' => 
    array (
      'id' => 288,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msOrder',
      'description' => 'Чанк вывода формы оформления заказа miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<form class="ms2_form" id="msOrder" method="post">
    <div class="row">
        <div class="col-12 col-md-6">
            <h4>{\'ms2_frontend_credentials\' | lexicon}:</h4>
            {foreach [\'email\',\'receiver\',\'phone\'] as $field}
                <div class="form-group row input-parent">
                    <label class="col-md-4 col-form-label" for="{$field}">
                        {(\'ms2_frontend_\' ~ $field) | lexicon} <span class="required-star">*</span>
                    </label>
                    <div class="col-md-8">
                        <input type="text" id="{$field}" placeholder="{(\'ms2_frontend_\' ~ $field) | lexicon}"
                            name="{$field}" value="{$form[$field]}"
                            class="form-control{($field in list $errors) ? \' error\' : \'\'}">
                    </div>
                </div>
            {/foreach}

            <div class="form-group row input-parent">
                <label class="col-md-4 col-form-label" for="comment">
                    {\'ms2_frontend_comment\' | lexicon} <span class="required-star">*</span>
                </label>
                <div class="col-md-8">
                    <textarea name="comment" id="comment" placeholder="{\'ms2_frontend_comment\' | lexicon}"
                        class="form-control{(\'comment\' in list $errors) ? \' error\' : \'\'}">{$form.comment}</textarea>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6" id="payments">
            <h4>{\'ms2_frontend_payments\' | lexicon}:</h4>
            <div class="form-group row">
                <div class="col-12">
                    {foreach $payments as $payment index=$index}
                        {var $checked = !($order.payment in keys $payments) && $index == 0 || $payment.id == $order.payment}
                        <div class="checkbox">
                            <label class="col-form-label payment input-parent">
                                <input type="radio" name="payment" value="{$payment.id}" id="payment_{$payment.id}"{$checked ? \'checked\' : \'\'}>
                                {if $payment.logo?}
                                    <img src="{$payment.logo}" alt="{$payment.name}" title="{$payment.name}" class="mw-100"/>
                                {else}
                                    {$payment.name}
                                {/if}
                                {if $payment.description?}
                                    <p class="small">{$payment.description}</p>
                                {/if}
                            </label>
                        </div>
                    {/foreach}
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-md-6" id="deliveries">
            <h4>{\'ms2_frontend_deliveries\' | lexicon}:</h4>
            <div class="form-group row">
                <div class="col-12">
                    {foreach $deliveries as $delivery index=$index}
                        {var $checked = !($order.delivery in keys $deliveries) && $index == 0 || $delivery.id == $order.delivery}
                        <div class="checkbox">
                            <label class="col-form-label delivery input-parent">
                                <input type="radio" name="delivery" value="{$delivery.id}" id="delivery_{$delivery.id}"
                                    data-payments="{$delivery.payments | json_encode}"
                                    {$checked ? \'checked\' : \'\'}>
                                {if $delivery.logo?}
                                    <img src="{$delivery.logo}" alt="{$delivery.name}" title="{$delivery.name}"/>
                                {else}
                                    {$delivery.name}
                                {/if}
                                {if $delivery.description?}
                                    <p class="small">
                                        {$delivery.description}
                                    </p>
                                {/if}
                            </label>
                        </div>
                    {/foreach}
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6">
            <h4>{\'ms2_frontend_address\' | lexicon}:</h4>
            {foreach [\'index\',\'region\',\'city\', \'street\', \'building\', \'entrance\',\'floor\', \'room\'] as $field}
                <div class="form-group row input-parent">
                    <label class="col-md-4 col-form-label" for="{$field}">
                        {(\'ms2_frontend_\' ~ $field) | lexicon} <span class="required-star">*</span>
                    </label>
                    <div class="col-md-8">
                        <input type="text" id="{$field}" placeholder="{(\'ms2_frontend_\' ~ $field) | lexicon}"
                            name="{$field}" value="{$form[$field]}"
                            class="form-control{($field in list $errors) ? \' error\' : \'\'}">
                    </div>
                </div>
            {/foreach}

            <div class="form-group row input-parent">
                <label class="col-md-4 col-form-label" for="text_address">
                    {\'ms2_frontend_text_address\' | lexicon} <span class="required-star">*</span>
                </label>
                <div class="col-md-8">
                    <textarea name="text_address" id="text_address" placeholder="{\'ms2_frontend_text_address\' | lexicon}"
                        class="form-control{(\'text_address\' in list $errors) ? \' error\' : \'\'}">{$form.text_address}</textarea>
                </div>
            </div>

        </div>

    </div>

    <button type="button" name="ms2_action" value="order/clean" class="btn btn-danger ms2_link">
        {\'ms2_frontend_order_cancel\' | lexicon}
    </button>

    <hr class="mt-4 mb-4"/>


    <div class="d-flex flex-column flex-md-row align-items-center justify-content-center justify-content-md-end mb-5">
        <h4 class="mb-md-0">{\'ms2_frontend_order_cost\' | lexicon}:</h4>
        <h3 class="mb-md-0 ml-md-2">
            <span id="ms2_order_cart_cost">{$order.cart_cost ?: 0}</span> {\'ms2_frontend_currency\' | lexicon} +
            <span id="ms2_order_delivery_cost">{$order.delivery_cost ?: 0}</span> {\'ms2_frontend_currency\' | lexicon} =
            <span id="ms2_order_cost">{$order.cost ?: 0}</span> {\'ms2_frontend_currency\' | lexicon}
        </h3>

        <button type="submit" name="ms2_action" value="order/submit" class="btn btn-lg btn-primary ml-md-2 ms2_link">
            {\'ms2_frontend_order_submit\' | lexicon}
        </button>
    </div>
</form>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_order.tpl',
      'content' => '<form class="ms2_form" id="msOrder" method="post">
    <div class="row">
        <div class="col-12 col-md-6">
            <h4>{\'ms2_frontend_credentials\' | lexicon}:</h4>
            {foreach [\'email\',\'receiver\',\'phone\'] as $field}
                <div class="form-group row input-parent">
                    <label class="col-md-4 col-form-label" for="{$field}">
                        {(\'ms2_frontend_\' ~ $field) | lexicon} <span class="required-star">*</span>
                    </label>
                    <div class="col-md-8">
                        <input type="text" id="{$field}" placeholder="{(\'ms2_frontend_\' ~ $field) | lexicon}"
                            name="{$field}" value="{$form[$field]}"
                            class="form-control{($field in list $errors) ? \' error\' : \'\'}">
                    </div>
                </div>
            {/foreach}

            <div class="form-group row input-parent">
                <label class="col-md-4 col-form-label" for="comment">
                    {\'ms2_frontend_comment\' | lexicon} <span class="required-star">*</span>
                </label>
                <div class="col-md-8">
                    <textarea name="comment" id="comment" placeholder="{\'ms2_frontend_comment\' | lexicon}"
                        class="form-control{(\'comment\' in list $errors) ? \' error\' : \'\'}">{$form.comment}</textarea>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6" id="payments">
            <h4>{\'ms2_frontend_payments\' | lexicon}:</h4>
            <div class="form-group row">
                <div class="col-12">
                    {foreach $payments as $payment index=$index}
                        {var $checked = !($order.payment in keys $payments) && $index == 0 || $payment.id == $order.payment}
                        <div class="checkbox">
                            <label class="col-form-label payment input-parent">
                                <input type="radio" name="payment" value="{$payment.id}" id="payment_{$payment.id}"{$checked ? \'checked\' : \'\'}>
                                {if $payment.logo?}
                                    <img src="{$payment.logo}" alt="{$payment.name}" title="{$payment.name}" class="mw-100"/>
                                {else}
                                    {$payment.name}
                                {/if}
                                {if $payment.description?}
                                    <p class="small">{$payment.description}</p>
                                {/if}
                            </label>
                        </div>
                    {/foreach}
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-md-6" id="deliveries">
            <h4>{\'ms2_frontend_deliveries\' | lexicon}:</h4>
            <div class="form-group row">
                <div class="col-12">
                    {foreach $deliveries as $delivery index=$index}
                        {var $checked = !($order.delivery in keys $deliveries) && $index == 0 || $delivery.id == $order.delivery}
                        <div class="checkbox">
                            <label class="col-form-label delivery input-parent">
                                <input type="radio" name="delivery" value="{$delivery.id}" id="delivery_{$delivery.id}"
                                    data-payments="{$delivery.payments | json_encode}"
                                    {$checked ? \'checked\' : \'\'}>
                                {if $delivery.logo?}
                                    <img src="{$delivery.logo}" alt="{$delivery.name}" title="{$delivery.name}"/>
                                {else}
                                    {$delivery.name}
                                {/if}
                                {if $delivery.description?}
                                    <p class="small">
                                        {$delivery.description}
                                    </p>
                                {/if}
                            </label>
                        </div>
                    {/foreach}
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6">
            <h4>{\'ms2_frontend_address\' | lexicon}:</h4>
            {foreach [\'index\',\'region\',\'city\', \'street\', \'building\', \'entrance\',\'floor\', \'room\'] as $field}
                <div class="form-group row input-parent">
                    <label class="col-md-4 col-form-label" for="{$field}">
                        {(\'ms2_frontend_\' ~ $field) | lexicon} <span class="required-star">*</span>
                    </label>
                    <div class="col-md-8">
                        <input type="text" id="{$field}" placeholder="{(\'ms2_frontend_\' ~ $field) | lexicon}"
                            name="{$field}" value="{$form[$field]}"
                            class="form-control{($field in list $errors) ? \' error\' : \'\'}">
                    </div>
                </div>
            {/foreach}

            <div class="form-group row input-parent">
                <label class="col-md-4 col-form-label" for="text_address">
                    {\'ms2_frontend_text_address\' | lexicon} <span class="required-star">*</span>
                </label>
                <div class="col-md-8">
                    <textarea name="text_address" id="text_address" placeholder="{\'ms2_frontend_text_address\' | lexicon}"
                        class="form-control{(\'text_address\' in list $errors) ? \' error\' : \'\'}">{$form.text_address}</textarea>
                </div>
            </div>

        </div>

    </div>

    <button type="button" name="ms2_action" value="order/clean" class="btn btn-danger ms2_link">
        {\'ms2_frontend_order_cancel\' | lexicon}
    </button>

    <hr class="mt-4 mb-4"/>


    <div class="d-flex flex-column flex-md-row align-items-center justify-content-center justify-content-md-end mb-5">
        <h4 class="mb-md-0">{\'ms2_frontend_order_cost\' | lexicon}:</h4>
        <h3 class="mb-md-0 ml-md-2">
            <span id="ms2_order_cart_cost">{$order.cart_cost ?: 0}</span> {\'ms2_frontend_currency\' | lexicon} +
            <span id="ms2_order_delivery_cost">{$order.delivery_cost ?: 0}</span> {\'ms2_frontend_currency\' | lexicon} =
            <span id="ms2_order_cost">{$order.cost ?: 0}</span> {\'ms2_frontend_currency\' | lexicon}
        </h3>

        <button type="submit" name="ms2_action" value="order/submit" class="btn btn-lg btn-primary ml-md-2 ms2_link">
            {\'ms2_frontend_order_submit\' | lexicon}
        </button>
    </div>
</form>
',
    ),
  ),
  'ac106eb42595b8cecf417b7a46a5dc85' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msGetOrder',
    ),
    'object' => 
    array (
      'id' => 289,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msGetOrder',
      'description' => 'Чанк вывода заказа miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<div id="msCart">
    <div class="table-responsive">
        <table class="table table-striped">
            <tr class="ms-header">
                <th class="ms-title">{\'ms2_cart_title\' | lexicon}</th>
                <th class="ms-count">{\'ms2_cart_count\' | lexicon}</th>
                <th class="ms-weight">{\'ms2_cart_weight\' | lexicon}</th>
                <th class="ms-price">{\'ms2_cart_cost\' | lexicon}</th>
            </tr>
            {foreach $products as $product}
                {var $image}
                {if $product.thumb?}
                    <img src="{$product.thumb}" alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                {else}
                    <img src="{\'assets_url\' | option}components/minishop2/img/web/ms2_small.png"
                        srcset="{\'assets_url\' | option}components/minishop2/img/web/ms2_small@2x.png 2x"
                        alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                {/if}
                {/var}
                <tr>
                    <td class="ms-title">
                        <div class="d-flex">
                            <div class="ms-image mw-100 pr-3">
                                {if $product.id?}
                                    <a href="{$product.id | url}">{$image}</a>
                                {else}
                                    {$image}
                                {/if}
                            </div>
                            <div class="title">
                                {if $product.id?}
                                    <a href="{$product.id | url}">{$product.pagetitle}</a>
                                {else}
                                    {$product.name}
                                {/if}
                                {if $product.options?}
                                    <div class="small">
                                        {$product.options | join : \'; \'}
                                    </div>
                                {/if}
                            </div>
                        </div>
                    </td>
                    <td class="ms-count text-nowrap">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}</td>
                    <td class="ms-weight text-nowrap">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}</td>
                    <td class="ms-price text-nowrap">{$product.price} {\'ms2_frontend_currency\' | lexicon}</td>
                </tr>
            {/foreach}
            <tr class="ms-footer">
                <th class="total">{\'ms2_cart_total\' | lexicon}:</th>
                <th class="total_count text-nowrap">
                    <span class="ms2_total_count">{$total.cart_count}</span> {\'ms2_frontend_count_unit\' | lexicon}
                </th>
                <th class="total_weight text-nowrap">
                    <span class="ms2_total_weight">{$total.cart_weight}</span> {\'ms2_frontend_weight_unit\' | lexicon}
                </th>
                <th class="total_cost text-nowrap">
                    <span class="ms2_total_cost">{$total.cart_cost}</span> {\'ms2_frontend_currency\' | lexicon}
                </th>
            </tr>
        </table>
    </div>

    <h4>
        {\'ms2_frontend_order_cost\' | lexicon}:
        {if $total.delivery_cost}
            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}
            {\'ms2_frontend_currency\' | lexicon} =
        {/if}
        <strong>{$total.cost}</strong> {\'ms2_frontend_currency\' | lexicon}
    </h4>

    {if $payment_link?}
        <p>{\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}</p>
    {/if}

</div>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_get_order.tpl',
      'content' => '<div id="msCart">
    <div class="table-responsive">
        <table class="table table-striped">
            <tr class="ms-header">
                <th class="ms-title">{\'ms2_cart_title\' | lexicon}</th>
                <th class="ms-count">{\'ms2_cart_count\' | lexicon}</th>
                <th class="ms-weight">{\'ms2_cart_weight\' | lexicon}</th>
                <th class="ms-price">{\'ms2_cart_cost\' | lexicon}</th>
            </tr>
            {foreach $products as $product}
                {var $image}
                {if $product.thumb?}
                    <img src="{$product.thumb}" alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                {else}
                    <img src="{\'assets_url\' | option}components/minishop2/img/web/ms2_small.png"
                        srcset="{\'assets_url\' | option}components/minishop2/img/web/ms2_small@2x.png 2x"
                        alt="{$product.pagetitle}" title="{$product.pagetitle}"/>
                {/if}
                {/var}
                <tr>
                    <td class="ms-title">
                        <div class="d-flex">
                            <div class="ms-image mw-100 pr-3">
                                {if $product.id?}
                                    <a href="{$product.id | url}">{$image}</a>
                                {else}
                                    {$image}
                                {/if}
                            </div>
                            <div class="title">
                                {if $product.id?}
                                    <a href="{$product.id | url}">{$product.pagetitle}</a>
                                {else}
                                    {$product.name}
                                {/if}
                                {if $product.options?}
                                    <div class="small">
                                        {$product.options | join : \'; \'}
                                    </div>
                                {/if}
                            </div>
                        </div>
                    </td>
                    <td class="ms-count text-nowrap">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}</td>
                    <td class="ms-weight text-nowrap">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}</td>
                    <td class="ms-price text-nowrap">{$product.price} {\'ms2_frontend_currency\' | lexicon}</td>
                </tr>
            {/foreach}
            <tr class="ms-footer">
                <th class="total">{\'ms2_cart_total\' | lexicon}:</th>
                <th class="total_count text-nowrap">
                    <span class="ms2_total_count">{$total.cart_count}</span> {\'ms2_frontend_count_unit\' | lexicon}
                </th>
                <th class="total_weight text-nowrap">
                    <span class="ms2_total_weight">{$total.cart_weight}</span> {\'ms2_frontend_weight_unit\' | lexicon}
                </th>
                <th class="total_cost text-nowrap">
                    <span class="ms2_total_cost">{$total.cart_cost}</span> {\'ms2_frontend_currency\' | lexicon}
                </th>
            </tr>
        </table>
    </div>

    <h4>
        {\'ms2_frontend_order_cost\' | lexicon}:
        {if $total.delivery_cost}
            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}
            {\'ms2_frontend_currency\' | lexicon} =
        {/if}
        <strong>{$total.cost}</strong> {\'ms2_frontend_currency\' | lexicon}
    </h4>

    {if $payment_link?}
        <p>{\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}</p>
    {/if}

</div>
',
    ),
  ),
  '363c4fb5eca3a3b7db0ce7df0d6451c4' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msOptions',
    ),
    'object' => 
    array (
      'id' => 290,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msOptions',
      'description' => 'Чанк вывода дополнительных свойств товара miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{foreach $options as $name => $values}
    <div class="form-group row align-items-center">
        <label class="col-6 col-md-3 text-right text-md-left col-form-label" for="option_{$name}">{(\'ms2_product_\' ~ $name) | lexicon}:</label>
        <div class="col-6 col-md-9">
            <select name="options[{$name}]" class="form-control col-md-6" id="option_{$name}">
                {foreach $values as $value}
                    <option value="{$value}">{$value}</option>
                {/foreach}
            </select>
        </div>
    </div>
{/foreach}
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_options.tpl',
      'content' => '{foreach $options as $name => $values}
    <div class="form-group row align-items-center">
        <label class="col-6 col-md-3 text-right text-md-left col-form-label" for="option_{$name}">{(\'ms2_product_\' ~ $name) | lexicon}:</label>
        <div class="col-6 col-md-9">
            <select name="options[{$name}]" class="form-control col-md-6" id="option_{$name}">
                {foreach $values as $value}
                    <option value="{$value}">{$value}</option>
                {/foreach}
            </select>
        </div>
    </div>
{/foreach}
',
    ),
  ),
  '96b2ca07bf60ef8aa213a611a8da6d9e' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msProductOptions',
    ),
    'object' => 
    array (
      'id' => 291,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msProductOptions',
      'description' => 'Чанк вывода дополнительных опций товара miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{foreach $options as $option}
    <div class="form-group row align-items-center">
        <label class="col-6 col-md-3 text-right text-md-left col-form-label">{$option.caption}:</label>
        <div class="col-6 col-md-9">
            {if $option.value is array}
                {$option.value | join : \', \'}
            {else}
                {$option.value}
            {/if}
        </div>
    </div>
{/foreach}
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_product_options.tpl',
      'content' => '{foreach $options as $option}
    <div class="form-group row align-items-center">
        <label class="col-6 col-md-3 text-right text-md-left col-form-label">{$option.caption}:</label>
        <div class="col-6 col-md-9">
            {if $option.value is array}
                {$option.value | join : \', \'}
            {else}
                {$option.value}
            {/if}
        </div>
    </div>
{/foreach}
',
    ),
  ),
  'f1a6be6174a9bdd51c61c274b7612f09' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msGallery',
    ),
    'object' => 
    array (
      'id' => 292,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msGallery',
      'description' => 'Чанк вывода галереи товара miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<div id="msGallery">
    {if $files}
        <div>
            {foreach $files as $file}
                <a href="{$file[\'url\']}" target="_blank">
                    <img src="{$file[\'small\']}" alt="{$file[\'description\']}" title="{$file[\'name\']}">
                </a>
            {/foreach}
        </div>
    {else}
        <img src="{(\'assets_url\' | option) ~ \'components/minishop2/img/web/ms2_medium.png\'}"
            srcset="{(\'assets_url\' | option) ~ \'components/minishop2/img/web/ms2_medium@2x.png\'} 2x"
            alt="" title=""/>
    {/if}
</div>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_gallery.tpl',
      'content' => '<div id="msGallery">
    {if $files}
        <div>
            {foreach $files as $file}
                <a href="{$file[\'url\']}" target="_blank">
                    <img src="{$file[\'small\']}" alt="{$file[\'description\']}" title="{$file[\'name\']}">
                </a>
            {/foreach}
        </div>
    {else}
        <img src="{(\'assets_url\' | option) ~ \'components/minishop2/img/web/ms2_medium.png\'}"
            srcset="{(\'assets_url\' | option) ~ \'components/minishop2/img/web/ms2_medium@2x.png\'} 2x"
            alt="" title=""/>
    {/if}
</div>
',
    ),
  ),
  '4ecfdf4052cb69ec641330a5694f4e45' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msGalleryNew',
    ),
    'object' => 
    array (
      'id' => 385,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msGalleryNew',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>

<style>
    :root {
        --swiper-theme-color: #9c9c9c;
    }
    .swiper {
        width: 100%;
        height: 100%;
        background-color: #dedede;
    }

    .swiper-slide {
        text-align: center;
        font-size: 18px;

        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
    }

    .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .swiper {
        width: 100%;
        height: 300px;
        margin-left: auto;
        margin-right: auto;
    }

    .swiper-slide {
        background-size: cover;
        background-position: center;
    }

    .mySwiper2 {
        height: 80%;
        width: 100%;
    }
    .mySwiper2 .swiper-slide {
        padding: 1px 1px 0 1px;
    }

    .mySwiper {
        height: 20%;
        box-sizing: border-box;
        padding: 1px;
    }

    .mySwiper .swiper-slide {
        width: 25%;
        height: 100%;
        opacity: 0.7;
    }

    .mySwiper .swiper-slide-thumb-active {
        opacity: 1;
    }

    .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
</style>

<div id="msGallery">
    {if $files?}
        {set $slides = \'\'}
        {foreach $files as $file}
            {set $slides = $slides ~ \'<div class="swiper-slide"><img src="\'~$file[\'small\']~\'" alt="\'~$file[\'description\']~\'" title="\'~$file[\'name\']~\'"></div>\'}
        {/foreach}
        <div class="swiper mySwiper2">
            <div class="swiper-wrapper">
                {$slides}
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
        <div class="swiper mySwiper">
            <div class="swiper-wrapper">
               {$slides}
            </div>
        </div>
    {else}
        <img src="{(\'assets_url\' | option) ~ \'components/minishop2/img/web/ms2_medium.png\'}"
             srcset="{(\'assets_url\' | option) ~ \'components/minishop2/img/web/ms2_medium@2x.png\'} 2x"
             alt="" title=""/>
    {/if}
</div>

<script>
    var swiper = new Swiper(".mySwiper", {
        loop: true,
        spaceBetween: 1,
        slidesPerView: 4,
        freeMode: true,
        watchSlidesProgress: true,
    });
    var swiper2 = new Swiper(".mySwiper2", {
        loop: true,
        spaceBetween: 1,
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
        thumbs: {
            swiper: swiper,
        },
    });
</script>
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_gallery_new.tpl',
      'content' => '<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>

<style>
    :root {
        --swiper-theme-color: #9c9c9c;
    }
    .swiper {
        width: 100%;
        height: 100%;
        background-color: #dedede;
    }

    .swiper-slide {
        text-align: center;
        font-size: 18px;

        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
    }

    .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .swiper {
        width: 100%;
        height: 300px;
        margin-left: auto;
        margin-right: auto;
    }

    .swiper-slide {
        background-size: cover;
        background-position: center;
    }

    .mySwiper2 {
        height: 80%;
        width: 100%;
    }
    .mySwiper2 .swiper-slide {
        padding: 1px 1px 0 1px;
    }

    .mySwiper {
        height: 20%;
        box-sizing: border-box;
        padding: 1px;
    }

    .mySwiper .swiper-slide {
        width: 25%;
        height: 100%;
        opacity: 0.7;
    }

    .mySwiper .swiper-slide-thumb-active {
        opacity: 1;
    }

    .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
</style>

<div id="msGallery">
    {if $files?}
        {set $slides = \'\'}
        {foreach $files as $file}
            {set $slides = $slides ~ \'<div class="swiper-slide"><img src="\'~$file[\'small\']~\'" alt="\'~$file[\'description\']~\'" title="\'~$file[\'name\']~\'"></div>\'}
        {/foreach}
        <div class="swiper mySwiper2">
            <div class="swiper-wrapper">
                {$slides}
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
        <div class="swiper mySwiper">
            <div class="swiper-wrapper">
               {$slides}
            </div>
        </div>
    {else}
        <img src="{(\'assets_url\' | option) ~ \'components/minishop2/img/web/ms2_medium.png\'}"
             srcset="{(\'assets_url\' | option) ~ \'components/minishop2/img/web/ms2_medium@2x.png\'} 2x"
             alt="" title=""/>
    {/if}
</div>

<script>
    var swiper = new Swiper(".mySwiper", {
        loop: true,
        spaceBetween: 1,
        slidesPerView: 4,
        freeMode: true,
        watchSlidesProgress: true,
    });
    var swiper2 = new Swiper(".mySwiper2", {
        loop: true,
        spaceBetween: 1,
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
        thumbs: {
            swiper: swiper,
        },
    });
</script>
',
    ),
  ),
  'cb88e7f3cb85db77677db6c0de1c53eb' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail',
    ),
    'object' => 
    array (
      'id' => 293,
      'source' => 4,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail',
      'description' => 'Базовый чанк оформления писем miniShop2.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{var $style = [
\'logo\' => \'display:block;margin: auto;\',
\'a\' => \'color:#348eda;\',
\'p\' => \'font-family: Arial;color: #666666;font-size: 12px;\',
\'h\' => \'font-family:Arial;color: #111111;font-weight: 200;line-height: 1.2em;margin: 40px 20px;\',
\'h1\' => \'font-size: 36px;\',
\'h2\' => \'font-size: 28px;\',
\'h3\' => \'font-size: 22px;\',
\'th\' => \'font-family: Arial;text-align: left;color: #111111;\',
\'td\' => \'font-family: Arial;text-align: left;color: #111111;\',
]}

{var $site_url = (\'site_url\' | option) | preg_replace : \'#/$#\' : \'\'}
{var $assets_url = \'assets_url\' | option}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>{\'site_name\' | option}</title>
</head>
<body style="margin:0;padding:0;background:#f6f6f6;">
<div style="height:100%;padding-top:20px;background:#f6f6f6;">
    {block \'logo\'}
        <a href="{$site_url}">
            <img style="{$style.logo}"
                src="{$site_url}{$assets_url}components/minishop2/img/web/ms2_small@2x.png"
                alt="{$site_url}"
                width="120" height="90"/>
        </a>
    {/block}
    <!-- body -->
    <table class="body-wrap" style="padding:0 20px 20px 20px;width: 100%;background:#f6f6f6;margin-top:10px;">
        <tr>
            <td></td>
            <td class="container" style="border:1px solid #f0f0f0;background:#ffffff;width:800px;margin:auto;">
                <div class="content">
                    <table style="width:100%;">
                        <tr>
                            <td>
                                <h3 style="{$style.h}{$style.h3}">
                                    {block \'title\'}
                                        miniShop2
                                    {/block}
                                </h3>

                                {block \'products\'}
                                    <table style="width:90%;margin:auto;">
                                        <thead>
                                        <tr>
                                            <th>&nbsp;</th>
                                            <th style="{$style.th}">{\'ms2_cart_title\' | lexicon}</th>
                                            <th style="{$style.th}">{\'ms2_cart_count\' | lexicon}</th>
                                            <th style="{$style.th}">{\'ms2_cart_weight\' | lexicon}</th>
                                            <th style="{$style.th}">{\'ms2_cart_cost\' | lexicon}</th>
                                        </tr>
                                        </thead>
                                        {foreach $products as $product}
                                            <tr>
                                                <td style="{$style.th}">
                                                    {if $product.thumb?}
                                                        <img src="{$site_url}{$product.thumb}"
                                                            alt="{$product.pagetitle}"
                                                            title="{$product.pagetitle}"
                                                            width="120" height="90"/>
                                                    {else}
                                                        <img src="{$site_url}{$assets_url}components/minishop2/img/web/ms2_small@2x.png"
                                                            alt="{$product.pagetitle}"
                                                            title="{$product.pagetitle}"
                                                            width="120" height="90"/>
                                                    {/if}
                                                </td>
                                                <td style="{$style.th}">
                                                    {if $product.id?}
                                                        <a href="{$product.id | url : [\'scheme\' => \'full\']}"
                                                            style="{$style.a}">
                                                            {$product.name}
                                                        </a>
                                                    {else}
                                                        {$product.name}
                                                    {/if}
                                                    {if $product.options?}
                                                        <div class="small">
                                                            {$product.options | join : \'; \'}
                                                        </div>
                                                    {/if}
                                                </td>
                                                <td style="{$style.th}">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}</td>
                                                <td style="{$style.th}">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}</td>
                                                <td style="{$style.th}">{$product.price} {\'ms2_frontend_currency\' | lexicon}</td>
                                            </tr>
                                        {/foreach}
                                        <tfoot>
                                        <tr>
                                            <th colspan="2"></th>
                                            <th style="{$style.th}">
                                                {$total.cart_count} {\'ms2_frontend_count_unit\' | lexicon}
                                            </th>
                                            <th style="{$style.th}">
                                                {$total.cart_weight} {\'ms2_frontend_weight_unit\' | lexicon}
                                            </th>
                                            <th style="{$style.th}">
                                                {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon}
                                            </th>
                                        </tr>
                                        </tfoot>
                                    </table>
                                    <h3 style="{$style.h}{$style.h3}">
                                        {\'ms2_frontend_order_cost\' | lexicon}:
                                        {if $total.delivery_cost}
                                            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}
                                            {\'ms2_frontend_currency\' | lexicon} =
                                        {/if}
                                        <strong>{$total.cost}</strong> {\'ms2_frontend_currency\' | lexicon}
                                    </h3>
                                {/block}
                            </td>
                        </tr>
                    </table>
                </div>
                <!-- /content -->
            </td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>{block \'address\'}{/block}</td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>{block \'payment\'}{/block}</td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>{block \'delivery\'}{/block}</td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>{block \'link\'}{/block}</td>
            <td></td>
        </tr>
    </table>
    <!-- /body -->
    <!-- footer -->
    <table style="clear:both !important;width: 100%;">
        <tr>
            <td></td>
            <td class="container">
                <!-- content -->
                <div class="content">
                    <table style="width:100%;text-align: center;">
                        <tr>
                            <td align="center">
                                <p style="{$style.p}">
                                    {block \'footer\'}
                                    <a href="{$site_url}" style="color: #999999;">
                                        {\'site_name\' | option}
                                    </a>
                                    {/block}
                                </p>
                            </td>
                        </tr>
                    </table>
                </div>
                <!-- /content -->
            </td>
            <td></td>
        </tr>
    </table>
    <!-- /footer -->
</div>
</body>
</html>
',
      'locked' => 0,
      'properties' => 'a:0:{}',
      'static' => 1,
      'static_file' => 'minishop/ms2.email.base.tpl',
      'content' => '{var $style = [
\'logo\' => \'display:block;margin: auto;\',
\'a\' => \'color:#348eda;\',
\'p\' => \'font-family: Arial;color: #666666;font-size: 12px;\',
\'h\' => \'font-family:Arial;color: #111111;font-weight: 200;line-height: 1.2em;margin: 40px 20px;\',
\'h1\' => \'font-size: 36px;\',
\'h2\' => \'font-size: 28px;\',
\'h3\' => \'font-size: 22px;\',
\'th\' => \'font-family: Arial;text-align: left;color: #111111;\',
\'td\' => \'font-family: Arial;text-align: left;color: #111111;\',
]}

{var $site_url = (\'site_url\' | option) | preg_replace : \'#/$#\' : \'\'}
{var $assets_url = \'assets_url\' | option}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>{\'site_name\' | option}</title>
</head>
<body style="margin:0;padding:0;background:#f6f6f6;">
<div style="height:100%;padding-top:20px;background:#f6f6f6;">
    {block \'logo\'}
        <a href="{$site_url}">
            <img style="{$style.logo}"
                src="{$site_url}{$assets_url}components/minishop2/img/web/ms2_small@2x.png"
                alt="{$site_url}"
                width="120" height="90"/>
        </a>
    {/block}
    <!-- body -->
    <table class="body-wrap" style="padding:0 20px 20px 20px;width: 100%;background:#f6f6f6;margin-top:10px;">
        <tr>
            <td></td>
            <td class="container" style="border:1px solid #f0f0f0;background:#ffffff;width:800px;margin:auto;">
                <div class="content">
                    <table style="width:100%;">
                        <tr>
                            <td>
                                <h3 style="{$style.h}{$style.h3}">
                                    {block \'title\'}
                                        miniShop2
                                    {/block}
                                </h3>

                                {block \'products\'}
                                    <table style="width:90%;margin:auto;">
                                        <thead>
                                        <tr>
                                            <th>&nbsp;</th>
                                            <th style="{$style.th}">{\'ms2_cart_title\' | lexicon}</th>
                                            <th style="{$style.th}">{\'ms2_cart_count\' | lexicon}</th>
                                            <th style="{$style.th}">{\'ms2_cart_weight\' | lexicon}</th>
                                            <th style="{$style.th}">{\'ms2_cart_cost\' | lexicon}</th>
                                        </tr>
                                        </thead>
                                        {foreach $products as $product}
                                            <tr>
                                                <td style="{$style.th}">
                                                    {if $product.thumb?}
                                                        <img src="{$site_url}{$product.thumb}"
                                                            alt="{$product.pagetitle}"
                                                            title="{$product.pagetitle}"
                                                            width="120" height="90"/>
                                                    {else}
                                                        <img src="{$site_url}{$assets_url}components/minishop2/img/web/ms2_small@2x.png"
                                                            alt="{$product.pagetitle}"
                                                            title="{$product.pagetitle}"
                                                            width="120" height="90"/>
                                                    {/if}
                                                </td>
                                                <td style="{$style.th}">
                                                    {if $product.id?}
                                                        <a href="{$product.id | url : [\'scheme\' => \'full\']}"
                                                            style="{$style.a}">
                                                            {$product.name}
                                                        </a>
                                                    {else}
                                                        {$product.name}
                                                    {/if}
                                                    {if $product.options?}
                                                        <div class="small">
                                                            {$product.options | join : \'; \'}
                                                        </div>
                                                    {/if}
                                                </td>
                                                <td style="{$style.th}">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}</td>
                                                <td style="{$style.th}">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}</td>
                                                <td style="{$style.th}">{$product.price} {\'ms2_frontend_currency\' | lexicon}</td>
                                            </tr>
                                        {/foreach}
                                        <tfoot>
                                        <tr>
                                            <th colspan="2"></th>
                                            <th style="{$style.th}">
                                                {$total.cart_count} {\'ms2_frontend_count_unit\' | lexicon}
                                            </th>
                                            <th style="{$style.th}">
                                                {$total.cart_weight} {\'ms2_frontend_weight_unit\' | lexicon}
                                            </th>
                                            <th style="{$style.th}">
                                                {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon}
                                            </th>
                                        </tr>
                                        </tfoot>
                                    </table>
                                    <h3 style="{$style.h}{$style.h3}">
                                        {\'ms2_frontend_order_cost\' | lexicon}:
                                        {if $total.delivery_cost}
                                            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}
                                            {\'ms2_frontend_currency\' | lexicon} =
                                        {/if}
                                        <strong>{$total.cost}</strong> {\'ms2_frontend_currency\' | lexicon}
                                    </h3>
                                {/block}
                            </td>
                        </tr>
                    </table>
                </div>
                <!-- /content -->
            </td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>{block \'address\'}{/block}</td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>{block \'payment\'}{/block}</td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>{block \'delivery\'}{/block}</td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>{block \'link\'}{/block}</td>
            <td></td>
        </tr>
    </table>
    <!-- /body -->
    <!-- footer -->
    <table style="clear:both !important;width: 100%;">
        <tr>
            <td></td>
            <td class="container">
                <!-- content -->
                <div class="content">
                    <table style="width:100%;text-align: center;">
                        <tr>
                            <td align="center">
                                <p style="{$style.p}">
                                    {block \'footer\'}
                                    <a href="{$site_url}" style="color: #999999;">
                                        {\'site_name\' | option}
                                    </a>
                                    {/block}
                                </p>
                            </td>
                        </tr>
                    </table>
                </div>
                <!-- /content -->
            </td>
            <td></td>
        </tr>
    </table>
    <!-- /footer -->
</div>
</body>
</html>
',
    ),
  ),
  '31cfb4edd764115c6045f3cb58b8c083' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.new.user',
    ),
    'object' => 
    array (
      'id' => 294,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.new.user',
      'description' => 'Чанк письма нового заказа пользователю.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_new_user\' | lexicon : $order}
{/block}

{block \'products\'}
    {parent}
    {if $payment_link?}
        <p style="margin-left:20px;{$style.p}">
            {\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}
        </p>
    {/if}
{/block}
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_new_user.tpl',
      'content' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_new_user\' | lexicon : $order}
{/block}

{block \'products\'}
    {parent}
    {if $payment_link?}
        <p style="margin-left:20px;{$style.p}">
            {\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}
        </p>
    {/if}
{/block}
',
    ),
  ),
  '27bee8bedda00ed1cc6decf07cbf32c3' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.new.manager',
    ),
    'object' => 
    array (
      'id' => 295,
      'source' => 4,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.new.manager',
      'description' => 'Чанк письма нового заказа менеджеру.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_new_manager\' | lexicon : $order}
{/block}

{block \'address\'}
    <table class="container" style="width: 100%;background:#fff;margin-top:10px; padding-bottom: 40px;">
        <tr>
            <td>  
                <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_credentials\' | lexicon}</h3>
                <table style="width:95%;margin:auto;">
                    {foreach [\'receiver\',\'phone\',\'email\'] as $field}
                        {if $address[$field]}
                            <tr>
                                <td>{(\'ms2_frontend_\' ~ $field) | lexicon}: {$address[$field]} </td>
                            </tr>
                        {/if}
                    {/foreach}
                </table>
            </td>
        </tr>
        <tr>
            <td>  
                <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_address\' | lexicon}</h3>
                <table style="width:95%;margin:auto;">
                    {foreach [\'index\',\'region\',\'city\', \'street\', \'building\', \'entrance\',\'floor\', \'room\'] as $field}
                        {if $address[$field]}
                            <tr>
                                <td>{(\'ms2_frontend_\' ~ $field) | lexicon}: {$address[$field]} </td>
                            </tr>
                        {/if}
                    {/foreach}
                </table>
            </td>
        </tr>

        {if $address.comment}
            <tr>
                <td>
                    <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_comment\' | lexicon}</h3>
                    <table style="width:95%;margin:auto;">
                        <tr>
                            <td>{$address.comment}</td>
                        </tr> 
                    </table>
                </td>
            </tr>
        {/if}
    </table>
{/block}

{block \'payment\'}
    <table class="container" style="width: 100%;background:#fff;margin-top:10px; padding-bottom: 40px;">
        <tr>
            <td>  
                <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_payment\' | lexicon}</h3>
                <table style="width:95%;margin:auto;">
                    <tr>
                        <td>{$payment.name}</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
{/block}

{block \'delivery\'}
    <table class="container" style="width: 100%;background:#fff;margin-top:10px; padding-bottom: 40px;">
        <tr>
            <td>  
                <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_delivery\' | lexicon}</h3>
                <table style="width:95%;margin:auto;">
                    <tr>
                        <td>{$delivery.name}</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
{/block}

{block \'link\'}
<table class="container" style="width: 100%;background:#fff;margin-top:10px; padding: 40px 0;">
    <tr>
        <td>  
            <table style="width:95%;margin:auto;">
                <tr>
                    <td><a href="{$site_url}{\'manager_url\'|option}?a=mgr/orders&namespace=minishop2&order={$order.id}" target="_blank" style="{$style.a}">{\'ms2_email_link_to_order\' | lexicon}</a></td>
                </tr>
            </table>
        </td>
    </tr>
</table>
{/block}
',
      'locked' => 0,
      'properties' => 'a:0:{}',
      'static' => 1,
      'static_file' => 'minishop/ms2.email.new.manager.tpl',
      'content' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_new_manager\' | lexicon : $order}
{/block}

{block \'address\'}
    <table class="container" style="width: 100%;background:#fff;margin-top:10px; padding-bottom: 40px;">
        <tr>
            <td>  
                <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_credentials\' | lexicon}</h3>
                <table style="width:95%;margin:auto;">
                    {foreach [\'receiver\',\'phone\',\'email\'] as $field}
                        {if $address[$field]}
                            <tr>
                                <td>{(\'ms2_frontend_\' ~ $field) | lexicon}: {$address[$field]} </td>
                            </tr>
                        {/if}
                    {/foreach}
                </table>
            </td>
        </tr>
        <tr>
            <td>  
                <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_address\' | lexicon}</h3>
                <table style="width:95%;margin:auto;">
                    {foreach [\'index\',\'region\',\'city\', \'street\', \'building\', \'entrance\',\'floor\', \'room\'] as $field}
                        {if $address[$field]}
                            <tr>
                                <td>{(\'ms2_frontend_\' ~ $field) | lexicon}: {$address[$field]} </td>
                            </tr>
                        {/if}
                    {/foreach}
                </table>
            </td>
        </tr>

        {if $address.comment}
            <tr>
                <td>
                    <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_comment\' | lexicon}</h3>
                    <table style="width:95%;margin:auto;">
                        <tr>
                            <td>{$address.comment}</td>
                        </tr> 
                    </table>
                </td>
            </tr>
        {/if}
    </table>
{/block}

{block \'payment\'}
    <table class="container" style="width: 100%;background:#fff;margin-top:10px; padding-bottom: 40px;">
        <tr>
            <td>  
                <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_payment\' | lexicon}</h3>
                <table style="width:95%;margin:auto;">
                    <tr>
                        <td>{$payment.name}</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
{/block}

{block \'delivery\'}
    <table class="container" style="width: 100%;background:#fff;margin-top:10px; padding-bottom: 40px;">
        <tr>
            <td>  
                <h3 style="{$style.h}{$style.h3} margin-bottom: 20px;">{\'ms2_frontend_delivery\' | lexicon}</h3>
                <table style="width:95%;margin:auto;">
                    <tr>
                        <td>{$delivery.name}</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
{/block}

{block \'link\'}
<table class="container" style="width: 100%;background:#fff;margin-top:10px; padding: 40px 0;">
    <tr>
        <td>  
            <table style="width:95%;margin:auto;">
                <tr>
                    <td><a href="{$site_url}{\'manager_url\'|option}?a=mgr/orders&namespace=minishop2&order={$order.id}" target="_blank" style="{$style.a}">{\'ms2_email_link_to_order\' | lexicon}</a></td>
                </tr>
            </table>
        </td>
    </tr>
</table>
{/block}
',
    ),
  ),
  '3d2015fa02af0e9ca48bc3568ac9b7ee' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.paid.user',
    ),
    'object' => 
    array (
      'id' => 296,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.paid.user',
      'description' => 'Чанк письма оплаченного заказа пользователю.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_paid_user\' | lexicon : $order}
{/block}
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_paid_user.tpl',
      'content' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_paid_user\' | lexicon : $order}
{/block}
',
    ),
  ),
  'd17a770dccb541286b53c408404853f0' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.paid.manager',
    ),
    'object' => 
    array (
      'id' => 297,
      'source' => 4,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.paid.manager',
      'description' => 'Чанк письма оплаченного заказа менеджеру.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_paid_manager\' | lexicon : $order}
{/block}
',
      'locked' => 0,
      'properties' => 'a:0:{}',
      'static' => 1,
      'static_file' => 'minishop/ms2.email.paid.manager.tpl',
      'content' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_paid_manager\' | lexicon : $order}
{/block}
',
    ),
  ),
  '9d1d27461815bdf24dad9f5ff341c897' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.sent.user',
    ),
    'object' => 
    array (
      'id' => 298,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.sent.user',
      'description' => 'Чанк письма отправленного заказа пользователю.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_sent_user\' | lexicon : $order}
{/block}
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_sent_user.tpl',
      'content' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_sent_user\' | lexicon : $order}
{/block}
',
    ),
  ),
  'f2f3a5408268ce25f11dbb089e594a9e' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.cancelled.user',
    ),
    'object' => 
    array (
      'id' => 299,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.cancelled.user',
      'description' => 'Чанк письма отмененного заказа пользователю.',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_cancelled_user\' | lexicon : $order}
{/block}
',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_cancelled_user.tpl',
      'content' => '{extends \'tpl.msEmail\'}

{block \'title\'}
    {\'ms2_email_subject_cancelled_user\' | lexicon : $order}
{/block}
',
    ),
  ),
  '96718f4af7907649640455c9e769b3b1' => 
  array (
    'criteria' => 
    array (
      'name' => 'msProducts',
    ),
    'object' => 
    array (
      'id' => 156,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msProducts',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

if (isset($parents) && $parents === \'\') {
    $scriptProperties[\'parents\'] = $modx->resource->id;
}

if (!empty($returnIds)) {
    $scriptProperties[\'return\'] = \'ids\';
}

if ($scriptProperties[\'return\'] === \'ids\') {
    $scriptProperties[\'returnIds\'] = true;
}

// Start build "where" expression
$where = [
    \'class_key\' => \'msProduct\',
];
if (empty($showZeroPrice)) {
    $where[\'Data.price:>\'] = 0;
}
// Add grouping
$groupby = [
    \'msProduct.id\',
];

// Join tables
$leftJoin = [
    \'Data\' => [\'class\' => \'msProductData\'],
    \'Vendor\' => [\'class\' => \'msVendor\', \'on\' => \'Data.vendor=Vendor.id\'],
];

$select = [
    \'msProduct\' => !empty($includeContent)
        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')
        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),
    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', [\'id\'], true),
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),
];

// Include thumbnails
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));
    foreach ($thumbs as $thumb) {
        if (empty($thumb)) {
            continue;
        }
        $leftJoin[$thumb] = [
            \'class\' => \'msProductFile\',
            \'on\' => "`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.`rank` = 0 AND `{$thumb}`.path LIKE \'%/{$thumb}/%\'",
        ];
        $select[$thumb] = "`{$thumb}`.url as `{$thumb}`";
        $groupby[] = "`{$thumb}`.url";
    }
}

// Include linked products
$innerJoin = [];
if (!empty($link) && !empty($master)) {
    $innerJoin[\'Link\'] = [
        \'class\' => \'msProductLink\',
        \'on\' => \'msProduct.id = Link.slave AND Link.link = \' . $link,
    ];
    $where[\'Link.master\'] = $master;
} elseif (!empty($link) && !empty($slave)) {
    $innerJoin[\'Link\'] = [
        \'class\' => \'msProductLink\',
        \'on\' => \'msProduct.id = Link.master AND Link.link = \' . $link,
    ];
    $where[\'Link.slave\'] = $slave;
}

// Add user parameters
foreach ([\'where\', \'leftJoin\', \'innerJoin\', \'select\', \'groupby\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Add filters by options
$joinedOptions = [];
if (!empty($scriptProperties[\'optionFilters\'])) {
    $filters = json_decode($scriptProperties[\'optionFilters\'], true);
    foreach ($filters as $key => $value) {
        $components = explode(\':\', $key, 2);

        if (count($components) === 2) {
            if (in_array(strtolower($components[0]), [\'or\', \'and\'])) {
                [$operator, $key] = $components;
            }
        }

        $option = preg_replace(\'#\\:.*#\', \'\', $key);
        $key = str_replace($option, $option . \'.value\', $key);

        if (!in_array($option, $joinedOptions)) {
            $leftJoin[$option] = [
                \'class\' => \'msProductOption\',
                \'on\' => "`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'",
            ];
            $joinedOptions[] = $option;
        }

        $index = isset($operator) && in_array(strtolower($operator), [\'or\', \'and\'], true)
            ? sprintf(\'%s:%s\', strtoupper($operator), $key)
            : $key;
        $where[$index] = $value;
    }
}

// Add sort by options
if (!empty($scriptProperties[\'sortbyOptions\'])) {
    $sorts = array_map(\'trim\', explode(\',\', $scriptProperties[\'sortbyOptions\']));
    foreach ($sorts as $sort) {
        $sort = explode(\':\', $sort);
        $option = $sort[0];
        if (preg_match("#\\b{$option}\\b#", $scriptProperties[\'sortby\'], $matches)) {
            $type = \'string\';
            if (isset($sort[1])) {
                $type = $sort[1];
            }
            switch ($type) {
                case \'number\':
                case \'decimal\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS DECIMAL(13,3))";
                    break;
                case \'int\':
                case \'integer\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS UNSIGNED INTEGER)";
                    break;
                case \'date\':
                case \'datetime\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS DATETIME)";
                    break;
                default:
                    $sortbyOptions = "`{$option}`.`value`";
                    break;
            }
            $scriptProperties[\'sortby\'] = preg_replace("#\\b{$option}\\b#", $sortbyOptions, $scriptProperties[\'sortby\']);
            $groupby[] = "`{$option}`.value";
        }

        if (!in_array($option, $joinedOptions)) {
            $leftJoin[$option] = [
                \'class\' => \'msProductOption\',
                \'on\' => "`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'",
            ];
            $joinedOptions[] = $option;
        }
    }
}

$default = [
    \'class\' => \'msProduct\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'innerJoin\' => $innerJoin,
    \'select\' => $select,
    \'sortby\' => \'msProduct.id\',
    \'sortdir\' => \'ASC\',
    \'groupby\' => implode(\', \', $groupby),
    \'return\' => \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
];
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);
$rows = $pdoFetch->run();

if ($scriptProperties[\'return\'] == \'json\') {
    $rows = json_decode($rows, true);
}

// Process rows
$output = $additionalPlaceholders = [];
if (!empty($rows) && is_array($rows)) {
    $c = $modx->newQuery(
        \'modPluginEvent\',
        [\'event:IN\' => [\'msOnGetProductPrice\', \'msOnGetProductWeight\', \'msOnGetProductFields\']]
    );
    $c->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');
    $c->where(\'modPlugin.disabled = 0\');

    $modifications = $modx->getOption(\'ms2_price_snippet\', null, false, true) ||
        $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $c);
    if ($modifications) {
        /** @var msProductData $product */
        $product = $modx->newObject(\'msProductData\');
    }
    $pdoFetch->addTime(\'Checked the active modifiers\');

    // Adding extra parameters into special place so we can put them in a results
    /** @var modSnippet $snippet */
    $properties = [];
    if (isset($this) && $this instanceof modSnippet && $this->get(\'properties\')) {
        $properties = $this->get(\'properties\');
    } elseif ($snippet = $modx->getObject(\'modSnippet\', [\'name\' => \'msProduct\'])) {
        $properties = $snippet->get(\'properties\');
    }
    if (!empty($properties)) {
        foreach ($scriptProperties as $k => $v) {
            if (!isset($properties[$k])) {
                $additionalPlaceholders[$k] = $v;
            }
        }
    }
    $opt_time = 0;
    foreach ($rows as $k => $row) {
        if ($modifications) {
            $product->fromArray($row, \'\', true, true);
            $tmp = $row[\'price\'];
            $row[\'price\'] = $product->getPrice($row);
            $row[\'weight\'] = $product->getWeight($row);
            // A discount here, so we should replace old price
            if ($row[\'price\'] < $tmp) {
                $row[\'old_price\'] = $tmp;
            }
            $row = $product->modifyFields($row);
        }
        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);
        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);
        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);
        $row[\'idx\'] = $pdoFetch->idx++;

        $opt_time_start = microtime(true);
        $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $row[\'id\']]);
        $rows[$k] = $row = array_merge($additionalPlaceholders, $row, $options);
        $opt_time += microtime(true) - $opt_time_start;

        $tpl = $pdoFetch->defineChunk($row);
        $output[] = $pdoFetch->getChunk($tpl, $row);
    }
    $pdoFetch->addTime(\'Time to load products options\', $opt_time);
}

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="msProductsLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

if ($scriptProperties[\'return\'] == \'json\') {
    $rows = json_encode($rows);
}

// Return output
if (is_string($rows)) {
    $modx->setPlaceholder(\'msProducts.log\', $log);
    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $rows);
    } else {
        return $rows;
    }
} elseif (!empty($toSeparatePlaceholders)) {
    $output[\'log\'] = $log;
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
} else {
    if (empty($outputSeparator)) {
        $outputSeparator = "\\n";
    }
    $output[\'log\'] = $log;
    $output = implode($outputSeparator, $output);

    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {
        $output = $pdoFetch->getChunk(
            $tplWrapper,
            array_merge($additionalPlaceholders, [\'output\' => $output, \'scriptProperties\' => $scriptProperties])
        );
    }

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
}',
      'locked' => 0,
      'properties' => 'a:29:{s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:18:"tpl.msProducts.row";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"limit";a:7:{s:4:"name";s:5:"limit";s:4:"desc";s:14:"ms2_prop_limit";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:10;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"offset";a:7:{s:4:"name";s:6:"offset";s:4:"desc";s:15:"ms2_prop_offset";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"depth";a:7:{s:4:"name";s:5:"depth";s:4:"desc";s:14:"ms2_prop_depth";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:10;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"sortby";a:7:{s:4:"name";s:6:"sortby";s:4:"desc";s:15:"ms2_prop_sortby";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:2:"id";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"sortbyOptions";a:7:{s:4:"name";s:13:"sortbyOptions";s:4:"desc";s:22:"ms2_prop_sortbyOptions";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"sortdir";a:7:{s:4:"name";s:7:"sortdir";s:4:"desc";s:16:"ms2_prop_sortdir";s:4:"type";s:4:"list";s:7:"options";a:2:{i:0;a:2:{s:4:"text";s:3:"ASC";s:5:"value";s:3:"ASC";}i:1;a:2:{s:4:"text";s:4:"DESC";s:5:"value";s:4:"DESC";}}s:5:"value";s:3:"ASC";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"toPlaceholder";a:7:{s:4:"name";s:13:"toPlaceholder";s:4:"desc";s:22:"ms2_prop_toPlaceholder";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:22:"toSeparatePlaceholders";a:7:{s:4:"name";s:22:"toSeparatePlaceholders";s:4:"desc";s:31:"ms2_prop_toSeparatePlaceholders";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"showLog";a:7:{s:4:"name";s:7:"showLog";s:4:"desc";s:16:"ms2_prop_showLog";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"parents";a:7:{s:4:"name";s:7:"parents";s:4:"desc";s:16:"ms2_prop_parents";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:9:"resources";a:7:{s:4:"name";s:9:"resources";s:4:"desc";s:18:"ms2_prop_resources";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:14:"includeContent";a:7:{s:4:"name";s:14:"includeContent";s:4:"desc";s:23:"ms2_prop_includeContent";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"includeTVs";a:7:{s:4:"name";s:10:"includeTVs";s:4:"desc";s:19:"ms2_prop_includeTVs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"includeThumbs";a:7:{s:4:"name";s:13:"includeThumbs";s:4:"desc";s:22:"ms2_prop_includeThumbs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"optionFilters";a:7:{s:4:"name";s:13:"optionFilters";s:4:"desc";s:22:"ms2_prop_optionFilters";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"where";a:7:{s:4:"name";s:5:"where";s:4:"desc";s:14:"ms2_prop_where";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:4:"link";a:7:{s:4:"name";s:4:"link";s:4:"desc";s:13:"ms2_prop_link";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"master";a:7:{s:4:"name";s:6:"master";s:4:"desc";s:15:"ms2_prop_master";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"slave";a:7:{s:4:"name";s:5:"slave";s:4:"desc";s:14:"ms2_prop_slave";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tvPrefix";a:7:{s:4:"name";s:8:"tvPrefix";s:4:"desc";s:17:"ms2_prop_tvPrefix";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:15:"outputSeparator";a:7:{s:4:"name";s:15:"outputSeparator";s:4:"desc";s:24:"ms2_prop_outputSeparator";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:1:"
";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:9:"returnIds";a:7:{s:4:"name";s:9:"returnIds";s:4:"desc";s:18:"ms2_prop_returnIds";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"return";a:7:{s:4:"name";s:6:"return";s:4:"desc";s:15:"ms2_prop_return";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:4:"data";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:15:"showUnpublished";a:7:{s:4:"name";s:15:"showUnpublished";s:4:"desc";s:24:"ms2_prop_showUnpublished";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:11:"showDeleted";a:7:{s:4:"name";s:11:"showDeleted";s:4:"desc";s:20:"ms2_prop_showDeleted";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"showHidden";a:7:{s:4:"name";s:10:"showHidden";s:4:"desc";s:19:"ms2_prop_showHidden";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:1;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"showZeroPrice";a:7:{s:4:"name";s:13:"showZeroPrice";s:4:"desc";s:22:"ms2_prop_showZeroPrice";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:1;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:11:"wrapIfEmpty";a:7:{s:4:"name";s:11:"wrapIfEmpty";s:4:"desc";s:20:"ms2_prop_wrapIfEmpty";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:1;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_products.php',
      'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

if (isset($parents) && $parents === \'\') {
    $scriptProperties[\'parents\'] = $modx->resource->id;
}

if (!empty($returnIds)) {
    $scriptProperties[\'return\'] = \'ids\';
}

if ($scriptProperties[\'return\'] === \'ids\') {
    $scriptProperties[\'returnIds\'] = true;
}

// Start build "where" expression
$where = [
    \'class_key\' => \'msProduct\',
];
if (empty($showZeroPrice)) {
    $where[\'Data.price:>\'] = 0;
}
// Add grouping
$groupby = [
    \'msProduct.id\',
];

// Join tables
$leftJoin = [
    \'Data\' => [\'class\' => \'msProductData\'],
    \'Vendor\' => [\'class\' => \'msVendor\', \'on\' => \'Data.vendor=Vendor.id\'],
];

$select = [
    \'msProduct\' => !empty($includeContent)
        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')
        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),
    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', [\'id\'], true),
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),
];

// Include thumbnails
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));
    foreach ($thumbs as $thumb) {
        if (empty($thumb)) {
            continue;
        }
        $leftJoin[$thumb] = [
            \'class\' => \'msProductFile\',
            \'on\' => "`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.`rank` = 0 AND `{$thumb}`.path LIKE \'%/{$thumb}/%\'",
        ];
        $select[$thumb] = "`{$thumb}`.url as `{$thumb}`";
        $groupby[] = "`{$thumb}`.url";
    }
}

// Include linked products
$innerJoin = [];
if (!empty($link) && !empty($master)) {
    $innerJoin[\'Link\'] = [
        \'class\' => \'msProductLink\',
        \'on\' => \'msProduct.id = Link.slave AND Link.link = \' . $link,
    ];
    $where[\'Link.master\'] = $master;
} elseif (!empty($link) && !empty($slave)) {
    $innerJoin[\'Link\'] = [
        \'class\' => \'msProductLink\',
        \'on\' => \'msProduct.id = Link.master AND Link.link = \' . $link,
    ];
    $where[\'Link.slave\'] = $slave;
}

// Add user parameters
foreach ([\'where\', \'leftJoin\', \'innerJoin\', \'select\', \'groupby\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Add filters by options
$joinedOptions = [];
if (!empty($scriptProperties[\'optionFilters\'])) {
    $filters = json_decode($scriptProperties[\'optionFilters\'], true);
    foreach ($filters as $key => $value) {
        $components = explode(\':\', $key, 2);

        if (count($components) === 2) {
            if (in_array(strtolower($components[0]), [\'or\', \'and\'])) {
                [$operator, $key] = $components;
            }
        }

        $option = preg_replace(\'#\\:.*#\', \'\', $key);
        $key = str_replace($option, $option . \'.value\', $key);

        if (!in_array($option, $joinedOptions)) {
            $leftJoin[$option] = [
                \'class\' => \'msProductOption\',
                \'on\' => "`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'",
            ];
            $joinedOptions[] = $option;
        }

        $index = isset($operator) && in_array(strtolower($operator), [\'or\', \'and\'], true)
            ? sprintf(\'%s:%s\', strtoupper($operator), $key)
            : $key;
        $where[$index] = $value;
    }
}

// Add sort by options
if (!empty($scriptProperties[\'sortbyOptions\'])) {
    $sorts = array_map(\'trim\', explode(\',\', $scriptProperties[\'sortbyOptions\']));
    foreach ($sorts as $sort) {
        $sort = explode(\':\', $sort);
        $option = $sort[0];
        if (preg_match("#\\b{$option}\\b#", $scriptProperties[\'sortby\'], $matches)) {
            $type = \'string\';
            if (isset($sort[1])) {
                $type = $sort[1];
            }
            switch ($type) {
                case \'number\':
                case \'decimal\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS DECIMAL(13,3))";
                    break;
                case \'int\':
                case \'integer\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS UNSIGNED INTEGER)";
                    break;
                case \'date\':
                case \'datetime\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS DATETIME)";
                    break;
                default:
                    $sortbyOptions = "`{$option}`.`value`";
                    break;
            }
            $scriptProperties[\'sortby\'] = preg_replace("#\\b{$option}\\b#", $sortbyOptions, $scriptProperties[\'sortby\']);
            $groupby[] = "`{$option}`.value";
        }

        if (!in_array($option, $joinedOptions)) {
            $leftJoin[$option] = [
                \'class\' => \'msProductOption\',
                \'on\' => "`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'",
            ];
            $joinedOptions[] = $option;
        }
    }
}

$default = [
    \'class\' => \'msProduct\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'innerJoin\' => $innerJoin,
    \'select\' => $select,
    \'sortby\' => \'msProduct.id\',
    \'sortdir\' => \'ASC\',
    \'groupby\' => implode(\', \', $groupby),
    \'return\' => \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
];
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);
$rows = $pdoFetch->run();

if ($scriptProperties[\'return\'] == \'json\') {
    $rows = json_decode($rows, true);
}

// Process rows
$output = $additionalPlaceholders = [];
if (!empty($rows) && is_array($rows)) {
    $c = $modx->newQuery(
        \'modPluginEvent\',
        [\'event:IN\' => [\'msOnGetProductPrice\', \'msOnGetProductWeight\', \'msOnGetProductFields\']]
    );
    $c->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');
    $c->where(\'modPlugin.disabled = 0\');

    $modifications = $modx->getOption(\'ms2_price_snippet\', null, false, true) ||
        $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $c);
    if ($modifications) {
        /** @var msProductData $product */
        $product = $modx->newObject(\'msProductData\');
    }
    $pdoFetch->addTime(\'Checked the active modifiers\');

    // Adding extra parameters into special place so we can put them in a results
    /** @var modSnippet $snippet */
    $properties = [];
    if (isset($this) && $this instanceof modSnippet && $this->get(\'properties\')) {
        $properties = $this->get(\'properties\');
    } elseif ($snippet = $modx->getObject(\'modSnippet\', [\'name\' => \'msProduct\'])) {
        $properties = $snippet->get(\'properties\');
    }
    if (!empty($properties)) {
        foreach ($scriptProperties as $k => $v) {
            if (!isset($properties[$k])) {
                $additionalPlaceholders[$k] = $v;
            }
        }
    }
    $opt_time = 0;
    foreach ($rows as $k => $row) {
        if ($modifications) {
            $product->fromArray($row, \'\', true, true);
            $tmp = $row[\'price\'];
            $row[\'price\'] = $product->getPrice($row);
            $row[\'weight\'] = $product->getWeight($row);
            // A discount here, so we should replace old price
            if ($row[\'price\'] < $tmp) {
                $row[\'old_price\'] = $tmp;
            }
            $row = $product->modifyFields($row);
        }
        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);
        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);
        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);
        $row[\'idx\'] = $pdoFetch->idx++;

        $opt_time_start = microtime(true);
        $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $row[\'id\']]);
        $rows[$k] = $row = array_merge($additionalPlaceholders, $row, $options);
        $opt_time += microtime(true) - $opt_time_start;

        $tpl = $pdoFetch->defineChunk($row);
        $output[] = $pdoFetch->getChunk($tpl, $row);
    }
    $pdoFetch->addTime(\'Time to load products options\', $opt_time);
}

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="msProductsLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

if ($scriptProperties[\'return\'] == \'json\') {
    $rows = json_encode($rows);
}

// Return output
if (is_string($rows)) {
    $modx->setPlaceholder(\'msProducts.log\', $log);
    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $rows);
    } else {
        return $rows;
    }
} elseif (!empty($toSeparatePlaceholders)) {
    $output[\'log\'] = $log;
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
} else {
    if (empty($outputSeparator)) {
        $outputSeparator = "\\n";
    }
    $output[\'log\'] = $log;
    $output = implode($outputSeparator, $output);

    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {
        $output = $pdoFetch->getChunk(
            $tplWrapper,
            array_merge($additionalPlaceholders, [\'output\' => $output, \'scriptProperties\' => $scriptProperties])
        );
    }

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
}',
    ),
  ),
  '90f0525544a9e5735552e63394bc92cb' => 
  array (
    'criteria' => 
    array (
      'name' => 'msCart',
    ),
    'object' => 
    array (
      'id' => 157,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msCart',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msCart\');
$cart = $miniShop2->cart->get();
$status = $miniShop2->cart->status();

// Do not show empty cart when displaying order details
if (!empty($_GET[\'msorder\'])) {
    return \'\';
} elseif (empty($status[\'total_count\'])) {
    return $pdoFetch->getChunk($tpl);
}

// Select cart products
$where = [
    \'msProduct.id:IN\' => [],
];
foreach ($cart as $entry) {
    $where[\'msProduct.id:IN\'][] = $entry[\'id\'];
}
$where[\'msProduct.id:IN\'] = array_unique($where[\'msProduct.id:IN\']);

// Include products properties
$leftJoin = [
    \'Data\' => [
        \'class\' => \'msProductData\',
    ],
    \'Vendor\' => [
        \'class\' => \'msVendor\',
        \'on\' => \'Data.vendor = Vendor.id\',
    ],
];

// Select columns
$select = [
    \'msProduct\' => !empty($includeContent)
        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')
        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),
    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', [\'id\'], true),
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),
];

// Include products thumbnails
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));
    if (!empty($thumbs[0])) {
        foreach ($thumbs as $thumb) {
            $leftJoin[$thumb] = [
                \'class\' => \'msProductFile\',
                \'on\' => "`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%/{$thumb}/%\' AND `{$thumb}`.`rank` = 0",
            ];
            $select[$thumb] = "`{$thumb}`.url as \'{$thumb}\'";
        }
        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'</b>.\');
    }
}

// Add user parameters
foreach ([\'where\', \'leftJoin\', \'select\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

$default = [
    \'class\' => \'msProduct\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'select\' => $select,
    \'sortby\' => \'msProduct.id\',
    \'sortdir\' => \'ASC\',
    \'groupby\' => \'msProduct.id\',
    \'limit\' => 0,
    \'return\' => \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
];
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);

$tmp = $pdoFetch->run();
$rows = [];
foreach ($tmp as $row) {
    $rows[$row[\'id\']] = $row;
}

// Process products in cart
$products = [];
$total = [\'count\' => 0, \'weight\' => 0, \'cost\' => 0, \'discount\' => 0];
foreach ($cart as $key => $entry) {
    if (!isset($rows[$entry[\'id\']])) {
        continue;
    }
    $product = $rows[$entry[\'id\']];

    $product[\'key\'] = $key;
    $product[\'count\'] = $entry[\'count\'];
    $old_price = $product[\'old_price\'];
    if ($product[\'price\'] > $entry[\'price\'] && empty($product[\'old_price\'])) {
        $old_price = $product[\'price\'];
    }
    $discount_price = $old_price > 0 ? $old_price - $entry[\'price\'] : 0;

    $product[\'old_price\'] = $miniShop2->formatPrice($old_price);
    $product[\'price\'] = $miniShop2->formatPrice($entry[\'price\']);
    $product[\'weight\'] = $miniShop2->formatWeight($entry[\'weight\']);
    $product[\'cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $entry[\'price\']);
    $product[\'discount_price\'] = $miniShop2->formatPrice($discount_price);
    $product[\'discount_cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $discount_price);

    // Additional properties of product in cart
    if (!empty($entry[\'options\']) && is_array($entry[\'options\'])) {
        $product[\'options\'] = $entry[\'options\'];
        foreach ($entry[\'options\'] as $option => $value) {
            $product[\'option.\' . $option] = $value;
        }
    }

    // Add option values
    $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $product[\'id\']]);
    $products[] = array_merge($product, $options);

    // Count total
    $total[\'count\'] += $entry[\'count\'];
    $total[\'cost\'] += $entry[\'count\'] * $entry[\'price\'];
    $total[\'weight\'] += $entry[\'count\'] * $entry[\'weight\'];
    $total[\'discount\'] += $entry[\'count\'] * $discount_price;
}
$total[\'cost\'] = $miniShop2->formatPrice($total[\'cost\']);
$total[\'discount\'] = $miniShop2->formatPrice($total[\'discount\']);
$total[\'weight\'] = $miniShop2->formatWeight($total[\'weight\']);

$output = $pdoFetch->getChunk($tpl, [
    \'total\' => $total,
    \'products\' => $products,
    \'scriptProperties\' => $scriptProperties
]);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $output .= \'<pre class="msCartLog">\' . print_r($pdoFetch->getTime(), true) . \'</pre>\';
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
      'locked' => 0,
      'properties' => 'a:5:{s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:10:"tpl.msCart";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"includeTVs";a:7:{s:4:"name";s:10:"includeTVs";s:4:"desc";s:19:"ms2_prop_includeTVs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"includeThumbs";a:7:{s:4:"name";s:13:"includeThumbs";s:4:"desc";s:22:"ms2_prop_includeThumbs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"toPlaceholder";a:7:{s:4:"name";s:13:"toPlaceholder";s:4:"desc";s:22:"ms2_prop_toPlaceholder";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"showLog";a:7:{s:4:"name";s:7:"showLog";s:4:"desc";s:16:"ms2_prop_showLog";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_cart.php',
      'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msCart\');
$cart = $miniShop2->cart->get();
$status = $miniShop2->cart->status();

// Do not show empty cart when displaying order details
if (!empty($_GET[\'msorder\'])) {
    return \'\';
} elseif (empty($status[\'total_count\'])) {
    return $pdoFetch->getChunk($tpl);
}

// Select cart products
$where = [
    \'msProduct.id:IN\' => [],
];
foreach ($cart as $entry) {
    $where[\'msProduct.id:IN\'][] = $entry[\'id\'];
}
$where[\'msProduct.id:IN\'] = array_unique($where[\'msProduct.id:IN\']);

// Include products properties
$leftJoin = [
    \'Data\' => [
        \'class\' => \'msProductData\',
    ],
    \'Vendor\' => [
        \'class\' => \'msVendor\',
        \'on\' => \'Data.vendor = Vendor.id\',
    ],
];

// Select columns
$select = [
    \'msProduct\' => !empty($includeContent)
        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')
        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),
    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', [\'id\'], true),
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),
];

// Include products thumbnails
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));
    if (!empty($thumbs[0])) {
        foreach ($thumbs as $thumb) {
            $leftJoin[$thumb] = [
                \'class\' => \'msProductFile\',
                \'on\' => "`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%/{$thumb}/%\' AND `{$thumb}`.`rank` = 0",
            ];
            $select[$thumb] = "`{$thumb}`.url as \'{$thumb}\'";
        }
        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'</b>.\');
    }
}

// Add user parameters
foreach ([\'where\', \'leftJoin\', \'select\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

$default = [
    \'class\' => \'msProduct\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'select\' => $select,
    \'sortby\' => \'msProduct.id\',
    \'sortdir\' => \'ASC\',
    \'groupby\' => \'msProduct.id\',
    \'limit\' => 0,
    \'return\' => \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
];
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);

$tmp = $pdoFetch->run();
$rows = [];
foreach ($tmp as $row) {
    $rows[$row[\'id\']] = $row;
}

// Process products in cart
$products = [];
$total = [\'count\' => 0, \'weight\' => 0, \'cost\' => 0, \'discount\' => 0];
foreach ($cart as $key => $entry) {
    if (!isset($rows[$entry[\'id\']])) {
        continue;
    }
    $product = $rows[$entry[\'id\']];

    $product[\'key\'] = $key;
    $product[\'count\'] = $entry[\'count\'];
    $old_price = $product[\'old_price\'];
    if ($product[\'price\'] > $entry[\'price\'] && empty($product[\'old_price\'])) {
        $old_price = $product[\'price\'];
    }
    $discount_price = $old_price > 0 ? $old_price - $entry[\'price\'] : 0;

    $product[\'old_price\'] = $miniShop2->formatPrice($old_price);
    $product[\'price\'] = $miniShop2->formatPrice($entry[\'price\']);
    $product[\'weight\'] = $miniShop2->formatWeight($entry[\'weight\']);
    $product[\'cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $entry[\'price\']);
    $product[\'discount_price\'] = $miniShop2->formatPrice($discount_price);
    $product[\'discount_cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $discount_price);

    // Additional properties of product in cart
    if (!empty($entry[\'options\']) && is_array($entry[\'options\'])) {
        $product[\'options\'] = $entry[\'options\'];
        foreach ($entry[\'options\'] as $option => $value) {
            $product[\'option.\' . $option] = $value;
        }
    }

    // Add option values
    $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $product[\'id\']]);
    $products[] = array_merge($product, $options);

    // Count total
    $total[\'count\'] += $entry[\'count\'];
    $total[\'cost\'] += $entry[\'count\'] * $entry[\'price\'];
    $total[\'weight\'] += $entry[\'count\'] * $entry[\'weight\'];
    $total[\'discount\'] += $entry[\'count\'] * $discount_price;
}
$total[\'cost\'] = $miniShop2->formatPrice($total[\'cost\']);
$total[\'discount\'] = $miniShop2->formatPrice($total[\'discount\']);
$total[\'weight\'] = $miniShop2->formatWeight($total[\'weight\']);

$output = $pdoFetch->getChunk($tpl, [
    \'total\' => $total,
    \'products\' => $products,
    \'scriptProperties\' => $scriptProperties
]);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $output .= \'<pre class="msCartLog">\' . print_r($pdoFetch->getTime(), true) . \'</pre>\';
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
    ),
  ),
  '6b67b04af31e96c8a633587464b8be76' => 
  array (
    'criteria' => 
    array (
      'name' => 'msMiniCart',
    ),
    'object' => 
    array (
      'id' => 158,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msMiniCart',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msMiniCart\');

$cart = $miniShop2->cart->status();
$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);
$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);
$cart[\'total_discount\'] = $miniShop2->formatPrice($cart[\'total_discount\']);
$cart[\'scriptProperties\'] = $scriptProperties;
return $miniShop2->pdoTools->getChunk($tpl, $cart);',
      'locked' => 0,
      'properties' => 'a:1:{s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:14:"tpl.msMiniCart";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_minicart.php',
      'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msMiniCart\');

$cart = $miniShop2->cart->status();
$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);
$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);
$cart[\'total_discount\'] = $miniShop2->formatPrice($cart[\'total_discount\']);
$cart[\'scriptProperties\'] = $scriptProperties;
return $miniShop2->pdoTools->getChunk($tpl, $cart);',
    ),
  ),
  '6beeb1d8ba7993e83dcf1f63e6603d48' => 
  array (
    'criteria' => 
    array (
      'name' => 'msGallery',
    ),
    'object' => 
    array (
      'id' => 159,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msGallery',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components/minishop2/img/mgr/extensions/\', true);
$limit = $modx->getOption(\'limit\', $scriptProperties, 0);
$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGallery\');

/** @var msProduct $product */
$product = !empty($product) && $product != $modx->resource->id
    ? $modx->getObject(\'msProduct\', [\'id\' => $product])
    : $modx->resource;
if (!($product instanceof msProduct)) {
    return "[msGallery] The resource with id = {$product->id} is not instance of msProduct.";
}

$where = [
    \'product_id\' => $product->id,
    \'parent\' => 0,
];
if (!empty($filetype)) {
    $where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));
}
if (empty($showInactive)) {
    $where[\'active\'] = 1;
}
$select = [
    \'msProductFile\' => \'*\',
];

// Add user parameters
foreach ([\'where\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');
$default = [
    \'class\' => \'msProductFile\',
    \'where\' => $where,
    \'select\' => $select,
    \'limit\' => $limit,
    \'sortby\' => \'`rank`\',
    \'sortdir\' => \'ASC\',
    \'fastMode\' => false,
    \'return\' => \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
];
if ($scriptProperties[\'return\'] === \'tpl\') {
    unset($scriptProperties[\'return\']);
}
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);
$rows = $pdoFetch->run();
if ($scriptProperties[\'return\'] === \'sql\' || $scriptProperties[\'return\'] === \'json\') {
    return $rows;
}
$pdoFetch->addTime(\'Fetching thumbnails\');

$resolution = [];
/** @var msProductData $data */
if ($data = $product->getOne(\'Data\')) {
    if ($data->initializeMediaSource()) {
        $properties = $data->mediaSource->getProperties();
        if (isset($properties[\'thumbnails\'][\'value\'])) {
            $fileTypes = json_decode($properties[\'thumbnails\'][\'value\'], true);
            foreach ($fileTypes as $k => $v) {
                if (!is_numeric($k)) {
                    $resolution[] = $k;
                } elseif (!empty($v[\'name\'])) {
                    $resolution[] = $v[\'name\'];
                } else {
                    $resolution[] = @$v[\'w\'] . \'x\' . @$v[\'h\'];
                }
            }
        }
    }
}

// Processing rows
$files = [];
foreach ($rows as $row) {
    if (isset($row[\'type\']) && $row[\'type\'] == \'image\') {
        $c = $modx->newQuery(\'msProductFile\', [\'parent\' => $row[\'id\']]);
        $c->select(\'product_id,url\');
        $tstart = microtime(true);
        if ($c->prepare() && $c->stmt->execute()) {
            $modx->queryTime += microtime(true) - $tstart;
            $modx->executedQueries++;
            while ($tmp = $c->stmt->fetch(PDO::FETCH_ASSOC)) {
                if (preg_match("#/{$tmp[\'product_id\']}/(.*?)/#", $tmp[\'url\'], $size)) {
                    $row[$size[1]] = $tmp[\'url\'];
                }
            }
        }
    } elseif (isset($row[\'type\'])) {
        $row[\'thumbnail\'] = file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\')
            ? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'] . \'.png\'
            : MODX_ASSETS_URL . $extensionsDir . \'other.png\';
        foreach ($resolution as $v) {
            $row[$v] = $row[\'thumbnail\'];
        }
    }

    $files[] = $row;
}

if ($scriptProperties[\'return\'] === \'data\') {
    return $files;
}

$output = $pdoFetch->getChunk($tpl, [
    \'files\' => $files,
    \'scriptProperties\' => $scriptProperties
]);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $output .= \'<pre class="msGalleryLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
      'locked' => 0,
      'properties' => 'a:11:{s:7:"product";a:7:{s:4:"name";s:7:"product";s:4:"desc";s:16:"ms2_prop_product";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:13:"tpl.msGallery";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"limit";a:7:{s:4:"name";s:5:"limit";s:4:"desc";s:14:"ms2_prop_limit";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"offset";a:7:{s:4:"name";s:6:"offset";s:4:"desc";s:15:"ms2_prop_offset";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"sortby";a:7:{s:4:"name";s:6:"sortby";s:4:"desc";s:15:"ms2_prop_sortby";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:4:"rank";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"sortdir";a:7:{s:4:"name";s:7:"sortdir";s:4:"desc";s:16:"ms2_prop_sortdir";s:4:"type";s:4:"list";s:7:"options";a:2:{i:0;a:2:{s:4:"text";s:3:"ASC";s:5:"value";s:3:"ASC";}i:1;a:2:{s:4:"text";s:4:"DESC";s:5:"value";s:4:"DESC";}}s:5:"value";s:3:"ASC";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"toPlaceholder";a:7:{s:4:"name";s:13:"toPlaceholder";s:4:"desc";s:22:"ms2_prop_toPlaceholder";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"showLog";a:7:{s:4:"name";s:7:"showLog";s:4:"desc";s:16:"ms2_prop_showLog";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"where";a:7:{s:4:"name";s:5:"where";s:4:"desc";s:14:"ms2_prop_where";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"filetype";a:7:{s:4:"name";s:8:"filetype";s:4:"desc";s:17:"ms2_prop_filetype";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"return";a:7:{s:4:"name";s:6:"return";s:4:"desc";s:15:"ms2_prop_return";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:3:"tpl";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_gallery.php',
      'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components/minishop2/img/mgr/extensions/\', true);
$limit = $modx->getOption(\'limit\', $scriptProperties, 0);
$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGallery\');

/** @var msProduct $product */
$product = !empty($product) && $product != $modx->resource->id
    ? $modx->getObject(\'msProduct\', [\'id\' => $product])
    : $modx->resource;
if (!($product instanceof msProduct)) {
    return "[msGallery] The resource with id = {$product->id} is not instance of msProduct.";
}

$where = [
    \'product_id\' => $product->id,
    \'parent\' => 0,
];
if (!empty($filetype)) {
    $where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));
}
if (empty($showInactive)) {
    $where[\'active\'] = 1;
}
$select = [
    \'msProductFile\' => \'*\',
];

// Add user parameters
foreach ([\'where\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');
$default = [
    \'class\' => \'msProductFile\',
    \'where\' => $where,
    \'select\' => $select,
    \'limit\' => $limit,
    \'sortby\' => \'`rank`\',
    \'sortdir\' => \'ASC\',
    \'fastMode\' => false,
    \'return\' => \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
];
if ($scriptProperties[\'return\'] === \'tpl\') {
    unset($scriptProperties[\'return\']);
}
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);
$rows = $pdoFetch->run();
if ($scriptProperties[\'return\'] === \'sql\' || $scriptProperties[\'return\'] === \'json\') {
    return $rows;
}
$pdoFetch->addTime(\'Fetching thumbnails\');

$resolution = [];
/** @var msProductData $data */
if ($data = $product->getOne(\'Data\')) {
    if ($data->initializeMediaSource()) {
        $properties = $data->mediaSource->getProperties();
        if (isset($properties[\'thumbnails\'][\'value\'])) {
            $fileTypes = json_decode($properties[\'thumbnails\'][\'value\'], true);
            foreach ($fileTypes as $k => $v) {
                if (!is_numeric($k)) {
                    $resolution[] = $k;
                } elseif (!empty($v[\'name\'])) {
                    $resolution[] = $v[\'name\'];
                } else {
                    $resolution[] = @$v[\'w\'] . \'x\' . @$v[\'h\'];
                }
            }
        }
    }
}

// Processing rows
$files = [];
foreach ($rows as $row) {
    if (isset($row[\'type\']) && $row[\'type\'] == \'image\') {
        $c = $modx->newQuery(\'msProductFile\', [\'parent\' => $row[\'id\']]);
        $c->select(\'product_id,url\');
        $tstart = microtime(true);
        if ($c->prepare() && $c->stmt->execute()) {
            $modx->queryTime += microtime(true) - $tstart;
            $modx->executedQueries++;
            while ($tmp = $c->stmt->fetch(PDO::FETCH_ASSOC)) {
                if (preg_match("#/{$tmp[\'product_id\']}/(.*?)/#", $tmp[\'url\'], $size)) {
                    $row[$size[1]] = $tmp[\'url\'];
                }
            }
        }
    } elseif (isset($row[\'type\'])) {
        $row[\'thumbnail\'] = file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\')
            ? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'] . \'.png\'
            : MODX_ASSETS_URL . $extensionsDir . \'other.png\';
        foreach ($resolution as $v) {
            $row[$v] = $row[\'thumbnail\'];
        }
    }

    $files[] = $row;
}

if ($scriptProperties[\'return\'] === \'data\') {
    return $files;
}

$output = $pdoFetch->getChunk($tpl, [
    \'files\' => $files,
    \'scriptProperties\' => $scriptProperties
]);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $output .= \'<pre class="msGalleryLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
    ),
  ),
  '7c1693ccf37b2f84d04b9016a5512c96' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOptions',
    ),
    'object' => 
    array (
      'id' => 160,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msOptions',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');
if (!empty($input) && empty($product)) {
    $product = $input;
}
if (!empty($name) && empty($options)) {
    $options = $name;
}

$product = !empty($product) && $product != $modx->resource->id
    ? $modx->getObject(\'msProduct\', [\'id\' => $product])
    : $modx->resource;
if (!($product instanceof msProduct)) {
    return "[msOptions] The resource with id = {$product->id} is not instance of msProduct.";
}

$names = array_map(\'trim\', explode(\',\', $options));
$options = [];
foreach ($names as $name) {
    if (!empty($name) && $option = $product->get($name)) {
        if (!is_array($option)) {
            $option = [$option];
        }
        if (isset($option[0]) and (trim($option[0]) != \'\')) {
            $options[$name] = $option;
        }
    }
}

$options = $miniShop2->sortOptionValues($options, $scriptProperties[\'sortOptionValues\']);

/** @var pdoTools $pdoTools */
$pdoTools = $modx->getService(\'pdoTools\');

return $pdoTools->getChunk($tpl, [
    \'id\' => $product->id,
    \'options\' => $options,
    \'scriptProperties\' => $scriptProperties
]);',
      'locked' => 0,
      'properties' => 'a:4:{s:7:"product";a:7:{s:4:"name";s:7:"product";s:4:"desc";s:16:"ms2_prop_product";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"options";a:7:{s:4:"name";s:7:"options";s:4:"desc";s:16:"ms2_prop_options";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:16:"sortOptionValues";a:7:{s:4:"name";s:16:"sortOptionValues";s:4:"desc";s:25:"ms2_prop_sortOptionValues";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:13:"tpl.msOptions";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_options.php',
      'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');
if (!empty($input) && empty($product)) {
    $product = $input;
}
if (!empty($name) && empty($options)) {
    $options = $name;
}

$product = !empty($product) && $product != $modx->resource->id
    ? $modx->getObject(\'msProduct\', [\'id\' => $product])
    : $modx->resource;
if (!($product instanceof msProduct)) {
    return "[msOptions] The resource with id = {$product->id} is not instance of msProduct.";
}

$names = array_map(\'trim\', explode(\',\', $options));
$options = [];
foreach ($names as $name) {
    if (!empty($name) && $option = $product->get($name)) {
        if (!is_array($option)) {
            $option = [$option];
        }
        if (isset($option[0]) and (trim($option[0]) != \'\')) {
            $options[$name] = $option;
        }
    }
}

$options = $miniShop2->sortOptionValues($options, $scriptProperties[\'sortOptionValues\']);

/** @var pdoTools $pdoTools */
$pdoTools = $modx->getService(\'pdoTools\');

return $pdoTools->getChunk($tpl, [
    \'id\' => $product->id,
    \'options\' => $options,
    \'scriptProperties\' => $scriptProperties
]);',
    ),
  ),
  '5fff4289c9dff9582f21072b1efa9f64' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOrder',
    ),
    'object' => 
    array (
      'id' => 161,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msOrder',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOrder\');

// Do not show order form when displaying details of existing order
if (!empty($_GET[\'msorder\'])) {
    return \'\';
}

$cart = $miniShop2->cart->get();
$order = $miniShop2->order->get();
$status = $miniShop2->cart->status();
if (empty($status[\'total_count\'])) {
    return \'\';
}
$cost = $miniShop2->order->getCost();
$order[\'cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cost\']);
$order[\'cart_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cart_cost\']);
$order[\'delivery_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'delivery_cost\']);
$order[\'discount_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'discount_cost\']);

// We need only active methods
$where = [
    \'msDelivery.active\' => true,
    \'msPayment.active\' => true,
];

// Join payments to deliveries
$leftJoin = [
    \'Payments\' => [
        \'class\' => \'msDeliveryMember\',
    ],
    \'msPayment\' => [
        \'class\' => \'msPayment\',
        \'on\' => \'Payments.payment_id = msPayment.id\',
    ],
];

// Select columns
$select = [
    \'msDelivery\' => $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\'),
    \'msPayment\' => $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\'),
];

// Add user parameters
foreach ([\'where\', \'leftJoin\', \'select\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Default parameters
$default = [
    \'class\' => \'msDelivery\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'select\' => $select,
    \'sortby\' => \'msDelivery.rank asc, msPayment.rank\',
    \'sortdir\' => \'asc\',
    \'limit\' => 0,
    \'return\' => \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
];
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);
$rows = $pdoFetch->run();

$deliveries = $payments = [];
foreach ($rows as $row) {
    $delivery = [];
    $payment = [];
    foreach ($row as $key => $value) {
        if (strpos($key, \'delivery_\') === 0) {
            $delivery[substr($key, 9)] = $value;
        } else {
            $payment[substr($key, 8)] = $value;
        }
    }

    if (!isset($deliveries[$delivery[\'id\']])) {
        $delivery[\'payments\'] = [];
        $deliveries[$delivery[\'id\']] = $delivery;
    }
    if (!empty($payment[\'id\'])) {
        $deliveries[$delivery[\'id\']][\'payments\'][] = (int)$payment[\'id\'];
        if (!isset($payments[$payment[\'id\']])) {
            $payments[$payment[\'id\']] = $payment;
        }
    }
}

$form = [];
// Get user data
$profile = [];
if ($modx->user->isAuthenticated($modx->context->key)) {
    $profile = array_merge($modx->user->Profile->toArray(), $modx->user->toArray());
}
$fields = [
    \'receiver\' => \'fullname\',
    \'phone\' => \'phone\',
    \'email\' => \'email\',
    \'comment\' => \'extended[comment]\',
    \'index\' => \'zip\',
    \'country\' => \'country\',
    \'region\' => \'state\',
    \'city\' => \'city\',
    \'street\' => \'address\',
    \'building\' => \'extended[building]\',
    \'room\' => \'extended[room]\',
    \'entrance\' => \'extended[entrance]\',
    \'floor\' => \'extended[floor]\',
    \'text_address\' => \'extended[address]\',
];
// Apply custom fields
if (!empty($userFields)) {
    if (!is_array($userFields)) {
        $userFields = json_decode($userFields, true);
    }
    if (is_array($userFields)) {
        $fields = array_merge($fields, $userFields);
    }
}
// Set user fields
foreach ($fields as $key => $value) {
    if (!empty($profile) && !empty($value)) {
        if (strpos($value, \'extended\') !== false) {
            $tmp = substr($value, 9, -1);
            $value = !empty($profile[\'extended\'][$tmp])
                ? $profile[\'extended\'][$tmp]
                : \'\';
        } else {
            $value = $profile[$value];
        }
        $response = $miniShop2->order->add($key, $value);
        if ($response[\'success\'] && !empty($response[\'data\'][$key])) {
            $form[$key] = $response[\'data\'][$key];
        }
    }
    if (empty($form[$key]) && !empty($order[$key])) {
        $form[$key] = $order[$key];
        unset($order[$key]);
    }
}

// Check for errors
$errors = [];
if (!empty($_POST)) {
    $response = $miniShop2->order->getDeliveryRequiresFields();
    if ($requires = $response[\'data\'][\'requires\']) {
        foreach ($_POST as $field => $val) {
            $validated = $miniShop2->order->validate($field, $val);
            if ((in_array($field, $requires) && empty($validated))) {
                $errors[] = $field;
            }
        }
    }
}

$output = $pdoFetch->getChunk($tpl, [
    \'order\' => $order,
    \'form\' => $form,
    \'deliveries\' => $deliveries,
    \'payments\' => $payments,
    \'errors\' => $errors,
    \'scriptProperties\' => $scriptProperties
]);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $output .= \'<pre class="msOrderLog">\' . print_r($pdoFetch->getTime(), true) . \'</pre>\';
}

return $output;',
      'locked' => 0,
      'properties' => 'a:3:{s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:11:"tpl.msOrder";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"userFields";a:7:{s:4:"name";s:10:"userFields";s:4:"desc";s:19:"ms2_prop_userFields";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"showLog";a:7:{s:4:"name";s:7:"showLog";s:4:"desc";s:16:"ms2_prop_showLog";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_order.php',
      'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOrder\');

// Do not show order form when displaying details of existing order
if (!empty($_GET[\'msorder\'])) {
    return \'\';
}

$cart = $miniShop2->cart->get();
$order = $miniShop2->order->get();
$status = $miniShop2->cart->status();
if (empty($status[\'total_count\'])) {
    return \'\';
}
$cost = $miniShop2->order->getCost();
$order[\'cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cost\']);
$order[\'cart_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cart_cost\']);
$order[\'delivery_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'delivery_cost\']);
$order[\'discount_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'discount_cost\']);

// We need only active methods
$where = [
    \'msDelivery.active\' => true,
    \'msPayment.active\' => true,
];

// Join payments to deliveries
$leftJoin = [
    \'Payments\' => [
        \'class\' => \'msDeliveryMember\',
    ],
    \'msPayment\' => [
        \'class\' => \'msPayment\',
        \'on\' => \'Payments.payment_id = msPayment.id\',
    ],
];

// Select columns
$select = [
    \'msDelivery\' => $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\'),
    \'msPayment\' => $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\'),
];

// Add user parameters
foreach ([\'where\', \'leftJoin\', \'select\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Default parameters
$default = [
    \'class\' => \'msDelivery\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'select\' => $select,
    \'sortby\' => \'msDelivery.rank asc, msPayment.rank\',
    \'sortdir\' => \'asc\',
    \'limit\' => 0,
    \'return\' => \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
];
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);
$rows = $pdoFetch->run();

$deliveries = $payments = [];
foreach ($rows as $row) {
    $delivery = [];
    $payment = [];
    foreach ($row as $key => $value) {
        if (strpos($key, \'delivery_\') === 0) {
            $delivery[substr($key, 9)] = $value;
        } else {
            $payment[substr($key, 8)] = $value;
        }
    }

    if (!isset($deliveries[$delivery[\'id\']])) {
        $delivery[\'payments\'] = [];
        $deliveries[$delivery[\'id\']] = $delivery;
    }
    if (!empty($payment[\'id\'])) {
        $deliveries[$delivery[\'id\']][\'payments\'][] = (int)$payment[\'id\'];
        if (!isset($payments[$payment[\'id\']])) {
            $payments[$payment[\'id\']] = $payment;
        }
    }
}

$form = [];
// Get user data
$profile = [];
if ($modx->user->isAuthenticated($modx->context->key)) {
    $profile = array_merge($modx->user->Profile->toArray(), $modx->user->toArray());
}
$fields = [
    \'receiver\' => \'fullname\',
    \'phone\' => \'phone\',
    \'email\' => \'email\',
    \'comment\' => \'extended[comment]\',
    \'index\' => \'zip\',
    \'country\' => \'country\',
    \'region\' => \'state\',
    \'city\' => \'city\',
    \'street\' => \'address\',
    \'building\' => \'extended[building]\',
    \'room\' => \'extended[room]\',
    \'entrance\' => \'extended[entrance]\',
    \'floor\' => \'extended[floor]\',
    \'text_address\' => \'extended[address]\',
];
// Apply custom fields
if (!empty($userFields)) {
    if (!is_array($userFields)) {
        $userFields = json_decode($userFields, true);
    }
    if (is_array($userFields)) {
        $fields = array_merge($fields, $userFields);
    }
}
// Set user fields
foreach ($fields as $key => $value) {
    if (!empty($profile) && !empty($value)) {
        if (strpos($value, \'extended\') !== false) {
            $tmp = substr($value, 9, -1);
            $value = !empty($profile[\'extended\'][$tmp])
                ? $profile[\'extended\'][$tmp]
                : \'\';
        } else {
            $value = $profile[$value];
        }
        $response = $miniShop2->order->add($key, $value);
        if ($response[\'success\'] && !empty($response[\'data\'][$key])) {
            $form[$key] = $response[\'data\'][$key];
        }
    }
    if (empty($form[$key]) && !empty($order[$key])) {
        $form[$key] = $order[$key];
        unset($order[$key]);
    }
}

// Check for errors
$errors = [];
if (!empty($_POST)) {
    $response = $miniShop2->order->getDeliveryRequiresFields();
    if ($requires = $response[\'data\'][\'requires\']) {
        foreach ($_POST as $field => $val) {
            $validated = $miniShop2->order->validate($field, $val);
            if ((in_array($field, $requires) && empty($validated))) {
                $errors[] = $field;
            }
        }
    }
}

$output = $pdoFetch->getChunk($tpl, [
    \'order\' => $order,
    \'form\' => $form,
    \'deliveries\' => $deliveries,
    \'payments\' => $payments,
    \'errors\' => $errors,
    \'scriptProperties\' => $scriptProperties
]);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $output .= \'<pre class="msOrderLog">\' . print_r($pdoFetch->getTime(), true) . \'</pre>\';
}

return $output;',
    ),
  ),
  '19183dc543709610ea2e522dcd3e4a31' => 
  array (
    'criteria' => 
    array (
      'name' => 'msGetOrder',
    ),
    'object' => 
    array (
      'id' => 162,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msGetOrder',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGetOrder\');

if (empty($id) && !empty($_GET[\'msorder\'])) {
    $id = (int)$_GET[\'msorder\'];
}
if (empty($id)) {
    return;
}
/** @var msOrder $order */
if (!$order = $modx->getObject(\'msOrder\', compact(\'id\'))) {
    return $modx->lexicon(\'ms2_err_order_nf\');
}
$canView = (!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) ||
    $order->get(\'user_id\') == $modx->user->id || $modx->user->hasSessionContext(
        \'mgr\'
    ) || !empty($scriptProperties[\'id\']);
if (!$canView) {
    return \'\';
}

// Select ordered products
$where = [
    \'msOrderProduct.order_id\' => $id,
];

// Include products properties
$leftJoin = [
    \'msProduct\' => [
        \'class\' => \'msProduct\',
        \'on\' => \'msProduct.id = msOrderProduct.product_id\',
    ],
    \'Data\' => [
        \'class\' => \'msProductData\',
        \'on\' => \'msProduct.id = Data.id\',
    ],
    \'Vendor\' => [
        \'class\' => \'msVendor\',
        \'on\' => \'Data.vendor = Vendor.id\',
    ],
];

// Select columns
$select = [
    \'msProduct\' => !empty($includeContent)
        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')
        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),
    \'Data\' => $modx->getSelectColumns(
            \'msProductData\',
            \'Data\',
            \'\',
            [\'id\'],
            true
        ) . \',`Data`.`price` as `original_price`\',
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),
    \'OrderProduct\' => $modx->getSelectColumns(
            \'msOrderProduct\',
            \'msOrderProduct\',
            \'\',
            [\'id\'],
            true
        ) . \', `msOrderProduct`.`id` as `order_product_id`\',
];

// Include products thumbnails
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));
    if (!empty($thumbs[0])) {
        foreach ($thumbs as $thumb) {
            $leftJoin[$thumb] = [
                \'class\' => \'msProductFile\',
                \'on\' => "`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%/{$thumb}/%\'",
            ];
            $select[$thumb] = "`{$thumb}`.url as \'{$thumb}\'";
        }
        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'</b>.\');
    }
}

// Add user parameters
foreach ([\'where\', \'leftJoin\', \'select\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Tables for joining
$default = [
    \'class\' => \'msOrderProduct\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'select\' => $select,
    \'joinTVsTo\' => \'msProduct\',
    \'sortby\' => \'msOrderProduct.id\',
    \'sortdir\' => \'asc\',
    \'groupby\' => \'msOrderProduct.id\',
    \'fastMode\' => false,
    \'limit\' => 0,
    \'return\' => \'data\',
    \'decodeJSON\' => true,
    \'nestedChunkPrefix\' => \'minishop2_\',
];
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), true);
$rows = $pdoFetch->run();

$products = [];
$cart_count = 0;
$cart_discount_cost = 0;
foreach ($rows as $product) {
    $old_price = $product[\'original_price\'] > $product[\'price\']
        ? $product[\'original_price\']
        : $product[\'old_price\'];

    $discount_price = $old_price > 0 ? $old_price - $product[\'price\'] : 0;

    $product[\'old_price\'] = $miniShop2->formatPrice($old_price);
    $product[\'price\'] = $miniShop2->formatPrice($product[\'price\']);
    $product[\'cost\'] = $miniShop2->formatPrice($product[\'cost\']);
    $product[\'weight\'] = $miniShop2->formatWeight($product[\'weight\']);
    $product[\'discount_price\'] = $miniShop2->formatPrice($discount_price);
    $product[\'discount_cost\'] = $miniShop2->formatPrice($product[\'count\'] * $discount_price);

    $product[\'id\'] = (int)$product[\'id\'];
    if (empty($product[\'name\'])) {
        $product[\'name\'] = $product[\'pagetitle\'];
    } else {
        $product[\'pagetitle\'] = $product[\'name\'];
    }

    // Additional properties of product
    if (!empty($product[\'options\']) && is_array($product[\'options\'])) {
        foreach ($product[\'options\'] as $option => $value) {
            $product[\'option.\' . $option] = $value;
        }
    }

    // Add option values
    $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $product[\'id\']]);
    $products[] = array_merge($product, $options);

    // Count total
    $cart_count += $product[\'count\'];
    $cart_discount_cost += $product[\'count\'] * $discount_price;
}

$pls = array_merge($scriptProperties, [
    \'order\' => $order->toArray(),
    \'products\' => $products,
    \'user\' => ($tmp = $order->getOne(\'User\'))
        ? array_merge($tmp->getOne(\'Profile\')->toArray(), $tmp->toArray())
        : [],
    \'address\' => ($tmp = $order->getOne(\'Address\'))
        ? $tmp->toArray()
        : [],
    \'delivery\' => ($tmp = $order->getOne(\'Delivery\'))
        ? $tmp->toArray()
        : [],
    \'payment\' => ($payment = $order->getOne(\'Payment\'))
        ? $payment->toArray()
        : [],
    \'total\' => [
        \'cost\' => $miniShop2->formatPrice($order->get(\'cost\')),
        \'cart_cost\' => $miniShop2->formatPrice($order->get(\'cart_cost\')),
        \'delivery_cost\' => $miniShop2->formatPrice($order->get(\'delivery_cost\')),
        \'weight\' => $miniShop2->formatWeight($order->get(\'weight\')),
        \'cart_weight\' => $miniShop2->formatWeight($order->get(\'weight\')),
        \'cart_count\' => $cart_count,
        \'cart_discount\' => $cart_discount_cost
    ],
]);

// add "payment" link
if ($payment and $class = $payment->get(\'class\')) {
    $status = $modx->getOption(\'payStatus\', $scriptProperties, \'1\');
    $status = array_map(\'trim\', explode(\',\', $status));
    if (in_array($order->get(\'status\'), $status)) {
        $miniShop2->loadCustomClasses(\'payment\');
        if (class_exists($class)) {
            /** @var msPaymentHandler|PayPal $handler */
            $handler = new $class($order);
            if (method_exists($handler, \'getPaymentLink\')) {
                $link = $handler->getPaymentLink($order);
                $pls[\'payment_link\'] = $link;
            }
        }
    }
}

$pls[\'scriptProperties\'] = $scriptProperties;
$output = $pdoFetch->getChunk($tpl, $pls);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $output .= \'<pre class="msGetOrderLog">\' . print_r($pdoFetch->getTime(), true) . \'</pre>\';
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
      'locked' => 0,
      'properties' => 'a:5:{s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:14:"tpl.msGetOrder";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"includeTVs";a:7:{s:4:"name";s:10:"includeTVs";s:4:"desc";s:19:"ms2_prop_includeTVs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"includeThumbs";a:7:{s:4:"name";s:13:"includeThumbs";s:4:"desc";s:22:"ms2_prop_includeThumbs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"toPlaceholder";a:7:{s:4:"name";s:13:"toPlaceholder";s:4:"desc";s:22:"ms2_prop_toPlaceholder";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"showLog";a:7:{s:4:"name";s:7:"showLog";s:4:"desc";s:16:"ms2_prop_showLog";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_get_order.php',
      'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGetOrder\');

if (empty($id) && !empty($_GET[\'msorder\'])) {
    $id = (int)$_GET[\'msorder\'];
}
if (empty($id)) {
    return;
}
/** @var msOrder $order */
if (!$order = $modx->getObject(\'msOrder\', compact(\'id\'))) {
    return $modx->lexicon(\'ms2_err_order_nf\');
}
$canView = (!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) ||
    $order->get(\'user_id\') == $modx->user->id || $modx->user->hasSessionContext(
        \'mgr\'
    ) || !empty($scriptProperties[\'id\']);
if (!$canView) {
    return \'\';
}

// Select ordered products
$where = [
    \'msOrderProduct.order_id\' => $id,
];

// Include products properties
$leftJoin = [
    \'msProduct\' => [
        \'class\' => \'msProduct\',
        \'on\' => \'msProduct.id = msOrderProduct.product_id\',
    ],
    \'Data\' => [
        \'class\' => \'msProductData\',
        \'on\' => \'msProduct.id = Data.id\',
    ],
    \'Vendor\' => [
        \'class\' => \'msVendor\',
        \'on\' => \'Data.vendor = Vendor.id\',
    ],
];

// Select columns
$select = [
    \'msProduct\' => !empty($includeContent)
        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')
        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),
    \'Data\' => $modx->getSelectColumns(
            \'msProductData\',
            \'Data\',
            \'\',
            [\'id\'],
            true
        ) . \',`Data`.`price` as `original_price`\',
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),
    \'OrderProduct\' => $modx->getSelectColumns(
            \'msOrderProduct\',
            \'msOrderProduct\',
            \'\',
            [\'id\'],
            true
        ) . \', `msOrderProduct`.`id` as `order_product_id`\',
];

// Include products thumbnails
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));
    if (!empty($thumbs[0])) {
        foreach ($thumbs as $thumb) {
            $leftJoin[$thumb] = [
                \'class\' => \'msProductFile\',
                \'on\' => "`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%/{$thumb}/%\'",
            ];
            $select[$thumb] = "`{$thumb}`.url as \'{$thumb}\'";
        }
        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'</b>.\');
    }
}

// Add user parameters
foreach ([\'where\', \'leftJoin\', \'select\'] as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Tables for joining
$default = [
    \'class\' => \'msOrderProduct\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'select\' => $select,
    \'joinTVsTo\' => \'msProduct\',
    \'sortby\' => \'msOrderProduct.id\',
    \'sortdir\' => \'asc\',
    \'groupby\' => \'msOrderProduct.id\',
    \'fastMode\' => false,
    \'limit\' => 0,
    \'return\' => \'data\',
    \'decodeJSON\' => true,
    \'nestedChunkPrefix\' => \'minishop2_\',
];
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), true);
$rows = $pdoFetch->run();

$products = [];
$cart_count = 0;
$cart_discount_cost = 0;
foreach ($rows as $product) {
    $old_price = $product[\'original_price\'] > $product[\'price\']
        ? $product[\'original_price\']
        : $product[\'old_price\'];

    $discount_price = $old_price > 0 ? $old_price - $product[\'price\'] : 0;

    $product[\'old_price\'] = $miniShop2->formatPrice($old_price);
    $product[\'price\'] = $miniShop2->formatPrice($product[\'price\']);
    $product[\'cost\'] = $miniShop2->formatPrice($product[\'cost\']);
    $product[\'weight\'] = $miniShop2->formatWeight($product[\'weight\']);
    $product[\'discount_price\'] = $miniShop2->formatPrice($discount_price);
    $product[\'discount_cost\'] = $miniShop2->formatPrice($product[\'count\'] * $discount_price);

    $product[\'id\'] = (int)$product[\'id\'];
    if (empty($product[\'name\'])) {
        $product[\'name\'] = $product[\'pagetitle\'];
    } else {
        $product[\'pagetitle\'] = $product[\'name\'];
    }

    // Additional properties of product
    if (!empty($product[\'options\']) && is_array($product[\'options\'])) {
        foreach ($product[\'options\'] as $option => $value) {
            $product[\'option.\' . $option] = $value;
        }
    }

    // Add option values
    $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $product[\'id\']]);
    $products[] = array_merge($product, $options);

    // Count total
    $cart_count += $product[\'count\'];
    $cart_discount_cost += $product[\'count\'] * $discount_price;
}

$pls = array_merge($scriptProperties, [
    \'order\' => $order->toArray(),
    \'products\' => $products,
    \'user\' => ($tmp = $order->getOne(\'User\'))
        ? array_merge($tmp->getOne(\'Profile\')->toArray(), $tmp->toArray())
        : [],
    \'address\' => ($tmp = $order->getOne(\'Address\'))
        ? $tmp->toArray()
        : [],
    \'delivery\' => ($tmp = $order->getOne(\'Delivery\'))
        ? $tmp->toArray()
        : [],
    \'payment\' => ($payment = $order->getOne(\'Payment\'))
        ? $payment->toArray()
        : [],
    \'total\' => [
        \'cost\' => $miniShop2->formatPrice($order->get(\'cost\')),
        \'cart_cost\' => $miniShop2->formatPrice($order->get(\'cart_cost\')),
        \'delivery_cost\' => $miniShop2->formatPrice($order->get(\'delivery_cost\')),
        \'weight\' => $miniShop2->formatWeight($order->get(\'weight\')),
        \'cart_weight\' => $miniShop2->formatWeight($order->get(\'weight\')),
        \'cart_count\' => $cart_count,
        \'cart_discount\' => $cart_discount_cost
    ],
]);

// add "payment" link
if ($payment and $class = $payment->get(\'class\')) {
    $status = $modx->getOption(\'payStatus\', $scriptProperties, \'1\');
    $status = array_map(\'trim\', explode(\',\', $status));
    if (in_array($order->get(\'status\'), $status)) {
        $miniShop2->loadCustomClasses(\'payment\');
        if (class_exists($class)) {
            /** @var msPaymentHandler|PayPal $handler */
            $handler = new $class($order);
            if (method_exists($handler, \'getPaymentLink\')) {
                $link = $handler->getPaymentLink($order);
                $pls[\'payment_link\'] = $link;
            }
        }
    }
}

$pls[\'scriptProperties\'] = $scriptProperties;
$output = $pdoFetch->getChunk($tpl, $pls);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $output .= \'<pre class="msGetOrderLog">\' . print_r($pdoFetch->getTime(), true) . \'</pre>\';
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
    ),
  ),
  '0264a63c0464a3e70bc8a7c6fe9dc328' => 
  array (
    'criteria' => 
    array (
      'name' => 'msProductOptions',
    ),
    'object' => 
    array (
      'id' => 163,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msProductOptions',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msProductOptions\');
if (!empty($input) && empty($product)) {
    $product = $input;
}

$product = !empty($product) && $product != $modx->resource->id
    ? $modx->getObject(\'msProduct\', [\'id\' => $product])
    : $modx->resource;
if (!($product instanceof msProduct)) {
    return "[msProductOptions] The resource with id = {$product->id} is not instance of msProduct.";
}

$ignoreGroups = array_diff(
    array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreGroups\', $scriptProperties, \'\'))),
    [\'\']
);
$ignoreOptions = array_diff(
    array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreOptions\', $scriptProperties, \'\'))),
    [\'\']
);
$sortGroups = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'sortGroups\', $scriptProperties, \'\'))), [\'\']);
$sortOptions = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'sortOptions\', $scriptProperties, \'\'))), [\'\']);
$onlyOptions = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'onlyOptions\', $scriptProperties, \'\'))), [\'\']);
if (empty($sortOptions) && !empty($onlyOptions)) {
    $sortOptions = $onlyOptions;
}
$groups = !empty($groups)
    ? array_map(\'trim\', explode(\',\', $groups))
    : [];
/** @var msProductData $data */
if ($data = $product->getOne(\'Data\')) {
    $optionKeys = $data->getOptionKeys();
}
if (empty($optionKeys)) {
    return \'\';
}
$productData = $product->loadOptions();

$options = [];
foreach ($optionKeys as $key) {
    // Filter by key
    if (!empty($onlyOptions) && $onlyOptions[0] != \'\' && !in_array($key, $onlyOptions)) {
        continue;
    } elseif (in_array($key, $ignoreOptions)) {
        continue;
    }
    $option = [];
    foreach ($productData as $dataKey => $dataValue) {
        $dataKey = explode(\'.\', $dataKey);
        if ($dataKey[0] == $key && (count($dataKey) > 1)) {
            $option[$dataKey[1]] = $dataValue;
        }
    }

    $skip = (!empty($ignoreGroups) && (in_array($option[\'category\'], $ignoreGroups) || in_array(
        $option[\'category_name\'],
        $ignoreGroups
    )))
        || (!empty($groups) && !in_array($option[\'category\'], $groups) && !in_array($option[\'category_name\'], $groups));

    if (!$skip) {
        $option[\'value\'] = $product->get($key);
        if (!empty($option[\'value\'])) {
            $options[$key] = $option;
        }
    }
}

if (!empty($sortGroups) && !empty($options)) {
    $sortGroups = array_map(\'mb_strtolower\', $sortGroups);
    uasort($options, function ($a, $b) use ($sortGroups) {
        $ai = array_search(mb_strtolower($a[\'category\'], \'utf-8\'), $sortGroups, true);
        $ai = $ai !== false ? $ai : array_search(mb_strtolower($a[\'category_name\'], \'utf-8\'), $sortGroups, true);
        $bi = array_search(mb_strtolower($b[\'category\'], \'utf-8\'), $sortGroups, true);
        $bi = $bi !== false ? $bi : array_search(mb_strtolower($b[\'category_name\'], \'utf-8\'), $sortGroups, true);
        if ($ai === false && $bi === false) {
            return 0;
        } elseif ($ai === false) {
            return 1;
        } elseif ($bi === false) {
            return -1;
        } elseif ($ai < $bi) {
            return -1;
        } elseif ($ai > $bi) {
            return 1;
        }
        return 0;
    });
}

if (!empty($sortOptions) && !empty($options)) {
    $sortOptions = array_map(\'mb_strtolower\', $sortOptions);
    uksort($options, function ($a, $b) use ($sortOptions) {
        $ai = array_search(mb_strtolower($a, \'utf-8\'), $sortOptions, true);
        $bi = array_search(mb_strtolower($b, \'utf-8\'), $sortOptions, true);
        if ($ai === false && $bi === false) {
            return 0;
        } elseif ($ai === false) {
            return 1;
        } elseif ($bi === false) {
            return -1;
        } elseif ($ai < $bi) {
            return -1;
        } elseif ($ai > $bi) {
            return 1;
        }
        return 0;
    });
}

$options = $miniShop2->sortOptionValues($options, $scriptProperties[\'sortOptionValues\']);

if (in_array($scriptProperties[\'return\'], [\'data\', \'array\'], true)) {
    return $options;
}

/** @var pdoTools $pdoTools */
$pdoTools = $modx->getService(\'pdoTools\');

return $pdoTools->getChunk($tpl, [
    \'options\' => $options,
    \'scriptProperties\' => $scriptProperties
]);',
      'locked' => 0,
      'properties' => 'a:9:{s:7:"product";a:7:{s:4:"name";s:7:"product";s:4:"desc";s:16:"ms2_prop_product";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:20:"tpl.msProductOptions";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:12:"ignoreGroups";a:7:{s:4:"name";s:12:"ignoreGroups";s:4:"desc";s:21:"ms2_prop_ignoreGroups";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"ignoreOptions";a:7:{s:4:"name";s:13:"ignoreOptions";s:4:"desc";s:22:"ms2_prop_ignoreOptions";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:11:"onlyOptions";a:7:{s:4:"name";s:11:"onlyOptions";s:4:"desc";s:20:"ms2_prop_onlyOptions";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"sortGroups";a:7:{s:4:"name";s:10:"sortGroups";s:4:"desc";s:19:"ms2_prop_sortGroups";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:11:"sortOptions";a:7:{s:4:"name";s:11:"sortOptions";s:4:"desc";s:20:"ms2_prop_sortOptions";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:16:"sortOptionValues";a:7:{s:4:"name";s:16:"sortOptionValues";s:4:"desc";s:25:"ms2_prop_sortOptionValues";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"groups";a:7:{s:4:"name";s:6:"groups";s:4:"desc";s:15:"ms2_prop_groups";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_product_options.php',
      'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msProductOptions\');
if (!empty($input) && empty($product)) {
    $product = $input;
}

$product = !empty($product) && $product != $modx->resource->id
    ? $modx->getObject(\'msProduct\', [\'id\' => $product])
    : $modx->resource;
if (!($product instanceof msProduct)) {
    return "[msProductOptions] The resource with id = {$product->id} is not instance of msProduct.";
}

$ignoreGroups = array_diff(
    array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreGroups\', $scriptProperties, \'\'))),
    [\'\']
);
$ignoreOptions = array_diff(
    array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreOptions\', $scriptProperties, \'\'))),
    [\'\']
);
$sortGroups = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'sortGroups\', $scriptProperties, \'\'))), [\'\']);
$sortOptions = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'sortOptions\', $scriptProperties, \'\'))), [\'\']);
$onlyOptions = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'onlyOptions\', $scriptProperties, \'\'))), [\'\']);
if (empty($sortOptions) && !empty($onlyOptions)) {
    $sortOptions = $onlyOptions;
}
$groups = !empty($groups)
    ? array_map(\'trim\', explode(\',\', $groups))
    : [];
/** @var msProductData $data */
if ($data = $product->getOne(\'Data\')) {
    $optionKeys = $data->getOptionKeys();
}
if (empty($optionKeys)) {
    return \'\';
}
$productData = $product->loadOptions();

$options = [];
foreach ($optionKeys as $key) {
    // Filter by key
    if (!empty($onlyOptions) && $onlyOptions[0] != \'\' && !in_array($key, $onlyOptions)) {
        continue;
    } elseif (in_array($key, $ignoreOptions)) {
        continue;
    }
    $option = [];
    foreach ($productData as $dataKey => $dataValue) {
        $dataKey = explode(\'.\', $dataKey);
        if ($dataKey[0] == $key && (count($dataKey) > 1)) {
            $option[$dataKey[1]] = $dataValue;
        }
    }

    $skip = (!empty($ignoreGroups) && (in_array($option[\'category\'], $ignoreGroups) || in_array(
        $option[\'category_name\'],
        $ignoreGroups
    )))
        || (!empty($groups) && !in_array($option[\'category\'], $groups) && !in_array($option[\'category_name\'], $groups));

    if (!$skip) {
        $option[\'value\'] = $product->get($key);
        if (!empty($option[\'value\'])) {
            $options[$key] = $option;
        }
    }
}

if (!empty($sortGroups) && !empty($options)) {
    $sortGroups = array_map(\'mb_strtolower\', $sortGroups);
    uasort($options, function ($a, $b) use ($sortGroups) {
        $ai = array_search(mb_strtolower($a[\'category\'], \'utf-8\'), $sortGroups, true);
        $ai = $ai !== false ? $ai : array_search(mb_strtolower($a[\'category_name\'], \'utf-8\'), $sortGroups, true);
        $bi = array_search(mb_strtolower($b[\'category\'], \'utf-8\'), $sortGroups, true);
        $bi = $bi !== false ? $bi : array_search(mb_strtolower($b[\'category_name\'], \'utf-8\'), $sortGroups, true);
        if ($ai === false && $bi === false) {
            return 0;
        } elseif ($ai === false) {
            return 1;
        } elseif ($bi === false) {
            return -1;
        } elseif ($ai < $bi) {
            return -1;
        } elseif ($ai > $bi) {
            return 1;
        }
        return 0;
    });
}

if (!empty($sortOptions) && !empty($options)) {
    $sortOptions = array_map(\'mb_strtolower\', $sortOptions);
    uksort($options, function ($a, $b) use ($sortOptions) {
        $ai = array_search(mb_strtolower($a, \'utf-8\'), $sortOptions, true);
        $bi = array_search(mb_strtolower($b, \'utf-8\'), $sortOptions, true);
        if ($ai === false && $bi === false) {
            return 0;
        } elseif ($ai === false) {
            return 1;
        } elseif ($bi === false) {
            return -1;
        } elseif ($ai < $bi) {
            return -1;
        } elseif ($ai > $bi) {
            return 1;
        }
        return 0;
    });
}

$options = $miniShop2->sortOptionValues($options, $scriptProperties[\'sortOptionValues\']);

if (in_array($scriptProperties[\'return\'], [\'data\', \'array\'], true)) {
    return $options;
}

/** @var pdoTools $pdoTools */
$pdoTools = $modx->getService(\'pdoTools\');

return $pdoTools->getChunk($tpl, [
    \'options\' => $options,
    \'scriptProperties\' => $scriptProperties
]);',
    ),
  ),
  'dca8a4f6779a42ff33956ce3a58f48c6' => 
  array (
    'criteria' => 
    array (
      'name' => 'miniShop2',
    ),
    'object' => 
    array (
      'id' => 50,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'miniShop2',
      'description' => '',
      'editor_type' => 0,
      'category' => 93,
      'cache_type' => 0,
      'plugincode' => '/** @var modX $modx */
switch ($modx->event->name) {
    case \'OnMODXInit\':
        // Load extensions
        /** @var miniShop2 $miniShop2 */
        if ($miniShop2 = $modx->getService(\'miniShop2\')) {
            $miniShop2->loadMap();
        }
        break;

    case \'OnHandleRequest\':
        // Handle ajax requests
        $isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';
        if (empty($_REQUEST[\'ms2_action\']) || !$isAjax) {
            return;
        }
        /** @var miniShop2 $miniShop2 */
        if ($miniShop2 = $modx->getService(\'miniShop2\')) {
            $response = $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);
            @session_write_close();
            exit($response);
        }
        break;

    case \'OnManagerPageBeforeRender\':
        /** @var miniShop2 $miniShop2 */
        if ($miniShop2 = $modx->getService(\'miniShop2\')) {
            $modx->controller->addLexiconTopic(\'minishop2:default\');
            $modx->regClientStartupScript($miniShop2->config[\'jsUrl\'] . \'mgr/misc/ms2.manager.js\');
        }
        break;

    case \'OnLoadWebDocument\':
        /** @var miniShop2 $miniShop2 */
        $miniShop2 = $modx->getService(\'miniShop2\');
        $registerFrontend = $modx->getOption(\'ms2_register_frontend\', null, \'1\');
        if ($miniShop2 && $registerFrontend) {
            $miniShop2->registerFrontend($modx->context->get(\'key\'));
        }
        // Handle non-ajax requests
        if (!empty($_REQUEST[\'ms2_action\'])) {
            if ($miniShop2) {
                $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);
            }
        }
        // Set product fields as [[*resource]] tags
        if ($modx->resource->get(\'class_key\') == \'msProduct\') {
            if ($dataMeta = $modx->getFieldMeta(\'msProductData\')) {
                unset($dataMeta[\'id\']);
                $modx->resource->_fieldMeta = array_merge(
                    $modx->resource->_fieldMeta,
                    $dataMeta
                );
            }
        }
        break;

    case \'OnWebPageInit\':
        // Set referrer cookie
        /** @var msCustomerProfile $profile */
        $referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);
        $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);
        $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);

        if (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {
            $code = trim($_REQUEST[$referrerVar]);
            if ($profile = $modx->getObject(\'msCustomerProfile\', [\'referrer_code\' => $code])) {
                $referrer = $profile->get(\'id\');
                setcookie($cookieVar, $referrer, time() + $cookieTime);
            }
        }
        break;

    case \'OnUserSave\':
        // Save referrer id
        /** @var string $mode */
        if ($mode == modSystemEvent::MODE_NEW) {
            /** @var modUser $user */
            $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);
            $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);
            if ($modx->context->key != \'mgr\' && !empty($_COOKIE[$cookieVar])) {
                if ($profile = $modx->getObject(\'msCustomerProfile\', [\'id\' => $user->get(\'id\')])) {
                    if (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $user->get(\'id\')) {
                        $profile->set(\'referrer_id\', (int)$_COOKIE[$cookieVar]);
                        $profile->save();
                    }
                }
                setcookie($cookieVar, \'\', time() - $cookieTime);
            }
        }
        break;

    case \'msOnChangeOrderStatus\':
        // Update customer stat
        if (empty($status) || $status != 2) {
            return;
        }

        /** @var modUser $user */
        /** @var msOrder $order */
        if ($user = $order->getOne(\'User\')) {
            $q = $modx->newQuery(\'msOrder\', [\'type\' => 0]);
            $q->innerJoin(\'modUser\', \'modUser\', [\'modUser.id = msOrder.user_id\']);
            $q->innerJoin(\'msOrderLog\', \'msOrderLog\', [
                \'msOrderLog.order_id = msOrder.id\',
                \'msOrderLog.action\' => \'status\',
                \'msOrderLog.entry\' => $status,
            ]);
            $q->where([\'msOrder.user_id\' => $user->get(\'id\')]);
            $q->groupby(\'msOrder.user_id\');
            $q->select(\'SUM(msOrder.cost)\');
            if ($q->prepare() && $q->stmt->execute()) {
                $spent = $q->stmt->fetchColumn();
                /** @var msCustomerProfile $profile */
                if ($profile = $modx->getObject(\'msCustomerProfile\', [\'id\' => $user->get(\'id\')])) {
                    $profile->set(\'spent\', $spent);
                    $profile->save();
                }
            }
        }
        break;
}',
      'locked' => 0,
      'properties' => NULL,
      'disabled' => 0,
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/plugins/plugin.minishop2.php',
      'content' => '/** @var modX $modx */
switch ($modx->event->name) {
    case \'OnMODXInit\':
        // Load extensions
        /** @var miniShop2 $miniShop2 */
        if ($miniShop2 = $modx->getService(\'miniShop2\')) {
            $miniShop2->loadMap();
        }
        break;

    case \'OnHandleRequest\':
        // Handle ajax requests
        $isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';
        if (empty($_REQUEST[\'ms2_action\']) || !$isAjax) {
            return;
        }
        /** @var miniShop2 $miniShop2 */
        if ($miniShop2 = $modx->getService(\'miniShop2\')) {
            $response = $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);
            @session_write_close();
            exit($response);
        }
        break;

    case \'OnManagerPageBeforeRender\':
        /** @var miniShop2 $miniShop2 */
        if ($miniShop2 = $modx->getService(\'miniShop2\')) {
            $modx->controller->addLexiconTopic(\'minishop2:default\');
            $modx->regClientStartupScript($miniShop2->config[\'jsUrl\'] . \'mgr/misc/ms2.manager.js\');
        }
        break;

    case \'OnLoadWebDocument\':
        /** @var miniShop2 $miniShop2 */
        $miniShop2 = $modx->getService(\'miniShop2\');
        $registerFrontend = $modx->getOption(\'ms2_register_frontend\', null, \'1\');
        if ($miniShop2 && $registerFrontend) {
            $miniShop2->registerFrontend($modx->context->get(\'key\'));
        }
        // Handle non-ajax requests
        if (!empty($_REQUEST[\'ms2_action\'])) {
            if ($miniShop2) {
                $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);
            }
        }
        // Set product fields as [[*resource]] tags
        if ($modx->resource->get(\'class_key\') == \'msProduct\') {
            if ($dataMeta = $modx->getFieldMeta(\'msProductData\')) {
                unset($dataMeta[\'id\']);
                $modx->resource->_fieldMeta = array_merge(
                    $modx->resource->_fieldMeta,
                    $dataMeta
                );
            }
        }
        break;

    case \'OnWebPageInit\':
        // Set referrer cookie
        /** @var msCustomerProfile $profile */
        $referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);
        $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);
        $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);

        if (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {
            $code = trim($_REQUEST[$referrerVar]);
            if ($profile = $modx->getObject(\'msCustomerProfile\', [\'referrer_code\' => $code])) {
                $referrer = $profile->get(\'id\');
                setcookie($cookieVar, $referrer, time() + $cookieTime);
            }
        }
        break;

    case \'OnUserSave\':
        // Save referrer id
        /** @var string $mode */
        if ($mode == modSystemEvent::MODE_NEW) {
            /** @var modUser $user */
            $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);
            $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);
            if ($modx->context->key != \'mgr\' && !empty($_COOKIE[$cookieVar])) {
                if ($profile = $modx->getObject(\'msCustomerProfile\', [\'id\' => $user->get(\'id\')])) {
                    if (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $user->get(\'id\')) {
                        $profile->set(\'referrer_id\', (int)$_COOKIE[$cookieVar]);
                        $profile->save();
                    }
                }
                setcookie($cookieVar, \'\', time() - $cookieTime);
            }
        }
        break;

    case \'msOnChangeOrderStatus\':
        // Update customer stat
        if (empty($status) || $status != 2) {
            return;
        }

        /** @var modUser $user */
        /** @var msOrder $order */
        if ($user = $order->getOne(\'User\')) {
            $q = $modx->newQuery(\'msOrder\', [\'type\' => 0]);
            $q->innerJoin(\'modUser\', \'modUser\', [\'modUser.id = msOrder.user_id\']);
            $q->innerJoin(\'msOrderLog\', \'msOrderLog\', [
                \'msOrderLog.order_id = msOrder.id\',
                \'msOrderLog.action\' => \'status\',
                \'msOrderLog.entry\' => $status,
            ]);
            $q->where([\'msOrder.user_id\' => $user->get(\'id\')]);
            $q->groupby(\'msOrder.user_id\');
            $q->select(\'SUM(msOrder.cost)\');
            if ($q->prepare() && $q->stmt->execute()) {
                $spent = $q->stmt->fetchColumn();
                /** @var msCustomerProfile $profile */
                if ($profile = $modx->getObject(\'msCustomerProfile\', [\'id\' => $user->get(\'id\')])) {
                    $profile->set(\'spent\', $spent);
                    $profile->save();
                }
            }
        }
        break;
}',
    ),
  ),
  'c76e5df73b0989c614990b703b80f6df' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 50,
      'event' => 'OnMODXInit',
    ),
    'object' => 
    array (
      'pluginid' => 50,
      'event' => 'OnMODXInit',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  'be164ae424a5a9d8918257570c2921ae' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 50,
      'event' => 'OnHandleRequest',
    ),
    'object' => 
    array (
      'pluginid' => 50,
      'event' => 'OnHandleRequest',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '6014c2ec98cc86fec75c53c62e478162' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 50,
      'event' => 'OnLoadWebDocument',
    ),
    'object' => 
    array (
      'pluginid' => 50,
      'event' => 'OnLoadWebDocument',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  'f8f9a7430e3d6349b394b291133a1587' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 50,
      'event' => 'OnWebPageInit',
    ),
    'object' => 
    array (
      'pluginid' => 50,
      'event' => 'OnWebPageInit',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  'f87b3ad9ddd9290986b82291d722a5cb' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 50,
      'event' => 'OnUserSave',
    ),
    'object' => 
    array (
      'pluginid' => 50,
      'event' => 'OnUserSave',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '2b5bf142b03bd9a535deba0d1a213b5c' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 50,
      'event' => 'msOnChangeOrderStatus',
    ),
    'object' => 
    array (
      'pluginid' => 50,
      'event' => 'msOnChangeOrderStatus',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  'ac1debdfe3bb21e1e7bd3af9357c76fa' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 50,
      'event' => 'OnManagerPageBeforeRender',
    ),
    'object' => 
    array (
      'pluginid' => 50,
      'event' => 'OnManagerPageBeforeRender',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
);